var SimpleWebRTC=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=73)}([function(e,t,n){"use strict";e.exports=n(40)},function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",function(){return i}),n.d(t,"__assign",function(){return o}),n.d(t,"__rest",function(){return s}),n.d(t,"__decorate",function(){return a}),n.d(t,"__param",function(){return c}),n.d(t,"__metadata",function(){return u}),n.d(t,"__awaiter",function(){return l}),n.d(t,"__generator",function(){return d}),n.d(t,"__exportStar",function(){return f}),n.d(t,"__values",function(){return p}),n.d(t,"__read",function(){return h}),n.d(t,"__spread",function(){return m}),n.d(t,"__spreadArrays",function(){return g}),n.d(t,"__await",function(){return b}),n.d(t,"__asyncGenerator",function(){return y}),n.d(t,"__asyncDelegator",function(){return v}),n.d(t,"__asyncValues",function(){return w}),n.d(t,"__makeTemplateObject",function(){return S}),n.d(t,"__importStar",function(){return x}),n.d(t,"__importDefault",function(){return _});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function a(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function c(e,t){return function(n,r){t(n,r,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})}function d(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function f(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function p(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function h(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e}function g(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function b(e){return this instanceof b?(this.v=e,this):new b(e)}function y(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){i[e]&&(r[e]=function(t){return new Promise(function(n,r){o.push([e,t,n,r])>1||a(e,t)})})}function a(e,t){try{(n=i[e](t)).value instanceof b?Promise.resolve(n.value.v).then(c,u):l(o[0][2],n)}catch(e){l(o[0][3],e)}var n}function c(e){a("next",e)}function u(e){a("throw",e)}function l(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function v(e){var t,n;return t={},r("next"),r("throw",function(e){throw e}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:b(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function w(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=p(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,i){(function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)})(r,i,(t=e[n](t)).done,t.value)})}}}function S(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function x(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function _(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";var r={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};r.localCName=r.generateIdentifier(),r.splitLines=function(e){return e.trim().split("\n").map(function(e){return e.trim()})},r.splitSections=function(e){return e.split("\nm=").map(function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"})},r.getDescription=function(e){var t=r.splitSections(e);return t&&t[0]},r.getMediaSections=function(e){var t=r.splitSections(e);return t.shift(),t},r.matchPrefix=function(e,t){return r.splitLines(e).filter(function(e){return 0===e.indexOf(t)})},r.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:n[t[r]]=t[r+1]}return n},r.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},r.parseIceOptions=function(e){return e.substr(14).split(" ")},r.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},r.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},r.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},r.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},r.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<r.length;i++)n[(t=r[i].trim().split("="))[0].trim()]=t[1];return n},r.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach(function(t){e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)}),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},r.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},r.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"}),t},r.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},r.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map(function(e){return parseInt(e,10)})}},r.getMid=function(e){var t=r.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},r.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},r.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:r.matchPrefix(e+t,"a=fingerprint:").map(r.parseFingerprint)}},r.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach(function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),n},r.getIceParameters=function(e,t){var n=r.splitLines(e);return{usernameFragment:(n=n.concat(r.splitLines(t))).filter(function(e){return 0===e.indexOf("a=ice-ufrag:")})[0].substr(12),password:n.filter(function(e){return 0===e.indexOf("a=ice-pwd:")})[0].substr(10)}},r.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},r.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=r.splitLines(e)[0].split(" "),i=3;i<n.length;i++){var o=n[i],s=r.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(s){var a=r.parseRtpMap(s),c=r.matchPrefix(e,"a=fmtp:"+o+" ");switch(a.parameters=c.length?r.parseFmtp(c[0]):{},a.rtcpFeedback=r.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(r.parseRtcpFb),t.codecs.push(a),a.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(a.name.toUpperCase())}}}return r.matchPrefix(e,"a=extmap:").forEach(function(e){t.headerExtensions.push(r.parseExtmap(e))}),t},r.writeRtpDescription=function(e,t){var n="";n+="m="+e+" ",n+=t.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=t.codecs.map(function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType}).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(function(e){n+=r.writeRtpMap(e),n+=r.writeFmtp(e),n+=r.writeRtcpFb(e)});var i=0;return t.codecs.forEach(function(e){e.maxptime>i&&(i=e.maxptime)}),i>0&&(n+="a=maxptime:"+i+"\r\n"),n+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach(function(e){n+=r.writeExtmap(e)}),n},r.parseRtpEncodingParameters=function(e){var t,n=[],i=r.parseRtpParameters(e),o=-1!==i.fecMechanisms.indexOf("RED"),s=-1!==i.fecMechanisms.indexOf("ULPFEC"),a=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute}),c=a.length>0&&a[0].ssrc,u=r.matchPrefix(e,"a=ssrc-group:FID").map(function(e){return e.substr(17).split(" ").map(function(e){return parseInt(e,10)})});u.length>0&&u[0].length>1&&u[0][0]===c&&(t=u[0][1]),i.codecs.forEach(function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var r={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&t&&(r.rtx={ssrc:t}),n.push(r),o&&((r=JSON.parse(JSON.stringify(r))).fec={ssrc:c,mechanism:s?"red+ulpfec":"red"},n.push(r))}}),0===n.length&&c&&n.push({ssrc:c});var l=r.matchPrefix(e,"b=");return l.length&&(l=0===l[0].indexOf("b=TIAS:")?parseInt(l[0].substr(7),10):0===l[0].indexOf("b=AS:")?1e3*parseInt(l[0].substr(5),10)*.95-16e3:void 0,n.forEach(function(e){e.maxBitrate=l})),n},r.parseRtcpParameters=function(e){var t={},n=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute})[0];n&&(t.cname=n.value,t.ssrc=n.ssrc);var i=r.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=i.length>0,t.compound=0===i.length;var o=r.matchPrefix(e,"a=rtcp-mux");return t.mux=o.length>0,t},r.parseMsid=function(e){var t,n=r.matchPrefix(e,"a=msid:");if(1===n.length)return{stream:(t=n[0].substr(7).split(" "))[0],track:t[1]};var i=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(e){return"msid"===e.attribute});return i.length>0?{stream:(t=i[0].value.split(" "))[0],track:t[1]}:void 0},r.generateSessionId=function(){return Math.random().toString().substr(2,21)},r.writeSessionBoilerplate=function(e,t,n){var i=void 0!==t?t:2;return"v=0\r\no="+(n||"thisisadapterortc")+" "+(e||r.generateSessionId())+" "+i+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},r.writeMediaSection=function(e,t,n,i){var o=r.writeRtpDescription(e.kind,t);if(o+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",e.direction?o+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var s="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+s,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),o},r.getDirection=function(e,t){for(var n=r.splitLines(e),i=0;i<n.length;i++)switch(n[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[i].substr(2)}return t?r.getDirection(t):"sendrecv"},r.getKind=function(e){return r.splitLines(e)[0].split(" ")[0].substr(2)},r.isRejected=function(e){return"0"===e.split(" ",2)[1]},r.parseMLine=function(e){var t=r.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},r.parseOLine=function(e){var t=r.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},r.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=r.splitLines(e),n=0;n<t.length;n++)if(t[n].length<2||"="!==t[n].charAt(1))return!1;return!0},e.exports=r},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function u(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function l(e,t,n,r){var i,o,s,a;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),void 0===s)s=o[t]=n,++e._eventsCount;else if("function"==typeof s?s=o[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(i=u(e))>0&&s.length>i&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=s.length,a=c,console&&console.warn&&console.warn(a)}return e}function d(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,o(this.listener,this.target,e))}.bind(r);return i.listener=n,r.wrapFn=i,i}function f(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):h(i,i.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function h(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return u(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=i[e];if(void 0===c)return!1;if("function"==typeof c)o(c,this,t);else{var u=c.length,l=h(c,u);for(n=0;n<u;++n)o(l[n],this,t)}return!0},a.prototype.addListener=function(e,t){return l(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return l(this,e,t,!0)},a.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,d(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,d(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,r,i,o,s;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},a.prototype.listeners=function(e){return f(this,e,!0)},a.prototype.rawListeners=function(e){return f(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},a.prototype.listenerCount=p,a.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i,o,s,a){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,o,s,a],l=0;(c=new Error(t.replace(/%s/g,function(){return u[l++]}))).name="Invariant Violation"}throw c.framesToPop=1,c}}},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var c,u=[],l=!1,d=-1;function f(){l&&c&&(l=!1,c.length?u=c.concat(u):d=-1,u.length&&p())}function p(){if(!l){var e=a(f);l=!0;for(var t=u.length;t;){for(c=u,u=[];++d<t;)c&&c[d].run();d=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||l||a(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},function(e,t,n){e.exports=n(50)()},function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var r=n(53),i=n(54),o=n(55);function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return u(this,e,t,n)}function u(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=f(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|h(t,n),i=(e=a(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(c.isBuffer(t)){var n=0|p(t.length);return 0===(e=a(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?a(e,0):f(e,t);if("Buffer"===t.type&&o(t.data))return f(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(l(t),e=a(e,t<0?0:0|p(t)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function f(e,t){var n=t.length<0?0:0|p(t.length);e=a(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function p(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function h(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return B(e).length;default:if(r)return q(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function g(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:b(e,t,n,r,i);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,r,i){var o,s=1,a=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,n/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var l=-1;for(o=n;o<a;o++)if(u(e,o)===u(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===c)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(n+c>a&&(n=a-c),o=n;o>=0;o--){for(var d=!0,f=0;f<c;f++)if(u(e,o+f)!==u(t,f)){d=!1;break}if(d)return o}return-1}function y(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function v(e,t,n,r){return z(q(t,e.length-n),e,n,r)}function w(e,t,n,r){return z(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function S(e,t,n,r){return w(e,t,n,r)}function x(e,t,n,r){return z(B(t),e,n,r)}function _(e,t,n,r){return z(function(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function C(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function T(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,s,a,c,u=e[i],l=null,d=u>239?4:u>223?3:u>191?2:1;if(i+d<=n)switch(d){case 1:u<128&&(l=u);break;case 2:128==(192&(o=e[i+1]))&&(c=(31&u)<<6|63&o)>127&&(l=c);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&(c=(15&u)<<12|(63&o)<<6|63&s)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(c=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&c<1114112&&(l=c)}null===l?(l=65533,d=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=d}return function(e){var t=e.length;if(t<=k)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=k));return n}(r)}t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,n){return u(null,e,t,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?a(e,t):void 0!==n?"string"==typeof r?a(e,t).fill(n,r):a(e,t).fill(n):a(e,t)}(null,e,t,n)},c.allocUnsafe=function(e){return d(null,e)},c.allocUnsafeSlow=function(e){return d(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=c.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var s=e[n];if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},c.byteLength=h,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?T(this,0,e):function(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return P(this,t,n);case"utf8":case"utf-8":return T(this,t,n);case"ascii":return E(this,t,n);case"latin1":case"binary":return R(this,t,n);case"base64":return C(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,n,r,i){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(o,s),u=this.slice(r,i),l=e.slice(t,n),d=0;d<a;++d)if(u[d]!==l[d]){o=u[d],s=l[d];break}return o<s?-1:s<o?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return v(this,e,t,n);case"ascii":return w(this,e,t,n);case"latin1":case"binary":return S(this,e,t,n);case"base64":return x(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var k=4096;function E(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function R(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function P(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=U(e[o]);return i}function A(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function j(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function I(e,t,n,r,i,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function O(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function M(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function D(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function N(e,t,n,r,o){return o||D(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function L(e,t,n,r,o){return o||D(e,0,n,8),i.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=c.prototype;else{var i=t-e;n=new c(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},c.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||j(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},c.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||j(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},c.prototype.readUInt8=function(e,t){return t||j(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||j(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||j(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||j(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||j(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||j(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||j(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return t||j(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||j(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){t||j(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return t||j(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||j(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||j(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||j(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||j(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||j(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||I(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},c.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||I(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},c.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):O(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):O(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):M(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);I(this,e,t,n,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);I(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):O(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):O(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):M(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,n){return N(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return N(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return L(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return L(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},c.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=c.isBuffer(e)?e:q(new c(e,r).toString()),a=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%a]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function U(e){return e<16?"0"+e.toString(16):e.toString(16)}function q(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function B(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(F,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function z(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(3))},function(e,t,n){"use strict";var r={};function i(e,t,n){n||(n=Error);var i=function(e){var n,r;function i(n,r,i){return e.call(this,function(e,n,r){return"string"==typeof t?t:t(e,n,r)}(n,r,i))||this}return r=e,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r,i}(n);i.prototype.name=n.name,i.prototype.code=e,r[e]=i}function o(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map(function(e){return String(e)}),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}i("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),i("ERR_INVALID_ARG_TYPE",function(e,t,n){var r,i,s,a;if("string"==typeof t&&(i="not ",t.substr(!s||s<0?0:+s,i.length)===i)?(r="must not be",t=t.replace(/^not /,"")):r="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))a="The ".concat(e," ").concat(r," ").concat(o(t,"type"));else{var c=function(e,t,n){return"number"!=typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}(e,".")?"property":"argument";a='The "'.concat(e,'" ').concat(c," ").concat(r," ").concat(o(t,"type"))}return a+=". Received type ".concat(typeof n)},TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.codes=r},function(e,t,n){"use strict";(function(t){var r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=u;var i=n(29),o=n(33);n(7)(u,i);for(var s=r(o.prototype),a=0;a<s.length;a++){var c=s[a];u.prototype[c]||(u.prototype[c]=o.prototype[c])}function u(e){if(!(this instanceof u))return new u(e);i.call(this,e),o.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",l)))}function l(){this._writableState.ended||t.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this,n(6))},function(e,t,n){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(41)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(57),i=n(62);function o(e,t,n){const r=new i(t);return n&&n===e||c(r,"xmlns",e),r}function s(e,t,n){const r=[],i=e.getElementsByTagName(n);for(let n=0,o=i.length;n<o;n++){const o=i[n];o.namespaceURI===t&&o.parentNode===e&&r.push(o)}return r}function a(e,t,n){return e.getAttribute(t)||n||""}function c(e,t,n,r){n||r?e.setAttribute(t,n):e.removeAttribute(t)}function u(e,t,n,r,i){const a=s(e,t,n);if(a.length)for(let e=0;e<a.length;e++){if(i)return void a[e].setAttribute(r,i);a[e].removeAttribute(r)}else i&&((n=o(t,n,e.namespaceURI)).setAttribute(r,i),e.appendChild(n))}function l(e,t,n,r){const i=s(e,t,n);return r=r||"",i.length&&i[0].textContent||r}function d(e,t,n,r){const i=s(e,t,n);if(i.length)for(let t=0;t<i.length;t++)e.removeChild(i[t]);if(r){const i=o(t,n,e.namespaceURI);!0!==r&&(i.textContent=r),e.appendChild(i)}}function f(e,t,n,r){const i=s(e,t,n),o=[];r=r||function(e){return e.textContent||""};for(let e=0;e<i.length;e++)o.push(r(i[e]));return o}function p(e,t,n,r,i){const a=s(e,t,n);let c,u,l=[];for(i=i||function(r){if(r){const i=o(t,n,e.namespaceURI);i.textContent=r,e.appendChild(i)}},l="string"==typeof r?(r||"").split("\n"):r,c=0,u=a.length;c<u;c++)e.removeChild(a[c]);for(c=0,u=l.length;c<u;c++)i(l[c])}t.XML_NS="http://www.w3.org/XML/1998/namespace",t.parse=function(e){const t=r(e,{Element:i});if(1===t.nodeType)return t},t.createElement=o,t.find=s,t.findOrCreate=function(e,t,n){const r=s(e,t,n);if(r.length)return r[0];{const r=o(t,n,e.namespaceURI);return e.appendChild(r),r}},t.getAttribute=a,t.getAttributeNS=function(e,t,n,r){return e.getAttributeNS(t,n)||r||""},t.setAttribute=c,t.setAttributeNS=function(e,t,n,r,i){r||i?e.setAttributeNS(t,n,r):e.removeAttributeNS(t,n)},t.getBoolAttribute=function(e,t,n){const r=e.getAttribute(t)||n||"";return"true"===r||"1"===r},t.setBoolAttribute=function(e,t,n){n?e.setAttribute(t,"1"):e.removeAttribute(t)},t.getSubAttribute=function(e,t,n,r,i){const o=s(e,t,n);if(!o)return"";for(let e=0;e<o.length;e++)return o[e].getAttribute(r)||i||"";return""},t.setSubAttribute=u,t.getBoolSubAttribute=function(e,t,n,r,i){const o=e.getSubAttribute(t,n,r)||i||"";return"true"===o||"1"===o},t.setBoolSubAttribute=function(e,t,n,r,i){u(e,t,n,r,i=i?"1":"")},t.getText=function(e){return e.textContent},t.setText=function(e,t){e.textContent=t},t.getSubText=l,t.getTextSub=l,t.setSubText=d,t.setTextSub=d,t.getMultiSubText=f,t.setMultiSubText=p,t.getMultiSubAttribute=function(e,t,n,r){return f(e,t,n,function(e){return a(e,r)})},t.setMultiSubAttribute=function(e,t,n,r,i){p(e,t,n,i,function(i){const s=o(t,n,e.namespaceURI);c(s,r,i),e.appendChild(s)})},t.getSubLangText=function(e,n,r,i){const o=s(e,n,r);if(!o.length)return{};let a,c;const u={},l=[];for(let e=0;e<o.length;e++)a=(c=o[e]).getAttributeNS(t.XML_NS,"lang")||i,l.push(a),u[a]=c.textContent||"";return u},t.setSubLangText=function(e,n,r,i,a){let c,u;const l=s(e,n,r);if(l.length)for(let t=0;t<l.length;t++)e.removeChild(l[t]);if("string"==typeof i)(c=o(n,r,e.namespaceURI)).textContent=i,e.appendChild(c);else if("object"==typeof i)for(u in i)i.hasOwnProperty(u)&&(c=o(n,r,e.namespaceURI),u!==a&&c.setAttributeNS(t.XML_NS,"lang",u),c.textContent=i[u],e.appendChild(c))},t.getBoolSub=function(e,t,n){return!!s(e,t,n).length},t.setBoolSub=function(e,t,n,r){const i=s(e,t,n);if(i.length)for(let t=0;t<i.length;t++){if(r)return;e.removeChild(i[t])}else if(r){const r=o(t,n,e.namespaceURI);e.appendChild(r)}}},function(e,t,n){"use strict";var r=n(10).codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}e.exports=function e(t,n,o){if("function"==typeof n)return e(t,null,n);n||(n={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r)}}}(o||i);var s=n.readable||!1!==n.readable&&t.readable,a=n.writable||!1!==n.writable&&t.writable,c=function(){t.writable||l()},u=t._writableState&&t._writableState.finished,l=function(){a=!1,u=!0,s||o.call(t)},d=t._readableState&&t._readableState.endEmitted,f=function(){s=!1,d=!0,a||o.call(t)},p=function(e){o.call(t,e)},h=function(){var e;return s&&!d?(t._readableState&&t._readableState.ended||(e=new r),o.call(t,e)):a&&!u?(t._writableState&&t._writableState.ended||(e=new r),o.call(t,e)):void 0},m=function(){t.req.on("finish",l)};return function(e){return e.setHeader&&"function"==typeof e.abort}(t)?(t.on("complete",l),t.on("abort",h),t.req?m():t.on("request",m)):a&&!t._writableState&&(t.on("end",c),t.on("close",c)),t.on("end",f),t.on("finish",l),!1!==n.error&&t.on("error",p),t.on("close",h),function(){t.removeListener("complete",l),t.removeListener("abort",h),t.removeListener("request",m),t.req&&t.req.removeListener("finish",l),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",l),t.removeListener("end",f),t.removeListener("error",p),t.removeListener("close",h)}}},function(e,t,n){"use strict";e.exports=n(52)},function(e,t,n){"use strict";(function(e,r){var i,o=n(36);i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:r;var s=Object(o.a)(i);t.a=s}).call(this,n(3),n(44)(e))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(45),o=n(24);function s(e,t){var n=e.length,r=t.length,i=Math.min(n,r),s=0;for(s=0;s<i&&e[s]===t[s];s++);var a=0;for(a=0;a<i-s&&e[n-a-1]===t[r-a-1];a++);var c=s+a,u=[];if(c<n&&u.push({num:n-c,pos:n-a,type:"erase"}),c<r){var l=t.slice(s,s+r-c);u.push({pos:s,text:o.ucs2.encode(l),type:"insert"})}return u}t.diff=s;var a=function(){function e(e,t){void 0===t&&(t=!1),this.synced=!1,this.cursorPosition=0,this.sequenceNumber=0,this.ignoreWaits=!1,this.onStateChange=e||function(){},this.ignoreWaits=t,this.buffer=[],this.resetActionQueue()}return Object.defineProperty(e.prototype,"text",{get:function(){return o.ucs2.encode(this.buffer.slice())},enumerable:!0,configurable:!0}),e.prototype.commit=function(){this.resetActionQueue()},e.prototype.process=function(e){if("cancel"===e.event||"init"===e.event?this.resetActionQueue():"reset"===e.event||"new"===e.event?(this.resetActionQueue(),e.seq&&(this.sequenceNumber=e.seq)):e.seq!==this.sequenceNumber&&(this.synced=!1),e.actions)for(var t=Date.now(),n=0,r=0,i=e.actions;r<i.length;r++){var o=i[r];o.baseTime=t+n,"wait"===o.type&&(n+=o.num),this.actionQueue.push(o)}this.sequenceNumber=this.sequenceNumber+1},e.prototype.insert=function(e,t){void 0===e&&(e=""),void 0===t&&(t=this.buffer.length),e.normalize&&(e=e.normalize("NFC"));var n,r=o.ucs2.decode(e);(n=this.buffer).splice.apply(n,[t,0].concat(r)),this.cursorPosition=t+r.length,this.emitState()},e.prototype.erase=function(e,t){void 0===e&&(e=1),void 0===t&&(t=this.buffer.length),t=Math.max(Math.min(t,this.buffer.length),0),e=Math.max(Math.min(e,this.text.length),0),this.buffer.splice(Math.max(t-e,0),e),this.cursorPosition=Math.max(t-e,0),this.emitState()},e.prototype.emitState=function(e){void 0===e&&(e={}),this.onStateChange(r.__assign({cursorPosition:this.cursorPosition,synced:this.synced,text:this.text},e))},e.prototype.resetActionQueue=function(){var e=this;this.actionQueue&&this.actionQueue.kill(),this.sequenceNumber=0,this.synced=!0,this.buffer=[],this.emitState(),this.actionQueue=i.queue(function(t,n){var r=Date.now();return"insert"===t.type?(e.insert(t.text,t.pos),n()):"erase"===t.type?(e.erase(t.num,t.pos),n()):"wait"!==t.type?n():e.ignoreWaits?n():(t.num>700&&(t.num=700),r>=t.baseTime+t.num?n():void setTimeout(function(){return n()},t.num))}),this.actionQueue.drain=function(){e.emitState({drained:!0})}},e}();t.DisplayBuffer=a;var c=function(){function e(e,t){void 0===t&&(t=!1),this.resetInterval=1e4,this.ignoreWaits=!1,this.isStarting=!1,this.isReset=!1,this.changedBetweenResets=!1,this.onStateChange=e||function(){},this.ignoreWaits=t,this.buffer=[],this.actionQueue=[],this.sequenceNumber=0}return Object.defineProperty(e.prototype,"text",{get:function(){return o.ucs2.encode(this.buffer.slice())},enumerable:!0,configurable:!0}),e.prototype.update=function(e){var t=[];if(void 0!==e){e.normalize&&(e=e.normalize("NFC"));var n=o.ucs2.decode(e||"");t=s(this.buffer,n.slice()),this.buffer=n,this.emitState()}var r=Date.now();if(this.changedBetweenResets&&r-this.lastResetTime>this.resetInterval)this.actionQueue=[],this.actionQueue.push({pos:0,text:this.text,type:"insert"}),this.isReset=!0,this.lastActionTime=r,this.lastResetTime=r,this.changedBetweenResets=!1;else if(t.length){var i=r-(this.lastActionTime||r);i>0&&!this.ignoreWaits&&this.actionQueue.push({num:i,type:"wait"});for(var a=0,c=t;a<c.length;a++){var u=c[a];this.actionQueue.push(u)}this.lastActionTime=r,this.changedBetweenResets=!0}},e.prototype.start=function(e){return void 0===e&&(e=this.resetInterval),this.commit(),this.isStarting=!0,this.resetInterval=e,this.sequenceNumber=Math.floor(1e4*Math.random()+1),{event:"init"}},e.prototype.stop=function(){return this.commit(),{event:"cancel"}},e.prototype.diff=function(){if(this.update(),!this.actionQueue.length)return null;var e={actions:this.actionQueue,seq:this.sequenceNumber++};return this.isStarting?(e.event="new",this.isStarting=!1,this.lastResetTime=Date.now()):this.isReset&&(e.event="reset",this.isReset=!1),this.actionQueue=[],e},e.prototype.commit=function(){this.sequenceNumber=0,this.lastActionTime=0,this.actionQueue=[],this.buffer=[]},e.prototype.emitState=function(){this.onStateChange({text:this.text})},e}();t.InputBuffer=c},function(e,t,n){"use strict";var r=n(15),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function c(e){return r.isMemo(e)?s:a[e.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0};var u=Object.defineProperty,l=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,h=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(h){var i=p(n);i&&i!==h&&e(t,i,r)}var s=l(n);d&&(s=s.concat(d(n)));for(var a=c(t),m=c(n),g=0;g<s.length;++g){var b=s[g];if(!(o[b]||r&&r[b]||m&&m[b]||a&&a[b])){var y=f(n,b);try{u(t,b,y)}catch(e){}}}return t}return t}},function(e,t,n){"use strict";(function(e,r){n.d(t,"a",function(){return Do}),n.d(t,"b",function(){return x});var i=n(39),o=n.n(i),s=n(20),a=n(1),c=n(21),u=n(4),l=n(2);const d=n(24),f=!1;function p(e){return d.toUnicode(e)}const h=/^[\x00-\x7F]*$/;function m(e,t){return e?e+"@"+t:t}function g(e,t,n){return n?m(e,t)+"/"+n:m(e,t)}function b(e){let t=e.local,n=e.domain,r=e.resource,i=t;return t&&(i=w(t=t.toLowerCase())),r&&(r=function(e){return e}(r)),"."===n[n.length-1]&&(n=n.slice(0,n.length-1)),{bare:m(t,n=function(e){return e.toLowerCase()}(n.split(".").map(p).join("."))),domain:n,full:g(t,n,r),local:t,prepped:e.prepped||f,resource:r,unescapedBare:m(i,n),unescapedFull:g(i,n,r),unescapedLocal:i}}function y(e,t){let n="",r="",i="";t=t||h.test(e);const o=e.indexOf("/");o>0&&(i=e.slice(o+1),e=e.slice(0,o));const s=e.indexOf("@");s>0&&(n=e.slice(0,s),e=e.slice(s+1));const a=b({domain:r=e,local:n,resource:i});return a.prepped=a.prepped||t,a}function v(e){return e.replace(/^\s+|\s+$/g,"").replace(/\\5c/g,"\\5c5c").replace(/\\20/g,"\\5c20").replace(/\\22/g,"\\5c22").replace(/\\26/g,"\\5c26").replace(/\\27/g,"\\5c27").replace(/\\2f/g,"\\5c2f").replace(/\\3a/g,"\\5c3a").replace(/\\3c/g,"\\5c3c").replace(/\\3e/g,"\\5c3e").replace(/\\40/g,"\\5c40").replace(/ /g,"\\20").replace(/\"/g,"\\22").replace(/\&/g,"\\26").replace(/\'/g,"\\27").replace(/\//g,"\\2f").replace(/:/g,"\\3a").replace(/</g,"\\3c").replace(/>/g,"\\3e").replace(/@/g,"\\40")}function w(e){return e.replace(/\\20/g," ").replace(/\\22/g,'"').replace(/\\26/g,"&").replace(/\\27/g,"'").replace(/\\2f/g,"/").replace(/\\3a/g,":").replace(/\\3c/g,"<").replace(/\\3e/g,">").replace(/\\40/g,"@").replace(/\\5c/g,"\\")}class S{constructor(e,t,n){let r={};if(!e||t||n)if(t){let i=h.test(e)&&h.test(t);n&&(i=i&&h.test(n)),r=b({domain:t,local:v(e),prepped:i,resource:n})}else r={};else if("string"==typeof e)r=y(e);else{if(!(e._isJID||e instanceof S))throw new Error("Invalid argument type");r=e}this._isJID=!0,this.local=r.local||"",this.domain=r.domain||"",this.resource=r.resource||"",this.bare=r.bare||"",this.full=r.full||"",this.unescapedLocal=r.unescapedLocal||"",this.unescapedBare=r.unescapedBare||"",this.unescapedFull=r.unescapedFull||"",this.prepped=r.prepped}toString(){return this.full}toJSON(){return this.full}}var x=Object.freeze({prep:b,parse:y,equal:function(e,t,n){return e=new S(e),t=new S(t),2===arguments.length&&(n=!0),e.local===t.local&&e.domain===t.domain&&e.resource===t.resource&&(!n||e.prepped&&t.prepped)},equalBare:function(e,t,n){return e=new S(e),t=new S(t),2===arguments.length&&(n=!0),e.local===t.local&&e.domain===t.domain&&(!n||e.prepped&&t.prepped)},isBare:function(e){return!(e=new S(e)).resource},isFull:function(e){return!!(e=new S(e)).resource},escape:v,unescape:w,create:function(e,t,n){return new S(e,t,n)},JID:S});class _{response(e){return e.trace||""}challenge(){}}_.prototype.name="ANONYMOUS",_.prototype.clientFirst=!0;class C{response(e){return e.authzid||""}challenge(){}}C.prototype.name="EXTERNAL",C.prototype.clientFirst=!0;class T{response(e){let t="";return t+=e.authzid||"",t+="\0",t+=e.username,t+="\0",t+=e.password}challenge(){}}T.prototype.name="PLAIN",T.prototype.clientFirst=!0;class k extends s.Transform{constructor(t,n,r="be"){super(),this._block=e.alloc(t),this._finalSize=n,this._blockSize=t,this._bigEndian="be"===r,this._len=0}_transform(e,t,n){let r=null;try{this.update(e,t)}catch(e){r=e}n(r)}_flush(e){let t=null;try{this.push(this.digest())}catch(e){t=e}e(t)}update(t,n){"string"==typeof t&&(n=n||"utf8",t=e.from(t,n));const r=this._block,i=this._blockSize,o=t.length;let s=this._len;for(let e=0;e<o;){const n=s%i,a=Math.min(o-e,i-n);for(let i=0;i<a;i++)r[n+i]=t[e+i];e+=a,(s+=a)%i==0&&this._update(r)}return this._len+=o,this}digest(e){const t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));const n=8*this._len;if(n<=4294967295)this._bigEndian?(this._block.writeUInt32BE(0,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)):(this._block.writeUInt32LE(n,this._blockSize-8),this._block.writeUInt32LE(0,this._blockSize-4));else{const e=(4294967295&n)>>>0,t=(n-e)/4294967296;this._bigEndian?(this._block.writeUInt32BE(t,this._blockSize-8),this._block.writeUInt32BE(e,this._blockSize-4)):(this._block.writeUInt32LE(e,this._blockSize-8),this._block.writeUInt32LE(t,this._blockSize-4))}this._update(this._block);const r=this._hash();return e?r.toString(e):r}_update(e){throw new Error("_update must be implemented by subclass")}_hash(){throw new Error("_update must be implemented by subclass")}}function E(e,t){return e<<t|e>>>32-t}function R(e,t,n,r,i,o,s){return E(e+(t&n|~t&r)+i+o|0,s)+t|0}function P(e,t,n,r,i,o,s){return E(e+(t&r|n&~r)+i+o|0,s)+t|0}function A(e,t,n,r,i,o,s){return E(e+(t^n^r)+i+o|0,s)+t|0}function j(e,t,n,r,i,o,s){return E(e+(n^(t|~r))+i+o|0,s)+t|0}const I=[1518500249,1859775393,-1894007588,-899497514];function O(e){return e<<5|e>>>27}function M(e){return e<<30|e>>>2}function D(e,t,n,r){return 0===e?t&n|~t&r:2===e?t&n|t&r|n&r:t^n^r}class N extends k{constructor(){super(64,56),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this._w=new Array(80)}_update(e){const t=this._w;let n,r=0|this._a,i=0|this._b,o=0|this._c,s=0|this._d,a=0|this._e;for(n=0;n<16;++n)t[n]=e.readInt32BE(4*n);for(;n<80;++n)t[n]=(c=t[n-3]^t[n-8]^t[n-14]^t[n-16])<<1|c>>>31;var c;for(let e=0;e<80;++e){const n=~~(e/20),c=O(r)+D(n,i,o,s)+a+t[e]+I[n]|0;a=s,s=o,o=M(i),i=r,r=c}this._a=r+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=s+this._d|0,this._e=a+this._e|0}_hash(){const t=e.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t}}const L=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function F(e,t,n){return n^e&(t^n)}function U(e,t,n){return e&t|n&(e|t)}function q(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function B(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function z(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}class V extends k{constructor(){super(64,56),this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this._w=new Array(64)}_update(e){const t=this._w;let n,r=0|this._a,i=0|this._b,o=0|this._c,s=0|this._d,a=0|this._e,c=0|this._f,u=0|this._g,l=0|this._h;for(n=0;n<16;++n)t[n]=e.readInt32BE(4*n);for(;n<64;++n)t[n]=0|(((d=t[n-2])>>>17|d<<15)^(d>>>19|d<<13)^d>>>10)+t[n-7]+z(t[n-15])+t[n-16];var d;for(let e=0;e<64;++e){const n=l+B(a)+F(a,c,u)+L[e]+t[e]|0,d=q(r)+U(r,i,o)|0;l=u,u=c,c=a,a=s+n|0,s=o,o=i,i=r,r=n+d|0}this._a=r+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=s+this._d|0,this._e=a+this._e|0,this._f=c+this._f|0,this._g=u+this._g|0,this._h=l+this._h|0}_hash(){const t=e.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t}}const W=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function G(e,t,n){return n^e&(t^n)}function $(e,t,n){return e&t|n&(e|t)}function H(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function Q(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function K(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function Y(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function J(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function X(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function Z(e,t){return e>>>0<t>>>0?1:0}class ee extends k{constructor(){super(128,112),this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this._w=new Array(160)}_update(e){const t=this._w;let n,r,i=0|this._ah,o=0|this._bh,s=0|this._ch,a=0|this._dh,c=0|this._eh,u=0|this._fh,l=0|this._gh,d=0|this._hh,f=0|this._al,p=0|this._bl,h=0|this._cl,m=0|this._dl,g=0|this._el,b=0|this._fl,y=0|this._gl,v=0|this._hl,w=0;for(w=0;w<32;w+=2)t[w]=e.readInt32BE(4*w),t[w+1]=e.readInt32BE(4*w+4);for(;w<160;w+=2){let e=t[w-30],i=t[w-30+1];const o=K(e,i),s=Y(i,e),a=J(e=t[w-4],i=t[w-4+1]),c=X(i,e),u=t[w-14],l=t[w-14+1],d=t[w-32],f=t[w-32+1];n=(n=(n=o+u+Z(r=s+l|0,s)|0)+a+Z(r=r+c|0,c)|0)+d+Z(r=r+f|0,f)|0,t[w]=n,t[w+1]=r}for(let e=0;e<160;e+=2){n=t[e],r=t[e+1];const w=$(i,o,s),S=$(f,p,h),x=H(i,f),_=H(f,i),C=Q(c,g),T=Q(g,c),k=W[e],E=W[e+1],R=G(c,u,l),P=G(g,b,y);let A=v+T|0,j=d+C+Z(A,v)|0;j=(j=(j=j+R+Z(A=A+P|0,P)|0)+k+Z(A=A+E|0,E)|0)+n+Z(A=A+r|0,r)|0;const I=_+S|0,O=x+w+Z(I,_)|0;d=l,v=y,l=u,y=b,u=c,b=g,c=a+j+Z(g=m+A|0,m)|0,a=s,m=h,s=o,h=p,o=i,p=f,i=j+O+Z(f=A+I|0,A)|0}this._al=this._al+f|0,this._bl=this._bl+p|0,this._cl=this._cl+h|0,this._dl=this._dl+m|0,this._el=this._el+g|0,this._fl=this._fl+b|0,this._gl=this._gl+y|0,this._hl=this._hl+v|0,this._ah=this._ah+i+Z(this._al,f)|0,this._bh=this._bh+o+Z(this._bl,p)|0,this._ch=this._ch+s+Z(this._cl,h)|0,this._dh=this._dh+a+Z(this._dl,m)|0,this._eh=this._eh+c+Z(this._el,g)|0,this._fh=this._fh+u+Z(this._fl,b)|0,this._gh=this._gh+l+Z(this._gl,y)|0,this._hh=this._hh+d+Z(this._hl,v)|0}_hash(){const t=e.allocUnsafe(64);function n(e,n,r){t.writeInt32BE(e,r),t.writeInt32BE(n,r+4)}return n(this._ah,this._al,0),n(this._bh,this._bl,8),n(this._ch,this._cl,16),n(this._dh,this._dl,24),n(this._eh,this._el,32),n(this._fh,this._fl,40),n(this._gh,this._gl,48),n(this._hh,this._hl,56),t}}let te;"undefined"!=typeof window?te=window:void 0!==r&&(te=r);const ne=e.alloc(128);class re extends s.Transform{constructor(t,n){super(),"string"==typeof n&&(n=e.from(n));const r="sha512"===t?128:64;this._alg=t,n.length>r?n=se(t).update(n).digest():n.length<r&&(n=e.concat([n,ne],r)),this._ipad=e.alloc(r),this._opad=e.alloc(r);for(let e=0;e<r;e++)this._ipad[e]=54^n[e],this._opad[e]=92^n[e];this._hash=se(t).update(this._ipad)}_transform(e,t,n){let r;try{this.update(e,t)}catch(e){r=e}finally{n(r)}}_flush(e){let t;try{this.push(this._final())}catch(e){t=e}e(t)}_final(){const e=this._hash.digest();return se(this._alg).update(this._opad).update(e).digest()}update(e,t){return this._hash.update(e,t),this}digest(t){const n=this._final()||e.alloc(0);return t?n.toString(t):n}}const ie=new Map([["md5",class extends k{constructor(){super(64,56,"le"),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._m=new Array(16)}_update(e){const t=this._m;for(let n=0;n<16;++n)t[n]=e.readInt32LE(4*n);let n=this._a,r=this._b,i=this._c,o=this._d;n=R(n,r,i,o,t[0],3614090360,7),o=R(o,n,r,i,t[1],3905402710,12),i=R(i,o,n,r,t[2],606105819,17),r=R(r,i,o,n,t[3],3250441966,22),n=R(n,r,i,o,t[4],4118548399,7),o=R(o,n,r,i,t[5],1200080426,12),i=R(i,o,n,r,t[6],2821735955,17),r=R(r,i,o,n,t[7],4249261313,22),n=R(n,r,i,o,t[8],1770035416,7),o=R(o,n,r,i,t[9],2336552879,12),i=R(i,o,n,r,t[10],4294925233,17),r=R(r,i,o,n,t[11],2304563134,22),n=R(n,r,i,o,t[12],1804603682,7),o=R(o,n,r,i,t[13],4254626195,12),i=R(i,o,n,r,t[14],2792965006,17),n=P(n,r=R(r,i,o,n,t[15],1236535329,22),i,o,t[1],4129170786,5),o=P(o,n,r,i,t[6],3225465664,9),i=P(i,o,n,r,t[11],643717713,14),r=P(r,i,o,n,t[0],3921069994,20),n=P(n,r,i,o,t[5],3593408605,5),o=P(o,n,r,i,t[10],38016083,9),i=P(i,o,n,r,t[15],3634488961,14),r=P(r,i,o,n,t[4],3889429448,20),n=P(n,r,i,o,t[9],568446438,5),o=P(o,n,r,i,t[14],3275163606,9),i=P(i,o,n,r,t[3],4107603335,14),r=P(r,i,o,n,t[8],1163531501,20),n=P(n,r,i,o,t[13],2850285829,5),o=P(o,n,r,i,t[2],4243563512,9),i=P(i,o,n,r,t[7],1735328473,14),n=A(n,r=P(r,i,o,n,t[12],2368359562,20),i,o,t[5],4294588738,4),o=A(o,n,r,i,t[8],2272392833,11),i=A(i,o,n,r,t[11],1839030562,16),r=A(r,i,o,n,t[14],4259657740,23),n=A(n,r,i,o,t[1],2763975236,4),o=A(o,n,r,i,t[4],1272893353,11),i=A(i,o,n,r,t[7],4139469664,16),r=A(r,i,o,n,t[10],3200236656,23),n=A(n,r,i,o,t[13],681279174,4),o=A(o,n,r,i,t[0],3936430074,11),i=A(i,o,n,r,t[3],3572445317,16),r=A(r,i,o,n,t[6],76029189,23),n=A(n,r,i,o,t[9],3654602809,4),o=A(o,n,r,i,t[12],3873151461,11),i=A(i,o,n,r,t[15],530742520,16),n=j(n,r=A(r,i,o,n,t[2],3299628645,23),i,o,t[0],4096336452,6),o=j(o,n,r,i,t[7],1126891415,10),i=j(i,o,n,r,t[14],2878612391,15),r=j(r,i,o,n,t[5],4237533241,21),n=j(n,r,i,o,t[12],1700485571,6),o=j(o,n,r,i,t[3],2399980690,10),i=j(i,o,n,r,t[10],4293915773,15),r=j(r,i,o,n,t[1],2240044497,21),n=j(n,r,i,o,t[8],1873313359,6),o=j(o,n,r,i,t[15],4264355552,10),i=j(i,o,n,r,t[6],2734768916,15),r=j(r,i,o,n,t[13],1309151649,21),n=j(n,r,i,o,t[4],4149444226,6),o=j(o,n,r,i,t[11],3174756917,10),i=j(i,o,n,r,t[2],718787259,15),r=j(r,i,o,n,t[9],3951481745,21),this._a=this._a+n|0,this._b=this._b+r|0,this._c=this._c+i|0,this._d=this._d+o|0}_hash(){const t=e.allocUnsafe(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t}}],["sha-1",N],["sha-256",V],["sha-512",ee],["sha1",N],["sha256",V],["sha512",ee]]);function oe(t){const n=new Uint8Array(t);return t>0&&te.crypto.getRandomValues(n),e.from(n.buffer)}function se(e){e=e.toLowerCase();const t=ie.get(e);if(t)return new t;throw new Error("Unsupported hash algorithm: "+e)}function ae(){return oe(16).toString("hex")}class ce{constructor(e){e=e||{},this._genNonce=e.genNonce||ae}response(e){if(this._completed)return;let t=e.serviceType+"/"+e.host;e.serviceName&&e.host!==e.serviceName&&(t+="/"+e.serviceName);const n=e.realm||this._realm||"",r=this._genNonce(),i="00000001";let o="";o+='username="'+e.username+'"',n&&(o+=',realm="'+n+'"'),o+=',nonce="'+this._nonce+'"',o+=',cnonce="'+r+'"',o+=",nc="+i,o+=",qop=auth",o+=',digest-uri="'+t+'"';const s=se("md5").update(e.username).update(":").update(n).update(":").update(e.password).digest();let a=se("md5").update(s).update(":").update(this._nonce).update(":").update(r);e.authzid&&a.update(":").update(e.authzid),a=a.digest("hex");let c=se("md5").update("AUTHENTICATE:").update(t);return c=c.digest("hex"),o+=",response="+se("md5").update(a).update(":").update(this._nonce).update(":").update(i).update(":").update(r).update(":").update("auth").update(":").update(c).digest("hex"),"utf-8"===this._charset&&(o+=",charset=utf-8"),e.authzid&&(o+='authzid="'+e.authzid+'"'),o}challenge(e){const t=function(e){const t={},n=e.split(/,(?=(?:[^"]|"[^"]*")*$)/);for(let e=0,r=n.length;e<r;e++){const r=/(\w+)=["]?([^"]+)["]?$/.exec(n[e]);r&&(t[r[1]]=r[2])}return t}(e);return this._completed=!!t.rspauth,this._realm=t.realm,this._nonce=t.nonce,this._qop=(t.qop||"auth").split(","),this._stale=t.stale,this._maxbuf=parseInt(t.maxbuf,10)||65536,this._charset=t.charset,this._algo=t.algorithm,this._cipher=t.cipher,this._cipher&&this._cipher.split(","),this}}ce.prototype.name="DIGEST-MD5",ce.prototype.clientFirst=!1;const ue={};function le(e){const t=[];let n="";for(let r=0;r<e.length;r++)","===(n=e[r])?t.push("=2C"):"="===n?t.push("=3D"):t.push(n);return t.join("")}function de(e){return oe((e||32)/2).toString("hex")}function fe(t,n){const r=Math.min(t.length,n.length),i=e.alloc(Math.max(t.length,n.length));for(let e=0;e<r;++e)i[e]=t[e]^n[e];return i}function pe(e,t){return function(e,t){return new re(e.toLowerCase(),t)}("sha1",e).update(t).digest()}class he{constructor(e){e=e||{},this._genNonce=e.genNonce||de,this._stage="initial"}response(e){return ue[this._stage](this,e)}challenge(t){const n=function(e){const t={},n=e.split(/,(?=(?:[^"]|"[^"]*")*$)/);for(let e=0,r=n.length;e<r;e++){const r=/(\w+)=["]?([^"]+)["]?$/.exec(n[e]);r&&(t[r[1]]=r[2])}return t}(t);return this._salt=e.from(n.s||"","base64"),this._iterationCount=parseInt(n.i,10),this._nonce=n.r,this._verifier=n.v,this._error=n.e,this._challenge=t,this}}he.prototype.name="SCRAM-SHA-1",he.prototype.clientFirst=!0,ue.initial=function(e,t){e._cnonce=e._genNonce();let n="";t.authzid&&(n="a="+le(t.authzid)),e._gs2Header="n,"+n+",";const r="r="+e._cnonce,i="n="+le(t.username||"");e._clientFirstMessageBare=i+","+r;const o=e._gs2Header+e._clientFirstMessageBare;return e._stage="challenge",o},ue.challenge=function(t,n){const r=e.from(t._gs2Header).toString("base64");let i,o,s;t._clientFinalMessageWithoutProof="c="+r+",r="+t._nonce,n.salt&&0===e.compare(n.salt,t._salt)?n.clientKey&&n.serverKey?(o=n.clientKey,s=n.serverKey):n.saltedPassword&&(o=pe(i=n.saltedPassword,"Client Key"),s=pe(i,"Server Key")):(i=function(t,n,r){let i=pe(t,e.concat([n,e.from([0,0,0,1],"binary")])),o=i;for(let e=0;e<r-1;e++)o=fe(o,i=pe(t,i));return o}(n.password||"",t._salt,t._iterationCount),o=pe(i,"Client Key"),s=pe(i,"Server Key"));const a=(c=o,se("sha1").update(c).digest());var c;const u=t._clientFirstMessageBare+","+t._challenge+","+t._clientFinalMessageWithoutProof,l=fe(o,pe(a,u)).toString("base64");t._serverSignature=pe(s,u);const d=t._clientFinalMessageWithoutProof+",p="+l;return t._stage="final",t.cache={clientKey:o,salt:t._salt,saltedPassword:i,serverKey:s},d},ue.final=function(){return""};class me{response(e){let t="";return t+="\0",t+=e.username,t+="\0",t+=e.token}challenge(){}}me.prototype.name="X-OAUTH2",me.prototype.clientFirst=!0;class ge{constructor(){this._mechs=[]}use(e,t){return t||(e=(t=e).prototype.name),this._mechs.push({name:e,mech:t}),this}create(e){for(let t=0,n=this._mechs.length;t<n;t++)for(let n=0,r=e.length;n<r;n++){const r=this._mechs[t];if(r.name===e[n])return new r.mech}return null}}const be="urn:ietf:params:xml:ns:xmpp-bind",ye="jabber:client",ve="urn:ietf:params:xml:ns:xmpp-sasl",we="jabber:server",Se="urn:ietf:params:xml:ns:xmpp-session",xe="urn:ietf:params:xml:ns:xmpp-stanzas",_e="http://etherx.jabber.org/streams",Ce="urn:ietf:params:xml:ns:xmpp-streams",Te="jabber:iq:roster",ke="urn:xmpp:features:rosterver",Ee="urn:xmpp:features:pre-approval",Re="urn:ietf:params:xml:ns:xmpp-framing",Pe="jabber:x:data",Ae="http://jabber.org/protocol/disco#info",je="http://jabber.org/protocol/disco#items",Ie="http://jabber.org/protocol/address",Oe="http://jabber.org/protocol/muc",Me="http://jabber.org/protocol/muc#admin",De="http://jabber.org/protocol/muc#owner",Ne="http://jabber.org/protocol/muc#user",Le="http://jabber.org/protocol/ibb",Fe="storage:bookmarks",Ue="jabber:iq:private",qe="http://jabber.org/protocol/commands",Be="vcard-temp",ze="http://jabber.org/protocol/rsm",Ve="http://jabber.org/protocol/pubsub",We="http://jabber.org/protocol/pubsub#errors",Ge="http://jabber.org/protocol/pubsub#event",$e="http://jabber.org/protocol/pubsub#owner",He="jabber:iq:oob",Qe="jabber:x:oob",Ke="jabber:iq:register",Ye="http://jabber.org/protocol/geoloc",Je="urn:xmpp:avatar:data",Xe="urn:xmpp:avatar:metadata",Ze="http://jabber.org/protocol/chatstates",et="jabber:iq:version",tt="http://jabber.org/protocol/mood",nt="jabber:component:accept",rt="http://jabber.org/protocol/caps",it="http://jabber.org/protocol/tune",ot="http://jabber.org/protocol/xdata-validate",st="http://jabber.org/protocol/httpbind",at="http://jabber.org/protocol/shim",ct="http://jabber.org/protocol/xdata-layout",ut="urn:xmpp:reach:0",lt="urn:xmpp:alt-connections:websocket",dt="urn:xmpp:alt-connections:xbosh",ft=e=>`${e}+notify`,pt="urn:xmpp:jingle:1",ht="urn:xmpp:jingle:errors:1",mt="urn:xmpp:jingle:apps:rtp:1",gt="urn:xmpp:jingle:apps:rtp:info:1",bt="urn:xmpp:jingle:apps:rtp:audio",yt="urn:xmpp:jingle:apps:rtp:video",vt="http://jabber.org/protocol/nick",wt="urn:xmpp:jingle:transports:ice-udp:1",St="urn:xmpp:receipts",xt="urn:xmpp:invisible:0",_t="urn:xmpp:blocking",Ct="urn:xmpp:sm:3",Tt="urn:xmpp:ping",kt="urn:xmpp:time",Et="urn:xmpp:delay",Rt="urn:xmpp:xbosh",Pt="urn:xmpp:extdisco:1",At="urn:xmpp:media-element",jt="urn:xmpp:attention:0",It="urn:xmpp:bob",Ot="urn:xmpp:jingle:apps:file-transfer:3",Mt="jabber:x:conference",Dt="urn:xmpp:jingle:transports:ibb:1",Nt="urn:xmpp:thumbs:0",Lt="urn:xmpp:carbons:2",Ft="urn:xmpp:jingle:apps:rtp:rtcp-fb:0",Ut="urn:xmpp:jingle:apps:rtp:rtp-hdrext:0",qt="urn:xmpp:forward:0",Bt="urn:xmpp:hashes:1",zt=e=>`urn:xmpp:hash-function-text-names:${e}`,Vt="urn:xmpp:rtt:0",Wt="http://jabber.org/protocol/muc#unique",Gt="urn:xmpp:message-correct:0",$t="urn:xmpp:psa",Ht="urn:xmpp:mam:2",Qt="urn:xmpp:hats:0",Kt="urn:xmpp:idle:1",Yt="urn:xmpp:jingle:apps:dtls:0",Jt="urn:xmpp:jidprep:0",Xt="urn:xmpp:chat-markers:0",Zt="urn:xmpp:hints",en="urn:xmpp:json:0",tn="urn:xmpp:eventlog",nn="urn:xmpp:jingle:apps:grouping:0",rn="urn:xmpp:jingle:apps:rtp:ssma:0",on="urn:xmpp:jingle:transports:dtls-sctp:1",sn="urn:xmpp:csi:0",an="urn:xmpp:push:0",cn="urn:xmpp:http:upload:0",un="urn:xmpp:reference:0",ln="urn:xmpp:eme:0",dn="eu.siacs.conversations.axolotl",fn="http://docs.oasis-open.org/ns/xri/xrd-1.0";function pn(e){const t=e.utils,n=e.define({element:"address",fields:{delivered:t.boolAttribute("delivered"),description:t.attribute("desc"),jid:t.jidAttribute("jid"),node:t.attribute("node"),type:t.attribute("type"),uri:t.attribute("uri")},name:"_address",namespace:Ie}),r=t.subMultiExtension(Ie,"addresses",n);e.withMessage(function(t){e.add(t,"addresses",r)}),e.withPresence(function(t){e.add(t,"addresses",r)})}function hn(e){const t=e.utils,n=e.define({element:"info",fields:{bytes:t.attribute("bytes"),height:t.attribute("height"),id:t.attribute("id"),type:t.attribute("type","image/png"),url:t.attribute("url"),width:t.attribute("width")},name:"avatar",namespace:Xe}),r={get:function(){const e=t.find(this.xml,Xe,"metadata"),r=[];if(e.length){const i=t.find(e[0],Xe,"info");for(const e of i)r.push(new n({},e))}return r},set:function(e){const r=t.findOrCreate(this.xml,Xe,"metadata");t.setAttribute(r,"xmlns",Xe);for(const t of e){const e=new n(t);r.appendChild(e.xml)}}};e.withPubsubItem(function(n){e.add(n,"avatars",r),e.add(n,"avatarData",t.textSub(Je,"data"))})}function mn(e){const t=e.utils,n=e.define({element:"bind",fields:{jid:t.jidSub(be,"jid"),resource:t.textSub(be,"resource")},name:"bind",namespace:be});e.extendIQ(n),e.extendStreamFeatures(n)}function gn(e){const t=e.utils,n={get:function(){const e=[],n=t.find(this.xml,_t,"item");if(!n.length)return e;for(const r of n)e.push(new S(t.getAttribute(r,"jid","")));return e},set:function(e){const n=this;for(const r of e){const e=t.createElement(_t,"item",_t);t.setAttribute(e,"jid",r.toString()),n.xml.appendChild(e)}}},r=e.define({element:"block",fields:{jids:n},name:"block",namespace:_t}),i=e.define({element:"unblock",fields:{jids:n},name:"unblock",namespace:_t}),o=e.define({element:"blocklist",fields:{jids:n},name:"blockList",namespace:_t});e.extendIQ(r),e.extendIQ(i),e.extendIQ(o)}function bn(e){const t=e.utils,n=e.define({element:"data",fields:{cid:t.attribute("cid"),data:t.text(),maxAge:t.numberAttribute("max-age"),type:t.attribute("type")},name:"bob",namespace:It});e.extendIQ(n),e.extendMessage(n),e.extendPresence(n)}function yn(e){const t=e.utils,n=e.define({element:"conference",fields:{autoJoin:t.boolAttribute("autojoin"),jid:t.jidAttribute("jid"),name:t.attribute("name"),nick:t.textSub(Fe,"nick")},name:"_conference",namespace:Fe}),r=e.define({element:"storage",name:"bookmarks",namespace:Fe});e.extend(r,n,"conferences"),e.withDefinition("query",Ue,function(t){e.extend(t,r)})}function vn(e){const t=e.utils;e.define({element:"body",fields:{accept:t.attribute("accept"),ack:t.numberAttribute("ack"),authid:t.attribute("authid"),charsets:t.attribute("charsets"),condition:t.attribute("condition"),content:t.attribute("content"),from:t.jidAttribute("from",!0),hold:t.numberAttribute("hold"),inactivity:t.numberAttribute("inactivity"),key:t.attribute("key"),lang:t.langAttribute(),maxpause:t.numberAttribute("maxpause"),newKey:t.attribute("newkey"),pause:t.numberAttribute("pause"),payload:{get:function(){const t=[];for(let n=0,r=this.xml.childNodes.length;n<r;n++){const r=e.build(this.xml.childNodes[n]);void 0!==r&&t.push(r)}return t},set:function(e){for(const t of e)this.xml.appendChild(t.xml)}},polling:t.numberAttribute("polling"),requests:t.numberAttribute("requests"),resport:t.numberAttribute("report"),restart:t.attribute("xmpp:restart"),restartLogic:t.boolAttribute("xmpp:restartLogic"),rid:t.numberAttribute("rid"),sid:t.attribute("sid"),stream:t.attribute("stream"),time:t.attribute("time"),to:t.jidAttribute("to",!0),type:t.attribute("type"),uri:t.textSub(st,"uri"),ver:t.attribute("ver"),version:t.attribute("xmpp:version","1.0"),wait:t.numberAttribute("wait")},name:"bosh",namespace:st,prefixes:{xmpp:Rt}})}function wn(e){const t=e.define({element:"sent",eventName:"carbon:sent",name:"carbonSent",namespace:Lt}),n=e.define({element:"received",eventName:"carbon:received",name:"carbonReceived",namespace:Lt}),r=e.define({element:"private",eventName:"carbon:private",name:"carbonPrivate",namespace:Lt}),i=e.define({element:"enable",name:"enableCarbons",namespace:Lt}),o=e.define({element:"disable",name:"disableCarbons",namespace:Lt});e.withDefinition("forwarded",qt,function(r){e.extend(t,r),e.extend(n,r)}),e.extendMessage(t),e.extendMessage(n),e.extendMessage(r),e.extendIQ(i),e.extendIQ(o)}const Sn=["next","prev","complete","cancel"],xn=["bad-action","bad-locale","bad-payload","bad-sessionid","malformed-action","session-expired"];function _n(e){const t=e.utils,n=e.define({element:"command",fields:{action:t.attribute("action"),actions:{get:function(){const e=[],n=t.find(this.xml,qe,"actions");if(!n.length)return[];for(const r of Sn){t.find(n[0],qe,r).length&&e.push(r)}return e},set:function(e){const n=t.findOrCreate(this.xml,qe,"actions");for(let e=0,t=n.childNodes.length;e<t;e++)n.removeChild(n.childNodes[e]);for(const r of e)n.appendChild(t.createElement(qe,r.toLowerCase(),qe))}},execute:t.subAttribute(qe,"actions","execute"),node:t.attribute("node"),sessionid:t.attribute("sessionid"),status:t.attribute("status")},name:"command",namespace:qe}),r=e.define({element:"note",fields:{type:t.attribute("type"),value:t.text()},name:"_commandNote",namespace:qe});e.extend(n,r,"notes"),e.extendIQ(n),e.withStanzaError(function(n){e.add(n,"adhocCommandCondition",t.enumSub(qe,xn))}),e.withDataForm(function(t){e.extend(n,t)})}function Cn(e){const t=e.define({element:"csi",name:"clientStateIndication",namespace:sn});e.define({element:"active",eventName:"csi:active",name:"csiActive",namespace:sn,topLevel:!0}),e.define({element:"inactive",eventName:"csi:inactive",name:"csiInactive",namespace:sn,topLevel:!0}),e.extendStreamFeatures(t)}const Tn=["text-single","text-private","list-single","jid-single"];function kn(e){const t=e.utils,n=e.define({element:"field",fields:{desc:t.textSub(Pe,"desc"),label:t.attribute("label"),name:t.attribute("var"),required:t.boolSub(Pe,"required"),type:{get:function(){return t.getAttribute(this.xml,"type","text-single")},set:function(e){this._type=e,t.setAttribute(this.xml,"type",e)}},value:{get:function(){const e=t.getMultiSubText(this.xml,Pe,"value");return"boolean"===this._type?"1"===e[0]||"true"===e[0]:e.length>1?"text-multi"===this._type?e.join("\n"):"jid-multi"===this._type?e.map(function(e){return new S(e)}):e:Tn.indexOf(this._type)>=0?"jid-single"===this._type?new S(e[0]):e[0]:e},set:function(e){if("boolean"===this._type||!0===e||!1===e){const n=!0===e||"true"===e||"1"===e,r=t.createElement(Pe,"value",Pe);r.textContent=n?"1":"0",this.xml.appendChild(r)}else"text-multi"===this._type&&"string"==typeof e&&(e=e.split("\n")),t.setMultiSubText(this.xml,Pe,"value",e,function(e){const n=t.createElement(Pe,"value",Pe);n.textContent=e,this.xml.appendChild(n)}.bind(this))}}},init:function(e){this._type=(e||{}).type||this.type},name:"_field",namespace:Pe}),r=e.define({element:"option",fields:{label:t.attribute("label"),value:t.textSub(Pe,"value")},name:"_formoption",namespace:Pe}),i=e.define({element:"item",name:"_formitem",namespace:Pe}),o=e.define({element:"media",fields:{height:t.numberAttribute("height"),width:t.numberAttribute("width")},name:"media",namespace:At}),s=e.define({element:"uri",fields:{type:t.attribute("type"),uri:t.text()},name:"_mediaURI",namespace:At}),a=e.define({element:"validate",fields:{basic:t.boolSub(ot,"basic"),dataType:t.attribute("datatype"),open:t.boolSub(ot,"open"),regex:t.textSub(ot,"regex")},name:"validation",namespace:ot}),c=e.define({element:"range",fields:{max:t.attribute("max"),min:t.attribute("min")},name:"range",namespace:ot}),u=e.define({element:"list-range",fields:{max:t.numberAttribute("max"),min:t.numberAttribute("min")},name:"select",namespace:ot}),l={get:function(){const e=[];for(let t=0,n=this.xml.childNodes.length;t<n;t++){const n=this.xml.childNodes[t];if(n.namespaceURI===ct)switch(n.localName){case"text":e.push({text:n.textContent});break;case"fieldref":e.push({field:n.getAttribute("var")});break;case"reportedref":e.push({reported:!0});break;case"section":e.push({section:new d(null,n,this).toJSON()})}}return e},set:function(e){for(let n=0,r=e.length;n<r;n++){const r=e[n];if(r.text){const e=t.createElement(ct,"text",ct);e.textContent=r.text,this.xml.appendChild(e)}if(r.field){const e=t.createElement(ct,"fieldref",ct);e.setAttribute("var",r.field),this.xml.appendChild(e)}if(r.reported&&this.xml.appendChild(t.createElement(ct,"reportedref",ct)),r.section){const e=t.createElement(ct,"section",ct);this.xml.appendChild(e);const n=new d(null,e);n.label=r.section.label,n.contents=r.section.contents}}}},d=e.define({element:"section",fields:{contents:l,label:t.attribute("label")},name:"_section",namespace:ct}),f=e.define({element:"page",fields:{contents:l,label:t.attribute("label")},name:"_page",namespace:ct}),p=e.define({element:"x",fields:{instructions:t.multiTextSub(Pe,"instructions"),reportedFields:t.subMultiExtension(Pe,"reported",n),title:t.textSub(Pe,"title"),type:t.attribute("type","form")},init:function(){if(!this.reportedFields.length)return;const e={};for(const t of this.reportedFields)e[t.name]=t.type;for(const t of this.items)for(const n of t.fields)n.type=n._type=e[n.name]},name:"form",namespace:Pe});e.extend(p,n,"fields"),e.extend(p,i,"items"),e.extend(p,f,"layout"),e.extend(n,o),e.extend(n,a),e.extend(n,r,"options"),e.extend(i,n,"fields"),e.extend(o,s,"uris"),e.extend(a,c),e.extend(a,u),e.extendMessage(p)}function En(e){const t=e.utils,n=e.define({element:"delay",fields:{from:t.jidAttribute("from"),reason:t.text(),stamp:t.dateAttribute("stamp")},name:"delay",namespace:Et});e.extendMessage(n),e.extendPresence(n)}function Rn(e){const t=e.utils,n=e.define({element:"c",fields:{ext:t.attribute("ext"),hash:t.attribute("hash"),node:t.attribute("node"),ver:t.attribute("ver")},name:"caps",namespace:rt}),r=e.define({element:"query",fields:{features:t.multiSubAttribute(Ae,"feature","var"),node:t.attribute("node")},name:"discoInfo",namespace:Ae}),i=e.define({element:"identity",fields:{category:t.attribute("category"),lang:t.langAttribute(),name:t.attribute("name"),type:t.attribute("type")},name:"_discoIdentity",namespace:Ae}),o=e.define({element:"query",fields:{node:t.attribute("node")},name:"discoItems",namespace:je}),s=e.define({element:"item",fields:{jid:t.jidAttribute("jid"),name:t.attribute("name"),node:t.attribute("node")},name:"_discoItem",namespace:je});e.extend(o,s,"items"),e.extend(r,i,"identities"),e.extendIQ(r),e.extendIQ(o),e.extendPresence(n),e.extendStreamFeatures(n),e.withDataForm(function(t){e.extend(r,t,"extensions")}),e.withDefinition("set",ze,function(t){e.extend(o,t)})}const Pn=["bad-request","conflict","feature-not-implemented","forbidden","gone","internal-server-error","item-not-found","jid-malformed","not-acceptable","not-allowed","not-authorized","payment-required","recipient-unavailable","redirect","registration-required","remote-server-not-found","remote-server-timeout","resource-constraint","service-unavailable","subscription-required","undefined-condition","unexpected-request"];function An(e){const t=e.utils,n=e.define({element:"error",fields:{$text:{get:function(){return t.getSubLangText(this.xml,xe,"text",this.lang)}},by:t.jidAttribute("by"),code:t.attribute("code"),condition:t.enumSub(xe,Pn),gone:{get:function(){return t.getSubText(this.xml,xe,"gone")},set:function(e){this.condition="gone",t.setSubText(this.xml,xe,"gone",e)}},lang:{get:function(){return(this.parent||{}).lang||""}},redirect:{get:function(){return t.getSubText(this.xml,xe,"redirect")},set:function(e){this.condition="redirect",t.setSubText(this.xml,xe,"redirect",e)}},text:{get:function(){return this.$text[this.lang]||""},set:function(e){t.setSubLangText(this.xml,xe,"text",e,this.lang)}},type:t.attribute("type")},name:"error",namespace:ye});e.extendMessage(n),e.extendPresence(n),e.extendIQ(n)}function jn(e){const t=e.utils,n=e.define({element:"encryption",fields:{name:t.attribute("name"),namespace:t.attribute("namespace")},name:"encryptionMethod",namespace:ln});e.extendMessage(n)}function In(e){const t=e.utils,n=e.define({element:"services",fields:{type:t.attribute("type")},name:"services",namespace:Pt}),r=e.define({element:"credentials",name:"credentials",namespace:Pt}),i=e.define({element:"service",fields:{host:t.attribute("host"),password:t.attribute("password"),port:t.attribute("port"),transport:t.attribute("transport"),type:t.attribute("type"),username:t.attribute("username")},name:"service",namespace:Pt});e.extend(n,i,"services"),e.extend(r,i),e.extendIQ(n),e.extendIQ(r),e.withDataForm(function(t){e.extend(i,t)})}const On="urn:xmpp:jingle:apps:file-transfer:4";function Mn(e){const t=e.utils,n=e.define({element:"file",fields:{date:t.dateSub(On,"date"),description:t.textSub(On,"desc"),mediaType:t.textSub(On,"media-type"),name:t.textSub(On,"name"),size:t.numberSub(On,"size")},name:"file",namespace:On}),r=e.define({element:"range",fields:{length:t.numberAttribute("length"),offset:t.numberAttribute("offset")},name:"range",namespace:On}),i=e.define({element:"description",fields:{applicationType:{value:On,writable:!0}},name:"_"+On,namespace:On,tags:["jingle-application"]}),o=e.define({element:"received",fields:{creator:t.attribute("creator"),infoType:{value:"{"+On+"}received"},name:t.attribute("name")},name:"_{"+On+"}received",namespace:On,tags:["jingle-info"]}),s=e.define({element:"checksum",fields:{creator:t.attribute("creator"),infoType:{value:"{"+On+"}checksum"},name:t.attribute("name")},name:"_{"+On+"}checksum",namespace:On,tags:["jingle-info"]});e.extend(n,r),e.extend(s,n),e.extend(i,n),e.withDefinition("hash",Bt,function(t){e.extend(n,t,"hashes"),e.extend(r,t,"hashes")}),e.withDefinition("content",pt,function(t){e.extend(t,i)}),e.withDefinition("jingle",pt,function(t){e.extend(t,o),e.extend(t,s)})}const Dn=Ot;function Nn(e){const t=e.utils,n=e.define({element:"file",fields:{date:t.dateSub(Dn,"date"),desc:t.textSub(Dn,"desc"),name:t.textSub(Dn,"name"),size:t.numberSub(Dn,"size")},name:"_file",namespace:Dn}),r=e.define({element:"range",fields:{offset:t.numberAttribute("offset")},name:"range",namespace:Dn}),i=e.define({element:"thumbnail",fields:{cid:t.attribute("cid"),height:t.numberAttribute("height"),mimeType:t.attribute("mime-type"),width:t.numberAttribute("width")},name:"thumbnail",namespace:Nt}),o=e.define({element:"description",fields:{applicationType:{value:"filetransfer",writable:!0},offer:t.subExtension("offer",Dn,"offer",n),request:t.subExtension("request",Dn,"request",n)},name:"_filetransfer",namespace:Dn,tags:["jingle-application"]});e.extend(n,r),e.extend(n,i),e.withDefinition("hash",Bt,function(t){e.extend(n,t,"hashes")}),e.withDefinition("content",pt,function(t){e.extend(t,o)})}function Ln(e){const t=e.define({element:"forwarded",name:"forwarded",namespace:qt});e.withMessage(function(n){e.extend(n,t),e.extend(t,n)}),e.withPresence(function(n){e.extend(n,t),e.extend(t,n)}),e.withIQ(function(n){e.extend(n,t),e.extend(t,n)}),e.withDefinition("delay",Et,function(n){e.extend(t,n)})}function Fn(e){const t=e.utils;e.define({element:"open",fields:{from:t.jidAttribute("from",!0),id:t.attribute("id"),lang:t.langAttribute(),to:t.jidAttribute("to",!0),version:t.attribute("version","1.0")},name:"openStream",namespace:Re,topLevel:!0}),e.define({element:"close",fields:{seeOtherURI:t.attribute("see-other-uri")},name:"closeStream",namespace:Re,topLevel:!0})}function Un(e){const t=e.utils,n=e.define({element:"geoloc",fields:{accuracy:t.numberSub(Ye,"accuracy",!0),altitude:t.numberSub(Ye,"alt",!0),area:t.textSub(Ye,"area"),bearing:t.numberSub(Ye,"bearing",!0),building:t.textSub(Ye,"building"),country:t.textSub(Ye,"country"),countrycode:t.textSub(Ye,"countrycode"),datum:t.textSub(Ye,"datum"),description:t.textSub(Ye,"description"),error:t.numberSub(Ye,"error",!0),floor:t.textSub(Ye,"floor"),heading:t.numberSub(Ye,"bearing",!0),latitude:t.numberSub(Ye,"lat",!0),locality:t.textSub(Ye,"locality"),longitude:t.numberSub(Ye,"lon",!0),postalcode:t.textSub(Ye,"postalcode"),region:t.textSub(Ye,"region"),room:t.textSub(Ye,"room"),speed:t.numberSub(Ye,"speed",!0),street:t.textSub(Ye,"street"),text:t.textSub(Ye,"text"),timestamp:t.dateSub(Ye,"timestamp"),tzo:t.tzoSub(Ye,"tzo"),uri:t.textSub(Ye,"uri")},name:"geoloc",namespace:Ye});e.extendPubsubItem(n)}function qn(e){e.define({element:"hash",fields:{algo:e.utils.attribute("algo"),value:e.utils.text()},name:"hash",namespace:Bt})}function Bn(e){const t=e.define({element:"hat",fields:{displayName:e.utils.attribute("displayName"),lang:e.utils.langAttribute(),name:e.utils.attribute("name")},name:"_hat",namespace:Qt});e.withPresence(function(n){e.add(n,"hats",e.utils.subMultiExtension(Qt,"hats",t))})}const zn={noCopy:"no-copy",noPermanentStore:"no-permanent-store",noStore:"no-store",store:"store"},Vn={"no-copy":"noCopy","no-permanent-store":"noPermanentStore","no-store":"noStore",store:"store"};function Wn(e){const t=e.utils;e.withMessage(function(n){e.add(n,"processingHints",{get:function(){const e={};for(let t=0,n=this.xml.childNodes.length;t<n;t++){const n=this.xml.childNodes[t],r=n.localName;n.namespaceURI===Zt&&(Vn[r]&&(e[Vn[r]]=!0))}return e},set:function(e){for(let e=0,t=this.xml.childNodes.length;e<t;e++){this.xml.childNodes[e].namespaceURI===Zt&&this.xml.removeChild(this.xml.childNodes[e])}for(const n of Object.keys(e)){if(!e[n]||!zn[n])continue;const r=t.createElement(Zt,zn[n]);this.xml.appendChild(r)}}})})}function Gn(e){const t=e.utils,n=e.define({element:"transport",fields:{gatheringComplete:t.boolSub(wt,"gathering-complete"),pwd:t.attribute("pwd"),transportType:{value:"iceUdp",writable:!0},ufrag:t.attribute("ufrag")},name:"_iceUdp",namespace:wt,tags:["jingle-transport"]}),r=e.define({element:"remote-candidate",fields:{component:t.attribute("component"),ip:t.attribute("ip"),port:t.attribute("port")},name:"remoteCandidate",namespace:wt}),i=e.define({element:"candidate",fields:{component:t.attribute("component"),foundation:t.attribute("foundation"),generation:t.attribute("generation"),id:t.attribute("id"),ip:t.attribute("ip"),network:t.attribute("network"),port:t.attribute("port"),priority:t.attribute("priority"),protocol:t.attribute("protocol"),relAddr:t.attribute("rel-addr"),relPort:t.attribute("rel-port"),tcpType:t.attribute("tcptype"),type:t.attribute("type")},name:"_iceUdpCandidate",namespace:wt}),o=e.define({element:"fingerprint",fields:{hash:t.attribute("hash"),required:t.boolAttribute("required"),setup:t.attribute("setup"),value:t.text()},name:"_iceFingerprint",namespace:Yt}),s=e.define({element:"sctpmap",fields:{number:t.attribute("number"),protocol:t.attribute("protocol"),streams:t.attribute("streams")},name:"_sctpMap",namespace:on});e.extend(n,i,"candidates"),e.extend(n,r),e.extend(n,o,"fingerprints"),e.extend(n,s,"sctp"),e.withDefinition("content",pt,function(t){e.extend(t,n)})}function $n(t){const n=t.utils,r={get:function(){let t=n.find(this.xml,Le,"data");if(t.length)return t=t[0],{action:"data",data:e.from(n.getText(t),"base64"),seq:parseInt(n.getAttribute(t,"seq")||"0",10),sid:n.getAttribute(t,"sid")};let r=n.find(this.xml,Le,"open");if(r.length){r=r[0];let e=n.getAttribute(r,"stanza");return{ack:e="message"!==e,action:"open",blockSize:n.getAttribute(r,"block-size"),sid:n.getAttribute(r,"sid")}}const i=n.find(this.xml,Le,"close");return i.length?{action:"close",sid:n.getAttribute(i[0],"sid")}:void 0},set:function(e){if("data"===e.action){const t=n.createElement(Le,"data");n.setAttribute(t,"sid",e.sid),n.setAttribute(t,"seq",e.seq.toString()),n.setText(t,e.data.toString("base64")),this.xml.appendChild(t)}if("open"===e.action){const t=n.createElement(Le,"open");n.setAttribute(t,"sid",e.sid),n.setAttribute(t,"block-size",(e.blockSize||"4096").toString()),!1===e.ack?n.setAttribute(t,"stanza","message"):n.setAttribute(t,"stanza","iq"),this.xml.appendChild(t)}if("close"===e.action){const t=n.createElement(Le,"close");n.setAttribute(t,"sid",e.sid),this.xml.appendChild(t)}}},i=t.define({element:"transport",fields:{ack:{get:function(){return"message"!==n.getAttribute(this.xml,"stanza")},set:function(e){!1===e.ack?n.setAttribute(this.xml,"stanza","message"):n.setAttribute(this.xml,"stanza","iq")}},blockSize:n.numberAttribute("block-size"),sid:n.attribute("sid"),transportType:{value:Dt,writable:!0}},name:"_"+Dt,namespace:Dt,tags:["jingle-transport"]});t.withDefinition("content",pt,function(e){t.extend(e,i)}),t.withIQ(function(e){t.add(e,"ibb",r)}),t.withMessage(function(e){t.add(e,"ibb",r)})}const Hn={};function Qn(e){Hn.defineIQ(e,"iq",ye),Hn.defineIQ(e,"serverIQ",we),Hn.defineIQ(e,"componentIQ",nt)}function Kn(e){e.withIQ(function(t){e.add(t,"jidPrep",{get:function(){const t=e.utils.getSubText(this.xml,Jt,"jid");if(t){const e=new S(t);return e.prepped=!0,e}},set:function(t){e.utils.setSubText(this.xml,Jt,"jid",(t||"").toString())}})})}Hn.defineIQ=function(e,t,n){const r=e.utils,i=e.define({element:"iq",fields:{from:r.jidAttribute("from",!0),id:r.attribute("id"),lang:r.langAttribute(),to:r.jidAttribute("to",!0),type:r.attribute("type")},name:t,namespace:n,topLevel:!0}),o=i.prototype.toJSON;Object.assign(i.prototype,{toJSON(){const e=o.call(this);return e.resultReply=this.resultReply,e.errorReply=this.errorReply,e},resultReply(e){return(e=e||{}).to=this.from,e.id=this.id,e.type="result",new i(e)},errorReply(e){return(e=e||{}).to=this.from,e.id=this.id,e.type="error",new i(e)}})};const Yn=["out-of-order","tie-break","unknown-session","unsupported-info"],Jn=["alternative-session","busy","cancel","connectivity-error","decline","expired","failed-application","failed-transport","general-error","gone","incompatible-parameters","media-error","security-error","success","timeout","unsupported-applications","unsupported-transports"];function Xn(e){const t=e.utils,n=e.define({element:"jingle",fields:{action:t.attribute("action"),info:{get:function(){const n=e.tagged("jingle-info").map(function(e){return e.prototype._name});for(let e=0,t=n.length;e<t;e++)if(this._extensions[n[e]])return this._extensions[n[e]];if("session-info"===t.getAttribute(this.xml,"action"))return 0===this.xml.children.length?{infoType:"ping"}:{infoType:"unknown"}},set:function(e){if("ping"===e.infoType)return;this["_"+e.infoType]=e}},initiator:t.attribute("initiator"),responder:t.attribute("responder"),sid:t.attribute("sid")},name:"jingle",namespace:pt}),r=e.define({element:"content",fields:{application:{get:function(){const t=e.tagged("jingle-application").map(function(e){return e.prototype._name});for(let e=0,n=t.length;e<n;e++)if(this._extensions[t[e]])return this._extensions[t[e]]},set:function(e){this["_"+e.applicationType]=e}},creator:t.attribute("creator"),disposition:t.attribute("disposition","session"),name:t.attribute("name"),security:{get:function(){const t=e.tagged("jingle-security").map(function(e){return e.prototype._name});for(let e=0,n=t.length;e<n;e++)if(this._extensions[t[e]])return this._extensions[t[e]]},set:function(e){this["_"+e.securityType]=e}},senders:t.attribute("senders","both"),transport:{get:function(){const t=e.tagged("jingle-transport").map(function(e){return e.prototype._name});for(let e=0,n=t.length;e<n;e++)if(this._extensions[t[e]])return this._extensions[t[e]]},set:function(e){this["_"+e.transportType]=e}}},name:"_jingleContent",namespace:pt}),i=e.define({element:"reason",fields:{alternativeSession:{get:function(){return t.getSubText(this.xml,pt,"alternative-session")},set:function(e){this.condition="alternative-session",t.setSubText(this.xml,pt,"alternative-session",e)}},condition:t.enumSub(pt,Jn),text:t.textSub(pt,"text")},name:"reason",namespace:pt});e.extend(n,r,"contents"),e.extend(n,i),e.extendIQ(n),e.withStanzaError(function(n){e.add(n,"jingleCondition",t.enumSub(ht,Yn))})}function Zn(e){const t={get:function(){const t=e.utils.getSubText(this.xml,en,"json");if(t)return JSON.parse(t)},set:function(t){(t=JSON.stringify(t))&&e.utils.setSubText(this.xml,en,"json",t)}};e.withMessage(function(n){e.add(n,"json",t)}),e.withPubsubItem(function(n){e.add(n,"json",t)})}function er(e){const t=e.utils,n=e.define({element:"log",fields:{facility:t.attribute("facility"),id:t.attribute("id"),level:t.attribute("level"),message:t.textSub(tn,"message"),module:t.attribute("module"),object:t.attribute("object"),stackTrace:t.textSub(tn,"stackTrace"),subject:t.attribute("subject"),timestamp:t.dateAttribute("timestamp"),type:t.attribute("type")},name:"log",namespace:tn}),r=e.define({element:"tag",fields:{name:t.attribute("name"),type:t.attribute("type"),value:t.attribute("value")},name:"_logtag",namespace:tn});e.extend(n,r,"tags"),e.extendMessage(n),e.extendPubsubItem(n)}function tr(e){const t=e.utils,n=e.define({element:"query",fields:{node:t.attribute("node"),queryid:t.attribute("queryid")},name:"mam",namespace:Ht}),r=e.define({element:"result",fields:{id:t.attribute("id"),queryid:t.attribute("queryid")},name:"mamItem",namespace:Ht}),i=e.define({element:"fin",fields:{complete:t.boolAttribute("complete"),stable:t.boolAttribute("stable")},name:"mamResult",namespace:Ht}),o=e.define({element:"prefs",fields:{always:{get:function(){const e=[];let n=t.find(this.xml,Ht,"always");if(0===n.length)return e;n=n[0];const r=t.getMultiSubText(n,Ht,"jid");for(const t of r)e.push(new S(t.textContent));return e},set:function(e){if(e.length>0){const n=t.findOrCreate(this.xml,Ht,"always");t.setMultiSubText(n,Ht,"jid",e)}}},defaultCondition:t.attribute("default"),never:{get:function(){const e=[];let n=t.find(this.xml,Ht,"always");if(0===n.length)return e;n=n[0];const r=t.getMultiSubText(n,Ht,"jid");for(const t of r)e.push(new S(t.textContent));return e},set:function(e){if(e.length>0){const n=t.findOrCreate(this.xml,Ht,"never");t.setMultiSubText(n,Ht,"jid",e)}}}},name:"mamPrefs",namespace:Ht});e.extendMessage(r),e.extendIQ(n),e.extendIQ(o),e.extendIQ(i),e.withDataForm(function(t){e.extend(n,t)}),e.withDefinition("forwarded",qt,function(t){e.extend(r,t)}),e.withDefinition("set",ze,function(t){e.extend(n,t),e.extend(i,t)})}function nr(e){e.withMessage(function(t){e.add(t,"markable",e.utils.boolSub(Xt,"markable")),e.add(t,"received",e.utils.subAttribute(Xt,"received","id")),e.add(t,"displayed",e.utils.subAttribute(Xt,"displayed","id")),e.add(t,"acknowledged",e.utils.subAttribute(Xt,"acknowledged","id"))})}const rr={};function ir(e){rr.defineMessage(e,"message",ye),rr.defineMessage(e,"serverMessage",we),rr.defineMessage(e,"componentMessage",nt)}rr.defineMessage=function(e,t,n){const r=e.utils;e.define({element:"message",fields:{$body:{get:function(){return r.getSubLangText(this.xml,n,"body",this.lang)}},attention:r.boolSub(jt,"attention"),body:{get:function(){return this.$body[this.lang]||""},set:function(e){r.setSubLangText(this.xml,n,"body",e,this.lang)}},chatState:r.enumSub(Ze,["active","composing","paused","inactive","gone"]),from:r.jidAttribute("from",!0),id:r.attribute("id"),lang:r.langAttribute(),parentThread:r.subAttribute(n,"thread","parent"),receipt:r.subAttribute(St,"received","id"),replace:r.subAttribute(Gt,"replace","id"),requestReceipt:r.boolSub(St,"request"),subject:r.textSub(n,"subject"),thread:r.textSub(n,"thread"),to:r.jidAttribute("to",!0),type:r.attribute("type","normal")},name:t,namespace:n,topLevel:!0})};const or=["afraid","amazed","amorous","angry","annoyed","anxious","aroused","ashamed","bored","brave","calm","cautious","cold","confident","confused","contemplative","contented","cranky","crazy","creative","curious","dejected","depressed","disappointed","disgusted","dismayed","distracted","embarrassed","envious","excited","flirtatious","frustrated","grateful","grieving","grumpy","guilty","happy","hopeful","hot","humbled","humiliated","hungry","hurt","impressed","in_awe","in_love","indignant","interested","intoxicated","invincible","jealous","lonely","lucky","mean","moody","nervous","neutral","offended","outraged","playful","proud","relaxed","relieved","remorseful","restless","sad","sarcastic","serious","shocked","shy","sick","sleepy","spontaneous","stressed","strong","surprised","thankful","thirsty","tired","undefined","weak","worried"];function sr(e){const t=e.define({element:"mood",fields:{text:e.utils.textSub(tt,"text"),value:e.utils.enumSub(tt,or)},name:"mood",namespace:tt});e.extendMessage(t),e.extendPubsubItem(t)}function ar(e,t){return{get:function(){if(this._extensions[e])return this[e][t]},set:function(n){this[e][t]=n}}}function cr(e){const t=e.utils,n=e.define({element:"item",fields:{affiliation:t.attribute("affiliation"),jid:t.jidAttribute("jid"),nick:t.attribute("nick"),reason:t.textSub(Ne,"reason"),role:t.attribute("role")},name:"_mucUserItem",namespace:Ne}),r=e.define({element:"actor",fields:{jid:t.jidAttribute("jid"),nick:t.attribute("nick")},name:"_mucUserActor",namespace:Ne}),i=e.define({element:"destroy",fields:{jid:t.jidAttribute("jid"),reason:t.textSub(Ne,"reason")},name:"destroyed",namespace:Ne}),o=e.define({element:"invite",fields:{continue:t.boolSub(Ne,"continue"),from:t.jidAttribute("from"),reason:t.textSub(Ne,"reason"),thread:t.subAttribute(Ne,"continue","thread"),to:t.jidAttribute("to")},name:"invite",namespace:Ne}),s=e.define({element:"decline",fields:{from:t.jidAttribute("from"),reason:t.textSub(Ne,"reason"),to:t.jidAttribute("to")},name:"decline",namespace:Ne}),a=e.define({element:"item",fields:{affiliation:t.attribute("affiliation"),jid:t.jidAttribute("jid"),nick:t.attribute("nick"),reason:t.textSub(Me,"reason"),role:t.attribute("role")},name:"_mucAdminItem",namespace:Me}),c=e.define({element:"actor",fields:{jid:t.jidAttribute("jid"),nick:t.attribute("nick")},name:"actor",namespace:Ne}),u=e.define({element:"destroy",fields:{jid:t.jidAttribute("jid"),password:t.textSub(De,"password"),reason:t.textSub(De,"reason")},name:"destroy",namespace:De}),l=e.define({element:"x",fields:{actor:ar("_mucUserItem","_mucUserActor"),affiliation:ar("_mucUserItem","affiliation"),codes:{get:function(){return t.getMultiSubText(this.xml,Ne,"status",function(e){return t.getAttribute(e,"code")})},set:function(e){const n=this;t.setMultiSubText(this.xml,Ne,"status",e,function(e){const r=t.createElement(Ne,"status",Ne);t.setAttribute(r,"code",e),n.xml.appendChild(r)})}},jid:ar("_mucUserItem","jid"),nick:ar("_mucUserItem","nick"),password:t.textSub(Ne,"password"),reason:ar("_mucUserItem","reason"),role:ar("_mucUserItem","role")},name:"muc",namespace:Ne}),d=e.define({element:"query",fields:{actor:ar("_mucAdminItem","_mucAdminActor"),affiliation:ar("_mucAdminItem","affiliation"),jid:ar("_mucAdminItem","jid"),nick:ar("_mucAdminItem","nick"),reason:ar("_mucAdminItem","reason"),role:ar("_mucAdminItem","role")},name:"mucAdmin",namespace:Me}),f=e.define({element:"query",name:"mucOwner",namespace:De}),p=e.define({element:"x",fields:{history:{get:function(){let e=t.find(this.xml,Oe,"history");if(!e.length)return{};(e=e[0]).getAttribute("maxchars"),e.getAttribute("maxstanzas"),e.getAttribute("seconds"),e.getAttribute("since")},set:function(e){const n=t.find(this.xml,Oe,"history");if(n.length)for(let e=0;e<n.length;e++)this.xml.removeChild(n[e]);const r=t.createElement(Oe,"history",Oe);this.xml.appendChild(r),void 0!==e.maxchars&&r.setAttribute("maxchars",""+e.maxchars),void 0!==e.maxstanzas&&r.setAttribute("maxstanzas",""+e.maxstanzas),void 0!==e.seconds&&r.setAttribute("seconds",""+e.seconds),e.since&&r.setAttribute("since",e.since.toISOString())}},password:t.textSub(Oe,"password")},name:"joinMuc",namespace:Oe}),h=e.define({element:"x",fields:{continue:t.boolAttribute("continue"),jid:t.jidAttribute("jid"),password:t.attribute("password"),reason:t.attribute("reason"),thread:t.attribute("thread")},name:"mucInvite",namespace:Mt});e.extend(n,r),e.extend(l,n),e.extend(l,o,"invites"),e.extend(l,s),e.extend(l,i),e.extend(a,c),e.extend(d,a,"items"),e.extend(f,u),e.extendPresence(l),e.extendPresence(p),e.extendMessage(l),e.extendMessage(h),e.withIQ(function(n){e.add(n,"mucUnique",t.textSub(Wt,"unique")),e.extend(n,d),e.extend(n,f)}),e.withDataForm(function(t){e.extend(f,t)})}function ur(e){const t=e.utils.textSub(vt,"nick");e.withPubsubItem(function(n){e.add(n,"nick",t)}),e.withPresence(function(n){e.add(n,"nick",t)}),e.withMessage(function(n){e.add(n,"nick",t)})}function lr(e){const t=e.utils,n=e.define({element:"encrypted",fields:{payload:t.textSub(dn,"payload")},name:"omemo",namespace:dn}),r=e.define({element:"header",fields:{iv:t.textSub(dn,"iv"),sid:t.attribute("sid")},name:"header",namespace:dn}),i=e.define({element:"key",fields:{preKey:t.boolAttribute("prekey"),rid:t.attribute("rid"),value:t.text()},namespace:dn}),o=e.define({element:"list",fields:{devices:t.multiSubAttribute(dn,"device","id")},name:"omemoDeviceList",namespace:dn}),s=e.define({element:"preKeyPublic",fields:{id:t.attribute("preKeyId"),value:t.text()},name:"preKeyPublic",namespace:dn}),a=e.define({element:"signedPreKeyPublic",fields:{id:t.attribute("signedPreKeyId"),value:t.text()},name:"signedPreKeyPublic",namespace:dn}),c=e.define({element:"bundle",fields:{identityKey:t.textSub(dn,"identityKey"),preKeys:t.subMultiExtension(dn,"prekeys",s),signedPreKeySignature:t.textSub(dn,"signedPreKeySignature")},name:"omemoDevice",namespace:dn});e.extend(c,a),e.extend(r,i,"keys",!0),e.extend(n,r),e.withMessage(function(t){e.extend(t,n)}),e.withPubsubItem(function(t){e.extend(t,c),e.extend(t,o)})}function dr(e){const t=e.define({element:"x",fields:{desc:e.utils.textSub(Qe,"desc"),url:e.utils.textSub(Qe,"url")},name:"oob",namespace:Qe}),n=e.define({element:"query",fields:{desc:e.utils.textSub(Qe,"desc"),url:e.utils.textSub(Qe,"url")},name:"oob",namespace:He});e.extendMessage(t,"oobURIs"),e.extendIQ(n)}function fr(e){const t=e.define({element:"ping",name:"ping",namespace:Tt});e.extendIQ(t)}const pr={};function hr(e){pr.definePresence(e,"presence",ye),pr.definePresence(e,"serverPresence",we),pr.definePresence(e,"componentPresence",nt)}function mr(e){const t=e.define({element:"query",name:"privateStorage",namespace:Ue});e.extendIQ(t)}pr.definePresence=function(e,t,n){const r=e.utils;e.define({element:"presence",fields:{$status:{get:function(){return r.getSubLangText(this.xml,n,"status",this.lang)}},avatarId:{get:function(){const e=r.find(this.xml,"vcard-temp:x:update","x");return e.length?r.getSubText(e[0],"vcard-temp:x:update","photo"):""},set:function(e){const t=r.findOrCreate(this.xml,"vcard-temp:x:update","x");if(""===e)r.setBoolSub(t,"vcard-temp:x:update","photo",!0);else{if(!0===e)return;e?r.setSubText(t,"vcard-temp:x:update","photo",e):this.xml.removeChild(t)}}},decloak:r.subAttribute("urn:xmpp:decloaking:0","decloak","reason"),from:r.jidAttribute("from",!0),id:r.attribute("id"),idleSince:r.dateSubAttribute(Kt,"idle","since"),lang:r.langAttribute(),priority:r.numberSub(n,"priority",!1,0),show:r.textSub(n,"show"),status:{get:function(){return this.$status[this.lang]||""},set:function(e){r.setSubLangText(this.xml,n,"status",e,this.lang)}},to:r.jidAttribute("to",!0),type:{get:function(){return r.getAttribute(this.xml,"type","available")},set:function(e){"available"===e&&(e=!1),r.setAttribute(this.xml,"type",e)}}},name:t,namespace:n,topLevel:!0})};const gr=["server-unavailable","connection-paused"];function br(e){const t=e.define({element:"state-annotation",fields:{condition:e.utils.enumSub($t,gr),description:e.utils.textSub($t,"description"),from:e.utils.jidAttribute("from")},name:"state",namespace:$t});e.extendPresence(t)}function yr(e){const t=e.utils,n=e.define({element:"pubsub",fields:{create:{get:function(){const e=t.getSubAttribute(this.xml,Ve,"create","node");return e||t.getBoolSub(this.xml,Ve,"create")},set:function(e){!0!==e&&e?t.setSubAttribute(this.xml,Ve,"create","node",e):t.setBoolSub(this.xml,Ve,"create",e)}},publishOptions:{get:function(){const n=e.getDefinition("x",Pe),r=t.find(this.xml,Ve,"publish-options");if(r.length&&r[0].childNodes.length)return new n({},r[0].childNodes[0])},set:function(n){const r=e.getDefinition("x",Pe),i=t.findOrCreate(this.xml,Ve,"publish-options");if(n){const e=new r(n);i.appendChild(e.xml)}}}},name:"pubsub",namespace:Ve}),r=e.define({element:"configure",name:"config",namespace:Ve}),i=e.define({element:"subscribe",fields:{jid:t.jidAttribute("jid"),node:t.attribute("node")},name:"subscribe",namespace:Ve}),o=e.define({element:"subscription",fields:{configurable:t.boolSub("subscribe-options"),configurationRequired:{get:function(){const e=t.find(this.xml,Ve,"subscribe-options");return!!e.length&&t.getBoolSub(e[0],Ve,"required")}},jid:t.jidAttribute("jid"),node:t.attribute("node"),subid:t.attribute("subid"),type:t.attribute("subscription")},name:"subscription",namespace:Ve}),s=e.define({element:"subscriptions",fields:{jid:t.jidAttribute("jid"),node:t.attribute("node")},name:"subscriptions",namespace:Ve}),a=e.define({element:"affiliation",fields:{node:t.attribute("node"),type:t.attribute("affiliation")},name:"affiliation",namespace:Ve}),c=e.define({element:"affiliations",fields:{node:t.attribute("node")},name:"affiliations",namespace:Ve}),u=e.define({element:"options",fields:{jid:t.jidAttribute("jid"),node:t.attribute("node"),subid:t.attribute("subid")},name:"subscriptionOptions",namespace:Ve}),l=e.define({element:"unsubscribe",fields:{jid:t.jidAttribute("jid"),node:t.attribute("node"),subid:t.attribute("subid")},name:"unsubscribe",namespace:Ve}),d=e.define({element:"publish",fields:{node:t.attribute("node")},name:"publish",namespace:Ve}),f=e.define({element:"retract",fields:{id:t.subAttribute(Ve,"item","id"),node:t.attribute("node"),notify:t.boolAttribute("notify")},name:"retract",namespace:Ve}),p=e.define({element:"items",fields:{max:t.attribute("max_items"),node:t.attribute("node")},name:"retrieve",namespace:Ve}),h=e.define({element:"item",fields:{id:t.attribute("id"),publisher:t.jidAttribute("publisher")},name:"item",namespace:Ve});e.extend(n,r),e.extend(n,i),e.extend(n,l),e.extend(n,d),e.extend(n,f),e.extend(n,p),e.extend(n,o),e.extend(n,u),e.extend(n,s),e.extend(n,c),e.extend(d,h,"items"),e.extend(p,h,"items"),e.extend(s,o,"list"),e.extend(c,a,"list"),e.extendIQ(n),e.withDataForm(function(t){e.extend(u,t),e.extend(h,t),e.extend(r,t)}),e.withDefinition("set",ze,function(t){e.extend(n,t)})}const vr=["closed-node","configuration-required","invalid-jid","invalid-options","invalid-payload","invalid-subid","item-forbidden","item-required","jid-required","max-items-exceeded","max-nodes-exceeded","nodeid-required","not-in-roster-group","not-subscribed","payload-too-big","payload-required","pending-subscription","presence-subscription-required","subid-required","too-many-subscriptions","unsupported","unsupported-access-model"];function wr(e){e.withStanzaError(function(t){e.add(t,"pubsubCondition",e.utils.enumSub(We,vr)),e.add(t,"pubsubUnsupportedFeature",{get:function(){return e.utils.getSubAttribute(this.xml,We,"unsupported","feature")},set:function(t){t&&(this.pubsubCondition="unsupported"),e.utils.setSubAttribute(this.xml,We,"unsupported","feature",t)}})})}function Sr(e){const t=e.utils,n=e.define({element:"event",name:"event",namespace:Ge}),r=e.define({element:"purge",fields:{node:t.attribute("node")},name:"purged",namespace:Ge}),i=e.define({element:"delete",fields:{node:t.attribute("node"),redirect:t.subAttribute(Ge,"redirect","uri")},name:"deleted",namespace:Ge}),o=e.define({element:"subscription",fields:{expiry:{get:function(){const e=t.getAttribute(this.xml,"expiry");return"presence"===e?e:e?new Date(e):void 0},set:function(e){e&&("string"!=typeof e&&(e=e.toISOString()),t.setAttribute(this.xml,"expiry",e))}},jid:t.jidAttribute("jid"),node:t.attribute("node"),subid:t.attribute("subid"),type:t.attribute("subscription")},name:"subscriptionChanged",namespace:Ge}),s=e.define({element:"configuration",fields:{node:t.attribute("node")},name:"configurationChanged",namespace:Ge}),a=e.define({element:"items",fields:{node:t.attribute("node"),retracted:{get:function(){const e=[],n=t.find(this.xml,Ge,"retract");for(const t of n)e.push(t.getAttribute("id"));return e},set:function(e){const n=this;for(const r of e){const e=t.createElement(Ge,"retract",Ge);e.setAttribute("id",r),n.xml.appendChild(e)}}}},name:"updated",namespace:Ge}),c=e.define({element:"item",fields:{id:t.attribute("id"),node:t.attribute("node"),publisher:t.jidAttribute("publisher")},name:"_eventItem",namespace:Ge});e.extend(a,c,"published"),e.extend(n,a),e.extend(n,o),e.extend(n,s),e.extend(n,i),e.extend(n,r),e.extendMessage(n),e.withDataForm(function(t){e.extend(s,t)})}function xr(e){const t=e.utils,n=e.define({element:"pubsub",fields:{del:t.subAttribute($e,"delete","node"),purge:t.subAttribute($e,"purge","node"),redirect:{get:function(){const e=t.find(this.xml,$e,"delete");return e.length?t.getSubAttribute(e[0],$e,"redirect","uri"):""},set:function(e){const n=t.findOrCreate(this.xml,$e,"delete");t.setSubAttribute(n,$e,"redirect","uri",e)}}},name:"pubsubOwner",namespace:$e}),r=e.define({element:"subscription",fields:{configurable:t.boolSub("subscribe-options"),configurationRequired:{get:function(){const e=t.find(this.xml,$e,"subscribe-options");return!!e.length&&t.getBoolSub(e[0],$e,"required")}},jid:t.jidAttribute("jid"),node:t.attribute("node"),subid:t.attribute("subid"),type:t.attribute("subscription")},name:"subscription",namespace:$e}),i=e.define({element:"subscriptions",fields:{node:t.attribute("node")},name:"subscriptions",namespace:$e}),o=e.define({element:"affiliation",fields:{jid:t.jidAttribute("jid"),type:t.attribute("affiliation")},name:"affiliation",namespace:$e}),s=e.define({element:"affiliations",fields:{node:t.attribute("node")},name:"affiliations",namespace:$e}),a=e.define({element:"configure",fields:{node:t.attribute("node")},name:"config",namespace:$e}),c=e.define({element:"default",name:"default",namespace:$e});e.extend(n,a),e.extend(n,i),e.extend(n,s),e.extend(n,c),e.extend(i,r,"list"),e.extend(s,o,"list"),e.extendIQ(n),e.withDataForm(function(t){e.extend(a,t)})}function _r(e){const t=e.utils,n=e.define({element:"enable",fields:{jid:t.jidAttribute("jid"),node:t.attribute("node")},name:"enablePush",namespace:an}),r=e.define({element:"disable",fields:{jid:t.jidAttribute("jid"),node:t.attribute("node")},name:"disablePush",namespace:an}),i=e.define({element:"notification",name:"pushNotification",namespace:an});e.withDataForm(t=>{e.extend(i,t),e.extend(n,t)}),e.extendIQ(n),e.extendIQ(r)}function Cr(e){const t=e.utils,n=e.define({element:"addr",fields:{$desc:{get:function(){return t.getSubLangText(this.xml,ut,"desc",this.lang)}},desc:{get:function(){return this.$desc[this.lang]||""},set:function(e){t.setSubLangText(this.xml,ut,"desc",e,this.lang)}},uri:t.attribute("uri")},name:"_reachAddr",namespace:ut}),r={get:function(){const e=t.find(this.xml,ut,"reach"),r=[];if(e.length){const i=t.find(e[0],ut,"addr");for(const e of i)r.push(new n({},e))}return r},set:function(e){const r=t.findOrCreate(this.xml,ut,"reach");t.setAttribute(r,"xmlns",ut);for(const t of e){const e=new n(t);r.appendChild(e.xml)}}};e.withPubsubItem(function(t){e.add(t,"reach",r)}),e.withPresence(function(t){e.add(t,"reach",r)})}function Tr(e){const t=e.utils,n=e.define({element:"query",fields:{address:t.textSub(Ke,"address"),city:t.textSub(Ke,"city"),date:t.textSub(Ke,"date"),email:t.textSub(Ke,"email"),first:t.textSub(Ke,"first"),instructions:t.textSub(Ke,"instructions"),key:t.textSub(Ke,"key"),last:t.textSub(Ke,"last"),misc:t.textSub(Ke,"misc"),name:t.textSub(Ke,"name"),nick:t.textSub(Ke,"nick"),password:t.textSub(Ke,"password"),phone:t.textSub(Ke,"phone"),registered:t.boolSub(Ke,"registered"),remove:t.boolSub(Ke,"remove"),state:t.textSub(Ke,"state"),text:t.textSub(Ke,"text"),url:t.textSub(Ke,"url"),username:t.textSub(Ke,"username"),zip:t.textSub(Ke,"zip")},name:"register",namespace:Ke});e.extendIQ(n),e.withDefinition("x",Qe,function(t){e.extend(n,t)}),e.withDataForm(function(t){e.extend(n,t)})}function kr(e){const t=e.utils,n=e.define({element:"reference",fields:{anchor:t.attribute("anchor"),begin:t.numberAttribute("begin"),end:t.numberAttribute("end"),type:t.attribute("type"),uri:t.attribute("uri")},name:"reference",namespace:un}),r=t.multiExtension(n);e.withMessage(function(t){e.add(t,"references",r)})}function Er(e){const t=e.utils,n=e.define({element:"query",fields:{ver:{get:function(){return t.getAttribute(this.xml,"ver")},set:function(e){const n=""===e;t.setAttribute(this.xml,"ver",e,n)}}},name:"roster",namespace:Te}),r=e.define({element:"item",fields:{groups:t.multiTextSub(Te,"group"),jid:t.jidAttribute("jid",!0),name:t.attribute("name"),preApproved:t.boolAttribute(Te,"approved"),subscription:t.attribute("subscription","none"),subscriptionRequested:{get:function(){return"subscribe"===t.getAttribute(this.xml,"ask")}}},name:"_rosterItem",namespace:Te});e.extend(n,r,"items"),e.extendIQ(n)}function Rr(e){const t=e.utils;e.define({element:"set",fields:{after:t.textSub(ze,"after"),before:{get:function(){return t.getSubText(this.xml,ze,"before")},set:function(e){!0===e?t.findOrCreate(this.xml,ze,"before"):t.setSubText(this.xml,ze,"before",e)}},count:t.numberSub(ze,"count",!1,0),first:t.textSub(ze,"first"),firstIndex:t.numberSubAttribute(ze,"first","index"),index:t.numberSub(ze,"index",!1),last:t.textSub(ze,"last"),max:t.numberSub(ze,"max",!1)},name:"rsm",namespace:ze})}function Pr(e){const t=e.utils,n={get:function(){let e=t.find(this.xml,Ft,"rtcp-fb");const n=[];for(const r of e)n.push({subtype:t.getAttribute(r,"subtype"),type:t.getAttribute(r,"type")});e=t.find(this.xml,Ft,"rtcp-fb-trr-int");for(const r of e)n.push({type:t.getAttribute(r,"type"),value:t.getAttribute(r,"value")});return n},set:function(e){const n=this;let r=t.find(this.xml,Ft,"rtcp-fb");for(const e of r)n.xml.removeChild(e);r=t.find(this.xml,Ft,"rtcp-fb-trr-int");for(const e of r)n.xml.removeChild(e);for(const r of e){let e;"trr-int"===r.type?(e=t.createElement(Ft,"rtcp-fb-trr-int",mt),t.setAttribute(e,"type",r.type),t.setAttribute(e,"value",r.value)):(e=t.createElement(Ft,"rtcp-fb",mt),t.setAttribute(e,"type",r.type),t.setAttribute(e,"subtype",r.subtype)),n.xml.appendChild(e)}}},r=e.define({element:"bandwidth",fields:{bandwidth:t.text(),type:t.attribute("type")},name:"bandwidth",namespace:mt}),i=e.define({element:"description",fields:{applicationType:{value:"rtp",writable:!0},encryption:{get:function(){let e=t.find(this.xml,mt,"encryption");if(!e.length)return[];e=e[0];const n=this,r=t.find(e,mt,"crypto"),i=[];for(const e of r)i.push(new s({},e,n).toJSON());return i},set:function(e){let n=t.find(this.xml,mt,"encryption");if(n.length&&this.xml.removeChild(n),!e.length)return;t.setBoolSubAttribute(this.xml,mt,"encryption","required",!0),n=t.find(this.xml,mt,"encryption")[0];const r=this;for(const t of e){const e=new s(t,null,r);n.appendChild(e.xml)}}},feedback:n,headerExtensions:{get:function(){const e=t.find(this.xml,Ut,"rtp-hdrext"),n=[];for(const r of e)n.push({id:t.getAttribute(r,"id"),senders:t.getAttribute(r,"senders"),uri:t.getAttribute(r,"uri")});return n},set:function(e){const n=this,r=t.find(this.xml,Ut,"rtp-hdrext");for(const e of r)n.xml.removeChild(e);for(const r of e){const e=t.createElement(Ut,"rtp-hdrext",mt);t.setAttribute(e,"id",r.id),t.setAttribute(e,"uri",r.uri),t.setAttribute(e,"senders",r.senders),n.xml.appendChild(e)}}},media:t.attribute("media"),mux:t.boolSub(mt,"rtcp-mux"),reducedSize:t.boolSub(mt,"rtcp-rsize"),ssrc:t.attribute("ssrc")},name:"_rtp",namespace:mt,tags:["jingle-application"]}),o=e.define({element:"payload-type",fields:{channels:t.attribute("channels"),clockrate:t.attribute("clockrate"),feedback:n,id:t.attribute("id"),maxptime:t.attribute("maxptime"),name:t.attribute("name"),parameters:{get:function(){const e=[],n=t.find(this.xml,mt,"parameter");for(const r of n)e.push({key:t.getAttribute(r,"name"),value:t.getAttribute(r,"value")});return e},set:function(e){const n=this;for(const r of e){const e=t.createElement(mt,"parameter");t.setAttribute(e,"name",r.key),t.setAttribute(e,"value",r.value),n.xml.appendChild(e)}}},ptime:t.attribute("ptime")},name:"_payloadType",namespace:mt}),s=e.define({element:"crypto",fields:{cipherSuite:t.attribute("crypto-suite"),keyParams:t.attribute("key-params"),sessionParams:t.attribute("session-params"),tag:t.attribute("tag")},name:"crypto",namespace:mt}),a=e.define({element:"group",fields:{contents:t.multiSubAttribute(nn,"content","name"),semantics:t.attribute("semantics")},name:"_group",namespace:nn}),c=e.define({element:"ssrc-group",fields:{semantics:t.attribute("semantics"),sources:t.multiSubAttribute(rn,"source","ssrc")},name:"_sourceGroup",namespace:rn}),u=e.define({element:"source",fields:{parameters:{get:function(){const e=[],n=t.find(this.xml,rn,"parameter");for(const r of n)e.push({key:t.getAttribute(r,"name"),value:t.getAttribute(r,"value")});return e},set:function(e){const n=this;for(const r of e){const e=t.createElement(rn,"parameter");t.setAttribute(e,"name",r.key),t.setAttribute(e,"value",r.value),n.xml.appendChild(e)}}},ssrc:t.attribute("ssrc")},name:"_source",namespace:rn}),l=e.define({element:"stream",fields:{id:t.attribute("id"),track:t.attribute("track")},name:"_stream",namespace:"urn:xmpp:jingle:apps:rtp:msid:0"}),d=e.define({element:"mute",fields:{creator:t.attribute("creator"),name:t.attribute("name")},name:"mute",namespace:gt}),f=e.define({element:"unmute",fields:{creator:t.attribute("creator"),name:t.attribute("name")},name:"unmute",namespace:gt});e.extend(i,r),e.extend(i,o,"payloads"),e.extend(i,u,"sources"),e.extend(i,c,"sourceGroups"),e.extend(i,l,"streams"),e.withDefinition("content",pt,function(t){e.extend(t,i)}),e.withDefinition("jingle",pt,function(n){e.extend(n,d),e.extend(n,f),e.extend(n,a,"groups"),e.add(n,"ringing",t.boolSub(gt,"ringing")),e.add(n,"hold",t.boolSub(gt,"hold")),e.add(n,"active",t.boolSub(gt,"active"))})}const Ar={erase:"e",insert:"t",wait:"w"},jr={e:"erase",t:"insert",w:"wait"};function Ir(e){const t=e.utils,n=e.define({element:"rtt",fields:{actions:{get:function(){const e=[];for(let n=0,r=this.xml.childNodes.length;n<r;n++){const r=this.xml.childNodes[n],i=r.localName,o={};if(r.namespaceURI!==Vt)continue;if(!jr[i])continue;o.type=jr[i];const s=t.getAttribute(r,"p");s&&(o.pos=parseInt(s,10));const a=t.getAttribute(r,"n");a&&(o.num=parseInt(a,10));const c=t.getText(r);c&&"t"===i&&(o.text=c),e.push(o)}return e},set:function(e){const n=this;for(let e=0,t=this.xml.childNodes.length;e<t;e++)this.xml.removeChild(this.xml.childNodes[e]);for(const r of e){if(!Ar[r.type])return;const e=t.createElement(Vt,Ar[r.type],Vt);void 0!==r.pos&&t.setAttribute(e,"p",r.pos.toString()),r.num&&t.setAttribute(e,"n",r.num.toString()),r.text&&t.setText(e,r.text),n.xml.appendChild(e)}}},event:t.attribute("event","edit"),id:t.attribute("id"),seq:t.numberAttribute("seq")},name:"rtt",namespace:Vt});e.extendMessage(n)}const Or=["aborted","account-disabled","credentials-expired","encryption-required","incorrect-encoding","invalid-authzid","invalid-mechanism","malformed-request","mechanism-too-weak","not-authorized","temporary-auth-failure","not-supported"];function Mr(e){const t=e.utils,n=e.define({element:"mechanisms",fields:{mechanisms:t.multiTextSub(ve,"mechanism")},name:"sasl",namespace:ve});e.define({element:"auth",eventName:"sasl:auth",fields:{mechanism:t.attribute("mechanism"),value:t.text()},name:"saslAuth",namespace:ve,topLevel:!0}),e.define({element:"challenge",eventName:"sasl:challenge",fields:{value:t.text()},name:"saslChallenge",namespace:ve,topLevel:!0}),e.define({element:"response",eventName:"sasl:response",fields:{value:t.text()},name:"saslResponse",namespace:ve,topLevel:!0}),e.define({element:"abort",eventName:"sasl:abort",name:"saslAbort",namespace:ve,topLevel:!0}),e.define({element:"success",eventName:"sasl:success",fields:{value:t.text()},name:"saslSuccess",namespace:ve,topLevel:!0}),e.define({element:"failure",eventName:"sasl:failure",fields:{$text:{get:function(){return t.getSubLangText(this.xml,ve,"text",this.lang)}},condition:t.enumSub(ve,Or),lang:{get:function(){return this._lang||""},set:function(e){this._lang=e}},text:{get:function(){return this.$text[this.lang]||""},set:function(e){t.setSubLangText(this.xml,ve,"text",e,this.lang)}}},name:"saslFailure",namespace:ve,topLevel:!0}),e.extendStreamFeatures(n)}function Dr(e){const t=e.define({element:"session",fields:{optional:e.utils.boolSub(Se,"optional"),required:e.utils.boolSub(Se,"required")},name:"session",namespace:Se});e.extendIQ(t),e.extendStreamFeatures(t)}function Nr(e){const t=e.utils,n={get:function(){const e=t.find(this.xml,at,"headers");return e.length?t.getMultiSubText(e[0],at,"header",function(e){const n=t.getAttribute(e,"name");if(n)return{name:n,value:t.getText(e)}}):[]},set:function(n){const r=t.findOrCreate(this.xml,at,"headers");e.setMultiSubText(r,at,"header",n,function(e){const n=t.createElement(at,"header",at);t.setAttribute(n,"name",e.name),t.setText(n,e.value),r.appendChild(n)})}};e.withMessage(function(t){e.add(t,"headers",n)}),e.withPresence(function(t){e.add(t,"headers",n)})}function Lr(e){const t=e.utils,n=e.define({element:"sm",name:"streamManagement",namespace:Ct});e.define({element:"enable",eventName:"stream:management:enable",fields:{resume:t.boolAttribute("resume")},name:"smEnable",namespace:Ct,topLevel:!0}),e.define({element:"enabled",eventName:"stream:management:enabled",fields:{id:t.attribute("id"),resume:t.boolAttribute("resume")},name:"smEnabled",namespace:Ct,topLevel:!0}),e.define({element:"resume",eventName:"stream:management:resume",fields:{h:t.numberAttribute("h",!1,0),previd:t.attribute("previd")},name:"smResume",namespace:Ct,topLevel:!0}),e.define({element:"resumed",eventName:"stream:management:resumed",fields:{h:t.numberAttribute("h",!1,0),previd:t.attribute("previd")},name:"smResumed",namespace:Ct,topLevel:!0}),e.define({element:"failed",eventName:"stream:management:failed",name:"smFailed",namespace:Ct,topLevel:!0}),e.define({element:"a",eventName:"stream:management:ack",fields:{h:t.numberAttribute("h",!1,0)},name:"smAck",namespace:Ct,topLevel:!0}),e.define({element:"r",eventName:"stream:management:request",name:"smRequest",namespace:Ct,topLevel:!0}),e.extendStreamFeatures(n)}function Fr(e){const t=e.utils;e.define({element:"stream",fields:{from:t.jidAttribute("from",!0),id:t.attribute("id"),lang:t.langAttribute(),to:t.jidAttribute("to",!0),version:t.attribute("version","1.0")},name:"stream",namespace:_e})}const Ur=["bad-format","bad-namespace-prefix","conflict","connection-timeout","host-gone","host-unknown","improper-addressing","internal-server-error","invalid-from","invalid-namespace","invalid-xml","not-authorized","not-well-formed","policy-violation","remote-connection-failed","reset","resource-constraint","restricted-xml","see-other-host","system-shutdown","undefined-condition","unsupported-encoding","unsupported-feature","unsupported-stanza-type","unsupported-version"];function qr(e){const t=e.utils;e.define({element:"error",fields:{$text:{get:function(){return t.getSubLangText(this.xml,Ce,"text",this.lang)}},condition:t.enumSub(Ce,Ur),lang:{get:function(){return this._lang||""},set:function(e){this._lang=e}},seeOtherHost:{get:function(){return t.getSubText(this.xml,Ce,"see-other-host")},set:function(e){this.condition="see-other-host",t.setSubText(this.xml,Ce,"see-other-host",e)}},text:{get:function(){return this.$text[this.lang]||""},set:function(e){t.setSubLangText(this.xml,Ce,"text",e,this.lang)}}},name:"streamError",namespace:_e,topLevel:!0})}function Br(e){e.define({element:"features",name:"streamFeatures",namespace:_e,topLevel:!0});const t=e.define({element:"ver",name:"rosterVersioning",namespace:ke}),n=e.define({element:"sub",name:"subscriptionPreApproval",namespace:Ee});e.extendStreamFeatures(t),e.extendStreamFeatures(n)}function zr(e){const t=e.define({element:"time",fields:{tzo:e.utils.tzoSub(kt,"tzo",0),utc:e.utils.dateSub(kt,"utc")},name:"time",namespace:kt});e.extendIQ(t)}function Vr(e){const t=e.utils,n=e.define({element:"tune",fields:{artist:t.textSub(it,"artist"),length:t.numberSub(it,"length"),rating:t.numberSub(it,"rating"),source:t.textSub(it,"source"),title:t.textSub(it,"title"),track:t.textSub(it,"track"),uri:t.textSub(it,"uri")},name:"tune",namespace:it});e.extendPubsubItem(n),e.extendMessage(n)}function Wr(e){const t=e.utils,n=e.define({element:"request",fields:{filename:t.attribute("filename"),size:t.numberAttribute("size"),type:t.attribute("content-type")},name:"uploadRequest",namespace:cn}),r=e.define({element:"slot",name:"uploadSlots",namespace:cn}),i=e.define({element:"put",fields:{url:t.attribute("url")},name:"put",namespace:cn}),o=e.define({element:"header",fields:{name:t.attribute("name"),value:t.text()},name:"_header",namespace:cn}),s=e.define({element:"get",fields:{url:t.attribute("url")},name:"get",namespace:cn});e.extend(i,o,"headers"),e.extend(r,i),e.extend(r,s),e.extendIQ(r),e.extendIQ(n)}function Gr(e){const t=e.utils,n=e.define({element:"vCard",fields:{birthday:t.dateSub(Be,"BDAY"),description:t.textSub(Be,"DESC"),fullName:t.textSub(Be,"FN"),jids:t.multiTextSub(Be,"JABBERID"),nicknames:t.multiTextSub(Be,"NICKNAME"),role:t.textSub(Be,"ROLE"),title:t.textSub(Be,"TITLE"),website:t.textSub(Be,"URL")},name:"vCardTemp",namespace:Be}),r=e.define({element:"EMAIL",fields:{email:t.textSub(Be,"USERID"),home:t.boolSub(Be,"HOME"),preferred:t.boolSub(Be,"PREF"),work:t.boolSub(Be,"WORK")},name:"_email",namespace:Be}),i=e.define({element:"TEL",fields:{home:t.boolSub(Be,"HOME"),mobile:t.boolSub(Be,"CELL"),number:t.textSub(Be,"NUMBER"),preferred:t.boolSub(Be,"PREF"),work:t.boolSub(Be,"WORK")},name:"_tel",namespace:Be}),o=e.define({element:"ADR",fields:{city:t.textSub(Be,"LOCALITY"),country:t.textSub(Be,"CTRY"),home:t.boolSub(Be,"HOME"),pobox:t.textSub(Be,"POBOX"),postalCode:t.textSub(Be,"PCODE"),preferred:t.boolSub(Be,"PREF"),region:t.textSub(Be,"REGION"),street:t.textSub(Be,"STREET"),street2:t.textSub(Be,"EXTADD"),work:t.boolSub(Be,"WORK")},name:"_address",namespace:Be}),s=e.define({element:"ORG",fields:{name:t.textSub(Be,"ORGNAME"),unit:t.textSub(Be,"ORGUNIT")},name:"organization",namespace:Be}),a=e.define({element:"N",fields:{family:t.textSub(Be,"FAMILY"),given:t.textSub(Be,"GIVEN"),middle:t.textSub(Be,"MIDDLE"),prefix:t.textSub(Be,"PREFIX"),suffix:t.textSub(Be,"SUFFIX")},name:"name",namespace:Be}),c=e.define({element:"PHOTO",fields:{data:t.textSub(Be,"BINVAL"),type:t.textSub(Be,"TYPE"),url:t.textSub(Be,"EXTVAL")},name:"photo",namespace:Be});e.extend(n,r,"emails"),e.extend(n,o,"addresses"),e.extend(n,i,"phoneNumbers"),e.extend(n,s),e.extend(n,a),e.extend(n,c),e.extendIQ(n)}function $r(e){const t=e.define({element:"query",fields:{name:e.utils.textSub(et,"name"),os:e.utils.textSub(et,"os"),version:e.utils.textSub(et,"version")},name:"version",namespace:et});e.extendIQ(t)}function Hr(e){e.withIQ(function(t){e.add(t,"visible",e.utils.boolSub(xt,"visible")),e.add(t,"invisible",e.utils.boolSub(xt,"invisible"))})}function Qr(e){const t=e.utils,n={get:function(){const e={},n=t.find(this.xml,fn,"Property");for(let r=0,i=n.length;r<i;r++){const i=n[r];e[t.getAttribute(i,"type")]=i.textContent}return e}},r=e.define({element:"XRD",fields:{aliases:t.multiSubText(fn,"Alias"),expires:t.dateSub(fn,"Expires"),properties:n,subject:t.subText(fn,"Subject")},name:"xrd",namespace:fn}),i=e.define({element:"Link",fields:{href:t.attribute("href"),properties:n,rel:t.attribute("rel"),template:t.attribute("template"),titles:t.subLangText(fn,"Title","default"),type:t.attribute("type")},name:"_xrdlink",namespace:fn});e.extend(r,i,"links")}const Kr={client:ye,component:nt,server:we};function Yr(e){e.extendMessage=function(e,t){this.withMessage(n=>{this.extend(n,e,t)})},e.extendPresence=function(e,t){this.withPresence(n=>{this.extend(n,e,t)})},e.extendIQ=function(e,t){this.withIQ(n=>{this.extend(n,e,t)})},e.extendStreamFeatures=function(e){this.withStreamFeatures(t=>{this.extend(t,e)})},e.extendPubsubItem=function(e){this.withPubsubItem(t=>{this.extend(t,e)})},e.withIQ=function(e){this.withDefinition("iq",ye,e),this.withDefinition("iq",nt,e)},e.withMessage=function(e){this.withDefinition("message",ye,e),this.withDefinition("message",nt,e)},e.withPresence=function(e){this.withDefinition("presence",ye,e),this.withDefinition("presence",nt,e)},e.withStreamFeatures=function(e){this.withDefinition("features",_e,e)},e.withStanzaError=function(e){this.withDefinition("error",ye,e),this.withDefinition("error",nt,e)},e.withDataForm=function(e){this.withDefinition("x",Pe,e)},e.withPubsubItem=function(e){this.withDefinition("item",Ve,e),this.withDefinition("item",Ge,e)},e.getMessage=function(e="client"){return this.getDefinition("message",Kr[e])},e.getPresence=function(e="client"){return this.getDefinition("presence",Kr[e])},e.getIQ=function(e="client"){return this.getDefinition("iq",Kr[e])},e.getStreamError=function(){return this.getDefinition("error",_e)},e.getIq=e.getIQ,e.withIq=e.withIQ}function Jr(e){const t=e.utils;t.jidAttribute=function(e,n){return{get:function(){const r=new S(t.getAttribute(this.xml,e));return n&&(r.prepped=!0),r},set:function(n){t.setAttribute(this.xml,e,(n||"").toString())}}},t.jidSub=function(e,n,r){return{get:function(){const i=new S(t.getSubText(this.xml,e,n));return r&&(i.prepped=!0),i},set:function(r){t.setSubText(this.xml,e,n,(r||"").toString())}}},t.tzoSub=t.field(function(e,n,r,i){let o=-1,s=t.getSubText(e,n,r);if(!s)return i;"-"===s.charAt(0)&&(o=1,s=s.slice(1));const a=s.split(":");return(60*parseInt(a[0],10)+parseInt(a[1],10))*o},function(e,n,r,i){let o,s,a="-";"number"==typeof i?(i<0&&(i=-i,a="+"),a+=((o=i/60)<10?"0":"")+o+":"+((s=i%60)<10?"0":"")+s):a=i,t.setSubText(e,n,r,a)})}function Xr(e){e.use(Jr),e.use(Yr),e.use(pn),e.use(hn),e.use(mn),e.use(gn),e.use(bn),e.use(yn),e.use(vn),e.use(wn),e.use(_n),e.use(Cn),e.use(kn),e.use(En),e.use(Rn),e.use(An),e.use(jn),e.use(In),e.use(Mn),e.use(Nn),e.use(Ln),e.use(Fn),e.use(Un),e.use(qn),e.use(Bn),e.use(Wn),e.use(Gn),e.use($n),e.use(Qn),e.use(Kn),e.use(Xn),e.use(Zn),e.use(er),e.use(tr),e.use(nr),e.use(ir),e.use(sr),e.use(cr),e.use(ur),e.use(lr),e.use(dr),e.use(fr),e.use(hr),e.use(mr),e.use(br),e.use(yr),e.use(wr),e.use(Sr),e.use(xr),e.use(_r),e.use(Cr),e.use(Tr),e.use(kr),e.use(Er),e.use(Rr),e.use(Pr),e.use(Ir),e.use(Mr),e.use(Dr),e.use(Nr),e.use(Lr),e.use(Fr),e.use(qr),e.use(Br),e.use(zr),e.use(Vr),e.use(Wr),e.use(Gr),e.use($r),e.use(Hr),e.use(Qr)}const Zr=Math.pow(2,32),ei=(e,t)=>(e%t+t)%t;class ti{constructor(e){this.client=e,this.id=!1,this.allowResume=!0,this.started=!1,this.inboundStarted=!1,this.outboundStarted=!1,this.lastAck=0,this.handled=0,this.windowSize=1,this.unacked=[],this.pendingAck=!1,this.cacheHandler=(()=>{}),this.stanzas={Ack:e.stanzas.getDefinition("a",Ct),Enable:e.stanzas.getDefinition("enable",Ct),IQ:e.stanzas.getIQ(),Message:e.stanzas.getMessage(),Presence:e.stanzas.getPresence(),Request:e.stanzas.getDefinition("r",Ct),Resume:e.stanzas.getDefinition("resume",Ct)}}get started(){return this.outboundStarted&&this.inboundStarted}set started(e){e||(this.outboundStarted=!1,this.inboundStarted=!1)}load(e){this.id=e.id,this.allowResume=!0,this.handled=e.handled,this.lastAck=e.lastAck,this.unacked=e.unacked}cache(e){this.cacheHandler=e}enable(){const e=new this.stanzas.Enable;e.resume=this.allowResume,this.client.send(e),this.handled=0,this.outboundStarted=!0}resume(){const e=new this.stanzas.Resume({h:this.handled,previd:this.id});this.client.send(e),this.outboundStarted=!0}enabled(e){this.id=e.id,this.handled=0,this.inboundStarted=!0,this._cache()}resumed(e){this.id=e.previd,e.h&&this.process(e,!0),this.inboundStarted=!0,this._cache()}failed(e){e.h&&this.process(e);for(const[e,t]of this.unacked)this.client.emit("stanza:failed",t,e);this.inboundStarted=!1,this.outboundStarted=!1,this.id=!1,this.lastAck=0,this.handled=0,this.unacked=[],this._cache()}ack(){this.client.send(new this.stanzas.Ack({h:this.handled}))}request(){this.pendingAck=!0,this.client.send(new this.stanzas.Request)}process(e,t){const n=this,r=ei(e.h-this.lastAck,Zr);this.pendingAck=!1;for(let e=0;e<r&&this.unacked.length>0;e++){const[e,t]=this.unacked.shift();this.client.emit("stanza:acked",t,e)}if(this.lastAck=e.h,t){const e=this.unacked;this.unacked=[];for(const[t,r]of e){let e;"message"===t&&(e=new this.stanzas.Message(r)),"presence"===t&&(e=new this.stanzas.Presence(r)),"iq"===t&&(e=new this.stanzas.IQ(r)),n.client.send(e)}}this._cache(),this.needAck()&&this.request()}track(e,t){this.outboundStarted&&{iq:!0,message:!0,presence:!0}[e]&&(this.unacked.push([e,t.toJSON()]),this._cache(),this.needAck()&&this.request())}handle(){this.inboundStarted&&(this.handled=ei(this.handled+1,Zr),this._cache())}needAck(){return!this.pendingAck&&this.unacked.length>=this.windowSize}_cache(){this.cacheHandler({handled:this.handled,id:this.id,lastAck:this.lastAck,unacked:this.unacked})}}class ni{constructor(){this.isWildEmitter=!0,this.callbacks={}}on(e,t,n){const r=3===arguments.length,i=r?arguments[1]:void 0,o=r?arguments[2]:arguments[1];return o._groupName=i,(this.callbacks[e]=this.callbacks[e]||[]).push(o),this}once(e,t,n){const r=3===arguments.length,i=r?arguments[1]:void 0,o=r?arguments[2]:arguments[1],s=()=>{this.off(e,s),o.apply(this,arguments)};return this.on(e,i,s),this}releaseGroup(e){this.callbacks=this.callbacks||{};for(const t of Object.keys(this.callbacks)){const n=this.callbacks[t];for(let t=0,r=n.length;t<r;t++)n[t]._groupName===e&&(n.splice(t,1),t--,r--)}return this}off(e,t){this.callbacks=this.callbacks||{};const n=this.callbacks[e];if(!n)return this;if(!t)return delete this.callbacks[e],this;const r=n.indexOf(t);return n.splice(r,1),0===n.length&&delete this.callbacks[e],this}emit(e,...t){this.callbacks=this.callbacks||{};const n=[].slice.call(arguments,1),r=this.callbacks[e],i=this.getWildcardCallbacks(e);if(r){const e=r.slice();for(let t=0,r=e.length;t<r&&e[t];++t)e[t].apply(this,n)}if(i){const t=i.slice();for(let r=0,i=t.length;r<i&&t[r];++r)t[r].apply(this,[e].concat(n))}return this}getWildcardCallbacks(e){this.callbacks=this.callbacks||{};let t=[];for(const n of Object.keys(this.callbacks)){const r=n.split("*");("*"===n||2===r.length&&e.slice(0,r[0].length)===r[0])&&(t=t.concat(this.callbacks[n]))}return t}}const ri=[];for(let e=0;e<256;++e)ri[e]=(e+256).toString(16).substr(1);function ii(e,t,n=(()=>void 0)){return Object(a.__awaiter)(this,void 0,void 0,function*(){let r;const i=yield Promise.race([e,new Promise((e,i)=>{r=setTimeout(()=>i(n()),t)})]);return r&&clearTimeout(r),i})}function oi(t,n){const r="string"==typeof t?e.from(t,"utf8"):t,i="string"==typeof n?e.from(n,"utf8"):n;return r.compare(i)}function si(){const e=oe(16);e[6]=15&e[6]|64,e[8]=63&e[8]|128;let t=0;return[ri[e[t++]],ri[e[t++]],ri[e[t++]],ri[e[t++]],"-",ri[e[t++]],ri[e[t++]],"-",ri[e[t++]],ri[e[t++]],"-",ri[e[t++]],ri[e[t++]],"-",ri[e[t++]],ri[e[t++]],ri[e[t++]],ri[e[t++]],ri[e[t++]],ri[e[15]]].join("")}const ai=fetch;function ci(e,t){return Object(a.__awaiter)(this,void 0,void 0,function*(){"string"==typeof t&&(t={host:t});const n=Object.assign({json:!0,ssl:!0,xrd:!0},t),r=n.ssl?"https://":"http://";return function(e){return Object(a.__awaiter)(this,void 0,void 0,function*(){try{const t=yield Promise.all(e.map(e=>e.then(e=>Promise.reject(e),e=>Promise.resolve(e))));return Promise.reject(t)}catch(e){return Promise.resolve(e)}})}([ai(`${r}${n.host}/.well-known/host-meta.json`).then(e=>Object(a.__awaiter)(this,void 0,void 0,function*(){if(!e.ok)throw new Error("could-not-fetch-json");return e.json()})),ai(`${r}${n.host}/.well-known/host-meta`).then(t=>Object(a.__awaiter)(this,void 0,void 0,function*(){if(!t.ok)throw new Error("could-not-fetch-xml");const n=yield t.text();return e.parse(n)}))])})}function ui(e,t){e.discoverBindings=function(e,n){ci(t,e).then(e=>{const t={bosh:[],websocket:[]},r=e.links||[];for(const e of r)e.href&&e.rel===lt&&t.websocket.push(e.href),e.href&&e.rel===dt&&t.bosh.push(e.href);n(null,t)}).catch(e=>{n(e,[])})}}function li(e){e.features={handlers:{},negotiated:{},order:[]},e.registerFeature=function(t,n,r){this.features.order.push({name:t,priority:n}),this.features.order.sort((e,t)=>e.priority-t.priority),this.features.handlers[t]=r.bind(e)},e.on("streamFeatures",function(t){return Object(a.__awaiter)(this,void 0,void 0,function*(){const n=[],r=e.features.negotiated,i=e.features.handlers;for(const o of e.features.order){const e=o.name;t[e]&&i[e]&&!r[e]&&n.push(()=>new Promise(n=>{r[e]?n():i[e](t,(e,t)=>{e?n({command:e,message:t}):n()})}))}for(const t of n){let n="",r="";try{const e=yield t();e&&(n=e.command,r=e.message)}catch(e){n="disconnect",r=e.message,console.error(e)}if(n)return"restart"===n&&e.transport.restart(),void("disconnect"===n&&(e.emit("stream:error",{condition:"policy-violation",text:"Failed to negotiate stream features: "+r}),e.disconnect()))}})})}const di="urn:ietf:params:xml:ns:xmpp-sasl";function fi(t,n){const r=n.getDefinition("auth",di),i=n.getDefinition("response",di),o=n.getDefinition("abort",di);t.registerFeature("sasl",100,function(t,n){const s=this,a=s.SASLFactory.create(t.sasl.mechanisms);if(!a)return s.releaseGroup("sasl"),s.emit("auth:failed"),n("disconnect","authentication failed");s.on("sasl:success","sasl",function(){s.features.negotiated.sasl=!0,s.releaseGroup("sasl"),s.emit("auth:success",s.config.credentials),n("restart")}),s.on("sasl:challenge","sasl",function(t){return a.challenge(e.from(t.value,"base64").toString()),s.getCredentials(function(t,n){if(t)return s.send(new o);const r=a.response(n);if(r||""===r?s.send(new i({value:e.from(r).toString("base64")})):s.send(new i),a.cache){for(const t of Object.keys(a.cache)){if(!a.cache[t])return;s.config.credentials[t]=e.from(a.cache[t])}s.emit("credentials:update",s.config.credentials)}})}),s.on("sasl:failure","sasl",function(){s.releaseGroup("sasl"),s.emit("auth:failed"),n("disconnect","authentication failed")}),s.on("sasl:abort","sasl",function(){s.releaseGroup("sasl"),s.emit("auth:failed"),n("disconnect","authentication failed")});const c={mechanism:a.name};if(a.clientFirst)return s.getCredentials(function(t,n){if(t)return s.send(new o);c.value=e.from(a.response(n)).toString("base64"),s.send(new r(c))});s.send(new r(c))}),t.on("disconnected",function(){t.features.negotiated.sasl=!1,t.releaseGroup("sasl")})}function pi(e,t,n){const r=function(e,t){const r=this;if(!n.useStreamManagement)return t();r.on("stream:management:enabled","sm",function(e){r.sm.enabled(e),r.features.negotiated.streamManagement=!0,r.releaseGroup("sm"),t()}),r.on("stream:management:resumed","sm",function(e){r.sm.resumed(e),r.features.negotiated.streamManagement=!0,r.features.negotiated.bind=!0,r.sessionStarted=!0,r.releaseGroup("sm"),t("break")}),r.on("stream:management:failed","sm",function(e){r.sm.failed(e),r.emit("session:end"),r.releaseGroup("session"),r.releaseGroup("sm"),t()}),r.sm.id?r.sm.id&&r.sm.allowResume?r.sm.resume():(r.releaseGroup("sm"),t()):r.features.negotiated.bind?r.sm.enable():(r.releaseGroup("sm"),t())};e.on("disconnected",function(){e.features.negotiated.streamManagement=!1}),e.registerFeature("streamManagement",200,r),e.registerFeature("streamManagement",500,r)}function hi(e,t,n){e.registerFeature("bind",300,function(t,r){e.sendIq({bind:{resource:n.resource},type:"set"},function(n,i){if(n)return e.emit("session:error",n),r("disconnect","JID binding failed");e.features.negotiated.bind=!0,e.emit("session:prebind",i.bind.jid);const o=!t.session||t.session&&t.session.optional;return!e.sessionStarted&&o&&e.emit("session:started",e.jid),r()})}),e.on("session:started",function(){e.sessionStarted=!0}),e.on("session:prebind",function(t){e.jid=new S(t),e.emit("session:bound",e.jid)}),e.on("disconnected",function(){e.sessionStarted=!1,e.features.negotiated.bind=!1})}function mi(e){e.registerFeature("session",1e3,function(e,t){const n=this;if(e.session.optional||n.sessionStarted)return n.features.negotiated.session=!0,t();n.sendIq({session:{},type:"set"},function(e){if(e)return t("disconnect","session request failed");n.features.negotiated.session=!0,n.sessionStarted||(n.sessionStarted=!0,n.emit("session:started",n.jid)),t()})}),e.on("disconnected",function(){e.sessionStarted=!1,e.features.negotiated.session=!1})}const gi=1;class bi extends ni{constructor(t,n){super();const r=this;r.sm=t,r.closing=!1,r.stanzas={Close:n.getDefinition("close","urn:ietf:params:xml:ns:xmpp-framing",!0),Open:n.getDefinition("open","urn:ietf:params:xml:ns:xmpp-framing",!0),StreamError:n.getStreamError()},r.sendQueue=Object(c.a)(function(t,n){r.conn&&("string"!=typeof t&&(t=t.toString()),t=e.from(t,"utf8").toString(),r.emit("raw:outgoing",t),r.conn.readyState===gi&&r.conn.send(t)),n()},1),r.on("connected",function(){r.send(r.startHeader())}),r.on("raw:incoming",function(e){let t,i;if(""!==(e=e.trim())){try{t=n.parse(e)}catch(e){return i=new r.stanzas.StreamError({condition:"invalid-xml"}),r.emit("stream:error",i,e),r.send(i),r.disconnect()}if(t){if("openStream"===t._name)return r.hasStream=!0,r.stream=t,r.emit("stream:start",t.toJSON());if("closeStream"===t._name)return r.emit("stream:end"),r.disconnect();!t.lang&&r.stream&&(t.lang=r.stream.lang),r.emit("stream:data",t)}}})}connect(t){const n=this;n.config=t,n.hasStream=!1,n.closing=!1,n.conn=new WebSocket(t.wsURL,"xmpp",t.wsOptions),n.conn.onerror=function(e){e.preventDefault&&e.preventDefault(),n.emit("disconnected",n)},n.conn.onclose=function(e){n.emit("disconnected",n,e)},n.conn.onopen=function(){n.sm.started=!1,n.emit("connected",n)},n.conn.onmessage=function(t){n.emit("raw:incoming",e.from(t.data,"utf8").toString())}}startHeader(){return new this.stanzas.Open({lang:this.config.lang||"en",to:this.config.server,version:this.config.version||"1.0"})}closeHeader(){return new this.stanzas.Close}disconnect(){this.conn&&!this.closing&&this.hasStream?(this.closing=!0,this.send(this.closeHeader())):(this.hasStream=!1,this.stream=void 0,this.conn&&this.conn.readyState===gi&&this.conn.close(),this.conn=void 0)}restart(){this.hasStream=!1,this.send(this.startHeader())}send(e){this.sendQueue.push(e)}}class yi extends ni{constructor(e,t){super();const n=this;n.sm=e,n.stanzas={BOSH:t.getDefinition("body",st),StreamError:t.getStreamError()},n.sendQueue=[],n.requests=[],n.maxRequests=void 0,n.sid="",n.authenticated=!1,n.on("raw:incoming",function(e){if(""===(e=e.trim()))return;let r,i;try{r=t.parse(e,n.stanzas.BOSH)}catch(e){return i=new n.stanzas.StreamError({condition:"invalid-xml"}),n.emit("stream:error",i,e),n.send(i),n.disconnect()}n.hasStream||(n.hasStream=!0,n.stream={from:r.from,id:r.sid||n.sid,lang:r.lang||"en",to:r.to,version:r.version||"1.0"},n.sid=r.sid||n.sid,n.maxRequests=r.requests||n.maxRequests);const o=r.payload;for(const e of o)e.lang||(e.lang=n.stream.lang),n.emit("stream:data",e);"terminate"===r.type&&(n.rid=void 0,n.sid=void 0,n.emit("bosh:terminate",r),n.emit("stream:end"),n.emit("disconnected",n))})}connect(e){const t=this;if(t.config=Object.assign({maxRetries:5,rid:Math.ceil(9999999999*Math.random()),wait:30},e),t.hasStream=!1,t.sm.started=!1,t.url=e.boshURL,t.sid=t.config.sid,t.rid=t.config.rid,t.requests=[],t.sid)return t.hasStream=!0,t.stream={},t.emit("connected",t),t.emit("session:prebind",t.config.jid),void t.emit("session:started");t.rid++,t.request(new t.stanzas.BOSH({hold:1,lang:t.config.lang||"en",to:t.config.server,ver:"1.6",version:t.config.version||"1.0",wait:t.config.wait}))}disconnect(){this.hasStream?(this.rid++,this.request(new this.stanzas.BOSH({type:"terminate"}))):(this.stream=void 0,this.sid=void 0,this.rid=void 0,this.emit("disconnected",this))}restart(){this.rid++,this.request(new this.stanzas.BOSH({lang:this.config.lang||"en",restart:"true",to:this.config.server}))}send(e){const t=this;t.hasStream&&(t.sendQueue.push(e),clearTimeout(this.pollTimeout),this.pollTimeout=setTimeout(()=>{t.longPoll()},50))}longPoll(){const e=!this.maxRequests||this.requests.length<this.maxRequests,t=!this.maxRequests||this.sendQueue.length>0&&this.requests.length<this.maxRequests;if(!this.sid||!e&&!t)return;const n=this.sendQueue;this.sendQueue=[],this.rid++,this.request(new this.stanzas.BOSH({payload:n}))}request(t){const n=this,r={id:n.rid,request:null};t.rid=n.rid,t.sid=n.sid;const i=e.from(t.toString(),"utf8").toString();n.emit("raw:outgoing",i),n.emit("raw:outgoing:"+r.id,i),n.requests.push(r);const o=function e(t,n,r,i){return Object(a.__awaiter)(this,void 0,void 0,function*(){try{const o=yield ii(ai(t,n),1e3*r);if(!o.ok)throw new Error("HTTP Status Error: "+o.status);return o.text()}catch(o){if(i>0)return e(t,n,r,i-1);throw o}})}(n.url,{body:i,headers:{"Content-Type":"text/xml"},method:"POST"},1.5*n.config.wait,this.config.maxRetries).catch(function(e){console.log(e),n.hasStream=!1;const t=new n.stanzas.StreamError({condition:"connection-timeout"});n.emit("stream:error",t,e),n.disconnect()}).then(function(i){n.requests=n.requests.filter(e=>e.id!==r.id),i&&(i=e.from(i,"utf8").toString(),n.emit("raw:incoming",i),n.emit("raw:incoming:"+r.id,i)),n.hasStream&&"terminate"!==t.type&&!n.requests.length&&n.authenticated&&setTimeout(()=>{n.longPoll()},30)});return r.request=o,o}}const vi={anonymous:_,"digest-md5":ce,external:C,plain:T,"scram-sha-1":he,"x-oauth2":me};class wi extends ni{constructor(e){super(),e=e||{},this._initConfig(e),this.jid=new S,this.stanzas=o.a.createRegistry(),this.stanzas.use(Xr),this.use(ui),this.use(li),this.use(fi),this.use(pi),this.use(hi),this.use(mi),this.sm=new ti(this),this.transports={bosh:yi,websocket:bi},this.on("stream:data",e=>{const t=e?e.toJSON():null;if(t){if("iq"===e._name){t._xmlChildCount=0;for(const n of e.xml.childNodes||[])1===n.nodeType&&(t._xmlChildCount+=1)}if(this.emit(e._eventname||e._name,t),"message"===e._name||"presence"===e._name||"iq"===e._name)this.sm.handle(t),this.emit("stanza",t);else{if("smAck"===e._name)return this.sm.process(t);if("smRequest"===e._name)return this.sm.ack()}t.id&&(this.emit("id:"+t.id,t),this.emit(e._name+":id:"+t.id,t))}}),this.on("disconnected",()=>{this.transport&&(this.transport.off("*"),delete this.transport),this.releaseGroup("connection")}),this.on("auth:success",()=>{this.transport&&(this.transport.authenticated=!0)}),this.on("iq",e=>{const t=e.type,n=e._xmlChildCount;delete e._xmlChildCount;const r=Object.keys(e).filter(function(e){return"id"!==e&&"to"!==e&&"from"!==e&&"lang"!==e&&"type"!==e&&"errorReply"!==e&&"resultReply"!==e});if("get"===e.type||"set"===e.type){if(1!==n)return this.sendIq(e.errorReply({error:{condition:"bad-request",type:"modify"}}));if(!r.length)return this.sendIq(e.errorReply({error:{condition:"service-unavailable",type:"cancel"}}));const i="iq:"+t+":"+r[0];this.callbacks[i]?this.emit(i,e):this.sendIq(e.errorReply({error:{condition:"service-unavailable",type:"cancel"}}))}}),this.on("message",e=>{!e.hasOwnProperty("$body")&&!e.oob||e.received||e.displayed||("chat"===e.type||"normal"===e.type?this.emit("chat",e):"groupchat"===e.type&&this.emit("groupchat",e)),"error"===e.type&&this.emit("message:error",e)}),this.on("presence",e=>{let t=e.type||"available";"error"===t&&(t="presence:error"),this.emit(t,e)})}get stream(){return this.transport?this.transport.stream:void 0}_initConfig(e){const t=this.config||{};this.config=Object.assign({sasl:["external","scram-sha-1","digest-md5","plain","anonymous"],transports:["websocket","bosh"],useStreamManagement:!0},t,e),Array.isArray(this.config.sasl)||(this.config.sasl=[this.config.sasl]),this.SASLFactory=new ge;for(const e of this.config.sasl)if("string"==typeof e){const t=vi[e.toLowerCase()];t&&t.prototype&&t.prototype.name&&this.SASLFactory.use(t)}else this.SASLFactory.use(e);this.config.jid=new S(this.config.jid),this.config.server||(this.config.server=this.config.jid.domain),this.config.password&&(this.config.credentials=this.config.credentials||{},this.config.credentials.password=this.config.password,delete this.config.password),this.config.transport&&(this.config.transports=[this.config.transport]),Array.isArray(this.config.transports)||(this.config.transports=[this.config.transports])}use(e){"function"==typeof e&&e(this,this.stanzas,this.config)}nextId(){return si()}_getConfiguredCredentials(){const e=this.config.credentials||{},t=new S(this.config.jid),n=e.username||t.local,r=e.server||t.domain;return Object.assign({host:r,password:this.config.password,realm:r,server:r,serviceName:r,serviceType:"xmpp",username:n},e)}getCredentials(e){return e(null,this._getConfiguredCredentials())}connect(e,t){if(this._initConfig(e),t||1!==this.config.transports.length||((t={}).name=this.config.transports[0]),t&&t.name){const e=this.transport=new this.transports[t.name](this.sm,this.stanzas);return e.on("*",(e,t)=>{this.emit(e,t)}),e.connect(this.config)}return this.discoverBindings(this.config.server,(e,t)=>{if(e)return console.error("Could not find https://"+this.config.server+"/.well-known/host-meta file to discover connection endpoints for the requested transports."),this.disconnect();for(let e=0,n=this.config.transports.length;e<n;e++){const n=this.config.transports[e];console.log("Checking for %s endpoints",n);for(let e=0,r=(t[n]||[]).length;e<r;e++){const r=t[n][e];if(0===r.indexOf("wss://")||0===r.indexOf("https://"))return"websocket"===n?this.config.wsURL=r:this.config.boshURL=r,console.log("Using %s endpoint: %s",n,r),this.connect(null,{name:n,url:r});console.warn("Discovered unencrypted %s endpoint (%s). Ignoring",n,r)}}return console.error("No endpoints found for the requested transports."),this.disconnect()})}disconnect(){this.sessionStarted&&(this.releaseGroup("session"),this.sm.started||this.emit("session:end")),this.sessionStarted=!1,this.releaseGroup("connection"),this.transport?this.transport.disconnect():this.emit("disconnected")}send(e){this.sm.track(e._name,e),this.transport&&this.transport.send(e)}sendMessage(e){(e=e||{}).id||(e.id=this.nextId());const t=new(this.stanzas.getMessage())(e);return this.emit("message:sent",t.toJSON()),this.send(t),e.id}sendPresence(e){(e=e||{}).id||(e.id=this.nextId());const t=this.stanzas.getPresence();return this.send(new t(e)),e.id}sendIq(e,t){(e=e||{}).id||(e.id=this.nextId());const n=this.stanzas.getIq(),r=e.toJSON?e:new n(e);if("error"===e.type||"result"===e.type)return void this.send(r);const i=new S(e.to),o={"":!0};o[i.full]=!0,o[i.bare]=!0,o[i.domain]=!0,o[this.jid.bare]=!0,o[this.jid.domain]=!0;const s="iq:id:"+e.id,a=new Promise((e,t)=>{const n=r=>{o[r.from.full]&&("result"!==r.type&&"error"!==r.type||(this.off(s,n),r.error?t(r):e(r)))};this.on(s,"session",n)});return this.send(r),ii(a,1e3*(this.config.timeout||15),()=>({error:{condition:"timeout"},id:e.id,type:"error"})).then(function(e){return t&&t(null,e),e},function(e){if(t)return t(e);throw e})}sendStreamError(e){e=e||{};const t=new(this.stanzas.getStreamError())(e);this.emit("stream:error",t.toJSON()),this.send(t),this.disconnect()}}function Si(t,n){let r="",i=t.features||[],o=[];const s=t.extensions||[],a={},c=[];for(const e of t.identities||[])o.push([e.category||"",e.type||"",e.lang||"",e.name||""].join("/"));const u=o.length,l=i.length;if(o=[...new Set(o)].sort(oi),l!==(i=[...new Set(i)].sort(oi)).length||u!==o.length)return!1;r+=o.join("<")+"<",r+=i.join("<")+"<";let d=!1;for(const e of s){const t=e.fields;for(let n=0,r=t.length;n<r;n++)if("FORM_TYPE"===t[n].name&&"hidden"===t[n].type){const r=t[n].value;return a[r]?void(d=!0):(a[r]=e,void c.push(r))}}if(d)return!1;c.sort(oi);for(const e of c){const t=a[e],n={},i=[];r+="<"+e;for(const e of t.fields){const t=e.name;if("FORM_TYPE"!==t){let r=e.value||"";"object"!=typeof r&&(r=r.split("\n")),n[t]=r.sort(oi),i.push(t)}}i.sort(oi);for(const e of i){r+="<"+e;for(const t of n[e])r+="<"+t}}let f=se(n).update(e.from(r,"utf8")).digest("base64"),p=4-f.length%4;4===p&&(p=0);for(let e=0;e<p;e++)f+="=";return f}function xi(e,t,n){const r=Si(e,t);return r&&r===n}class _i{constructor(){this.features={},this.identities={},this.extensions={},this.items={},this.caps={}}addFeature(e,t){t=t||"",this.features[t]||(this.features[t]=[]),this.features[t].push(e)}addIdentity(e,t){t=t||"",this.identities[t]||(this.identities[t]=[]),this.identities[t].push(e)}addItem(e,t){t=t||"",this.items[t]||(this.items[t]=[]),this.items[t].push(e)}addExtension(e,t){t=t||"",this.extensions[t]||(this.extensions[t]=[]),this.extensions[t].push(e)}}function Ci(e){e.disco=new _i(e),e.disco.addFeature(Ae),e.disco.addFeature(je),e.disco.addIdentity({category:"client",type:"web"}),e.registerFeature("caps",100,function(t,n){this.emit("disco:caps",{caps:t.caps,from:new S(e.jid.domain||e.config.server)}),this.features.negotiated.caps=!0,n()}),e.getDiscoInfo=function(e,t,n){return this.sendIq({discoInfo:{node:t},to:e,type:"get"},n)},e.getDiscoItems=function(e,t,n){return this.sendIq({discoItems:{node:t},to:e,type:"get"},n)},e.updateCaps=function(){let t=this.config.capsNode||"https://stanzajs.org";const n=JSON.parse(JSON.stringify({extensions:this.disco.extensions[""],features:this.disco.features[""],identities:this.disco.identities[""]})),r=Si(n,"sha-1");return this.disco.caps={hash:"sha-1",node:t,ver:r},t=t+"#"+r,this.disco.features[t]=n.features,this.disco.identities[t]=n.identities,this.disco.extensions[t]=n.extensions,e.getCurrentCaps()},e.getCurrentCaps=function(){const t=e.disco.caps;if(!t.ver)return{ver:null,discoInfo:null};const n=t.node+"#"+t.ver;return{discoInfo:{extensions:e.disco.extensions[n],features:e.disco.features[n],identities:e.disco.identities[n]},ver:t.ver}},e.on("presence",function(t){t.caps&&e.emit("disco:caps",t)}),e.on("iq:get:discoInfo",function(t){let n=t.discoInfo.node||"",r=t.discoInfo.node||"";n===e.disco.caps.node+"#"+e.disco.caps.ver&&(r=n,n=""),e.sendIq(t.resultReply({discoInfo:{extensions:e.disco.extensions[n]||[],features:e.disco.features[n]||[],identities:e.disco.identities[n]||[],node:r}}))}),e.on("iq:get:discoItems",function(t){const n=t.discoItems.node;e.sendIq(t.resultReply({discoItems:{items:e.disco.items[n]||[],node:n}}))}),e.verifyVerString=xi,e.generateVerString=Si,e.updateCaps()}function Ti(e){e.disco.addFeature("jid\\20escaping"),e.disco.addFeature(Et),e.disco.addFeature(ln),e.disco.addFeature(qt),e.disco.addFeature(Bt),e.disco.addFeature(Kt),e.disco.addFeature(en),e.disco.addFeature(Qe),e.disco.addFeature($t),e.disco.addFeature(un),e.disco.addFeature(at),e.disco.addFeature(`${at}#SubID`,at);const t=["sha-1","sha-256","sha-512","md5"];for(const n of t)e.disco.addFeature(zt(n))}function ki(e){e.disco.addFeature(jt),e.getAttention=function(t,n){(n=n||{}).to=t,n.type="headline",n.attention=!0,e.sendMessage(n)},e.on("message",function(t){t.attention&&e.emit("attention",t)})}function Ei(e){e.disco.addFeature(ft(Xe)),e.on("pubsub:event",function(t){t.event.updated&&t.event.updated.node===Xe&&e.emit("avatar",{avatars:t.event.updated.published[0].avatars,jid:t.from,source:"pubsub"})}),e.on("presence",function(t){t.avatarId&&e.emit("avatar",{avatars:[{id:t.avatarId}],jid:t.from,source:"vcard"})}),e.publishAvatar=function(e,t,n){return this.publish("",Je,{avatarData:t,id:e},n)},e.useAvatars=function(e,t){return this.publish("",Xe,{avatars:e,id:"current"},t)},e.getAvatar=function(e,t,n){return this.getItem(e,Je,t,n)}}function Ri(e){e.disco.addFeature(_t),e.block=function(t,n){return e.sendIq({block:{jids:[t]},type:"set"},n)},e.unblock=function(t,n){return e.sendIq({type:"set",unblock:{jids:[t]}},n)},e.getBlocked=function(t){return e.sendIq({blockList:!0,type:"get"},t)},e.on("iq:set:block",function(t){e.emit("block",{jids:t.block.jids||[]}),e.sendIq(t.resultReply())}),e.on("iq:set:unblock",function(t){e.emit("unblock",{jids:t.unblock.jids||[]}),e.sendIq(t.resultReply())})}function Pi(e){e.disco.addFeature(It),e.getBits=function(t,n,r){return e.sendIq({bob:{cid:n},to:t,type:"get"},r)}}function Ai(e){e.getBookmarks=function(e){return this.getPrivateData({bookmarks:!0},e)},e.setBookmarks=function(e,t){return this.setPrivateData({bookmarks:e},t)},e.addBookmark=function(t,n){return t.jid=new S(t.jid),this.getBookmarks().then(function(n){const r=n.privateStorage.bookmarks.conferences||[];let i=!1;for(let e=0;e<r.length;e++){const n=r[e];if(n.jid.bare===t.jid.bare){r[e]=Object.assign({},n,t),i=!0;break}}return i||r.push(t),e.setBookmarks({conferences:r})}).then(function(e){return n&&n(null,e),e},function(e){if(!n)throw e;n(e)})},e.removeBookmark=function(t,n){return t=new S(t),this.getBookmarks().then(function(n){let r=n.privateStorage.bookmarks.conferences||[];return r=r.filter(e=>t.bare!==e.jid.bare),e.setBookmarks({conferences:r})}).then(function(e){n&&n(null,e)},function(e){if(!n)throw e;n(e)})}}function ji(e){e.disco.addFeature(Lt),e.enableCarbons=function(e){return this.sendIq({enableCarbons:!0,type:"set"},e)},e.disableCarbons=function(e){return this.sendIq({disableCarbons:!0,type:"set"},e)},e.on("message",function(t){return t.carbonSent?e.emit("carbon:sent",t):t.carbonReceived?e.emit("carbon:received",t):void 0}),e.on("carbon:*",function(t,n){const r=t.split(":")[1];if(n.from.bare!==e.jid.bare)return;let i,o;"received"===r?(i=n.carbonReceived.forwarded.message,o=n.carbonReceived.forwarded.delay):(i=n.carbonSent.forwarded.message,o=n.carbonSent.forwarded.delay),i.delay||(i.delay={stamp:o?o.stamp:new Date(Date.now())}),i.carbon=!0,i.from.bare===e.jid.bare?e.emit("message:sent",i):e.emit("message",i)})}function Ii(e){e.disco.addFeature(Ze);const t=["chat","groupchat","normal"];e.on("message",function(n){t.indexOf(n.type||"normal")<0||n.chatState&&(e.emit("chat:state",{chatState:n.chatState,from:n.from,to:n.to}),e.emit("chatState",{chatState:n.chatState,from:n.from,to:n.to}))})}function Oi(e){e.disco.addFeature(qe),e.disco.addItem({name:"Ad-Hoc Commands",node:qe}),e.getCommands=function(t,n){return e.getDiscoItems(t,qe,n)}}function Mi(e){e.disco.addFeature(Gt),e.on("message",function(t){t.replace&&(e.emit("replace",t),e.emit("replace:"+t.id,t))})}function Di(e,t){const n=t.getDefinition("active",sn),r=t.getDefinition("inactive",sn);e.registerFeature("clientStateIndication",400,function(e,t){this.features.negotiated.clientStateIndication=!0,t()}),e.markActive=function(){this.features.negotiated.clientStateIndication&&this.send(new n)},e.markInactive=function(){this.features.negotiated.clientStateIndication&&this.send(new r)}}function Ni(e){e.disco.addFeature(Pe),e.disco.addFeature(At),e.disco.addFeature(ot),e.disco.addFeature(ct),e.on("message",function(t){t.form&&e.emit("dataform",t)})}function Li(e){e.disco.addFeature(Pt),e.getServices=function(e,t,n){return this.sendIq({services:{type:t},to:e,type:"get"},n)},e.getServiceCredentials=function(e,t,n){return this.sendIq({credentials:{service:{host:t}},to:e,type:"get"},n)}}function Fi(e){e.disco.addFeature(Ye),e.disco.addFeature(ft(Ye)),e.on("pubsub:event",function(t){t.event.updated&&t.event.updated.node===Ye&&e.emit("geoloc",{geoloc:t.event.updated.published[0].geoloc,jid:t.from})}),e.publishGeoLoc=function(e,t){return this.publish("",Ye,{geoloc:e},t)}}function Ui(e){e.goInvisible=function(e){return this.sendIq({invisible:!0,type:"set"},e)},e.goVisible=function(e){return this.sendIq({type:"set",visible:!0},e)}}function qi(e){e.prepJID=function(t,n){return e.sendIq({jidPrep:t,to:e.jid.domain,type:"get"},n)}}const Bi={Initiator:"initiator",Responder:"responder"},zi={Inactive:"inactive",Receive:"recvonly",Send:"sendonly",SendReceive:"sendrecv"},Vi={Both:"both",Initiator:"initiator",None:"none",Responder:"responder"};function Wi(e,t="both"){const n=e===Bi.Initiator;switch(t){case Vi.Initiator:return n?zi.Send:zi.Receive;case Vi.Responder:return n?zi.Receive:zi.Send;case Vi.Both:return zi.SendReceive}return zi.Inactive}function Gi(e,t="sendrecv"){const n=e===Bi.Initiator;switch(t){case zi.Send:return n?Vi.Initiator:Vi.Responder;case zi.Receive:return n?Vi.Responder:Vi.Initiator;case zi.SendReceive:return Vi.Both}return Vi.None}function $i(e,t){const n=e.rtpParameters,r=e.rtcpParameters||{},i=e.rtpEncodingParameters||[];let o=!1;i&&i.length&&(o=!!i[0].ssrc);const s={applicationType:"rtp",headerExtensions:[],media:e.kind,mux:r.mux,payloads:[],reducedSize:r.reducedSize,sourceGroups:[],sources:[],ssrc:o?i[0].ssrc.toString():void 0,streams:[]};for(const e of n.headerExtensions||[])s.headerExtensions.push({id:e.id,senders:e.direction&&"sendrecv"!==e.direction?Gi(t,e.direction):void 0,uri:e.uri});r.ssrc&&r.cname&&(s.sources=[{parameters:[{key:"cname",value:r.cname}],ssrc:r.ssrc.toString()}]),o&&i[0]&&i[0].rtx&&(s.sourceGroups=[{semantics:"FID",sources:[i[0].ssrc.toString(),i[0].rtx.ssrc.toString()]}]);for(const t of e.streams||[])s.streams.push({id:t.stream,track:t.track});for(const e of n.codecs||[]){const t={channels:e.channels.toString(),clockrate:e.clockRate.toString(),feedback:[],id:e.payloadType.toString(),maxptime:e.maxptime?e.maxptime.toString():void 0,name:e.name,parameters:[]};for(const n of Object.keys(e.parameters||{}))"ptime"!==n?t.parameters.push({key:n,value:e.parameters[n]}):t.ptime=e.parameters[n].toString();for(const n of e.rtcpFeedback||[])t.feedback.push({subtype:n.parameter,type:n.type});s.payloads.push(t)}return s}function Hi(e){return{component:e.component.toString(),foundation:e.foundation,generation:void 0,id:void 0,ip:e.ip,network:void 0,port:e.port.toString(),priority:e.priority.toString(),protocol:e.protocol,relAddr:e.relatedAddress,relPort:e.relatedPort?e.relatedPort.toString():void 0,tcpType:e.tcpType,type:e.type}}function Qi(e){const t=e.iceParameters,n=e.dtlsParameters,r={candidates:[],transportType:"iceUdp"};t&&(r.ufrag=t.usernameFragment,r.pwd=t.password),n&&(r.fingerprints=n.fingerprints.map(t=>({hash:t.algorithm,setup:e.setup,value:t.value}))),e.sctp&&(r.sctp=[e.sctp]);for(const t of e.candidates||[])r.candidates.push(Hi(t));return r}function Ki(e,t){return{contents:e.media.map(e=>{return{application:"audio"===e.kind||"video"===e.kind?$i(e,t):{applicationType:"datachannel",protocol:e.protocol},creator:Bi.Initiator,name:e.mid,senders:Gi(t,e.direction),transport:Qi(e)}}),groups:e.groups?e.groups.map(e=>({contents:e.mids,semantics:e.semantics})):void 0}}function Yi(e,t){const n=e.application||{},r=e.transport,i=n&&"rtp"===n.applicationType,o={direction:Wi(t,e.senders),kind:n.media||"application",mid:e.name,protocol:i?"UDP/TLS/RTP/SAVPF":"UDP/DTLS/SCTP"};if(i){if(o.rtcpParameters={mux:n.mux,reducedSize:n.reducedSize},n.sources&&n.sources.length){const e=n.sources[0];if(o.rtcpParameters.ssrc=parseInt(e.ssrc,10),e.parameters){const t=e.parameters.find(e=>"cname"===e.key);o.rtcpParameters.cname=t?t.value:void 0}}if(o.rtpParameters={codecs:[],fecMechanisms:[],headerExtensions:[]},n.streams){o.streams=[];for(const e of n.streams)o.streams.push({stream:e.id,track:e.track})}if(n.ssrc&&(o.rtpEncodingParameters=[{ssrc:parseInt(n.ssrc,10)}],n.sourceGroups&&n.sourceGroups.length)){const e=n.sourceGroups[0];o.rtpEncodingParameters[0].rtx={ssrc:parseInt(e.sources[1],10)}}for(const e of n.payloads||[]){const t={};for(const n of e.parameters||[])t[n.key]=n.value;const n=[];for(const t of e.feedback||[])n.push({parameter:t.subtype,type:t.type});o.rtpParameters.codecs.push({channels:parseInt(e.channels,10),clockRate:parseInt(e.clockrate,10),name:e.name,numChannels:parseInt(e.channels,10),parameters:t,payloadType:parseInt(e.id,10),rtcpFeedback:n})}for(const e of n.headerExtensions||[])o.rtpParameters.headerExtensions.push({direction:e.senders&&"both"!==e.senders?Wi(t,e.senders):void 0,id:e.id,uri:e.uri})}if(r&&(r.ufrag&&r.pwd&&(o.iceParameters={password:r.pwd,usernameFragment:r.ufrag}),r.fingerprints&&r.fingerprints.length)){o.dtlsParameters={fingerprints:[],role:"auto"};for(const e of r.fingerprints)o.dtlsParameters.fingerprints.push({algorithm:e.hash,value:e.value});r.sctp&&(o.sctp=r.sctp[0]),o.setup=r.fingerprints[0].setup}return o}function Ji(e,t){const n={groups:[],media:[]};for(const t of e.groups||[])n.groups.push({mids:t.contents,semantics:t.semantics});for(const r of e.contents||[])n.media.push(Yi(r,t));return n}function Xi(e){if(Object(l.matchPrefix)(e,"a=sctpmap:").length>0){const t=Object(l.matchPrefix)(e,"a=sctpmap:")[0].substr(10).split(" ");return{number:t[0],protocol:t[1],streams:t[2]}}return{number:Object(l.matchPrefix)(e,"a=sctp-port:")[0].substr(12),protocol:"webrtc-datachannel",streams:"1024"}}function Zi(e,t){return[`m=${e.kind} 9 ${e.protocol} ${t.protocol}\r\n`,"c=IN IP4 0.0.0.0\r\n",`a=sctp-port:${t.number}\r\n`].join("")}function eo(e){const t=Object(l.getMediaSections)(e),n=Object(l.getDescription)(e),r={groups:[],media:[]};for(const e of Object(l.matchPrefix)(n,"a=group:")){const t=e.split(" "),n=t.shift().substr(8);r.groups.push({mids:t,semantics:n})}for(const e of t){const t=Object(l.getKind)(e),i=Object(l.isRejected)(e),o=Object(l.parseMLine)(e),s={direction:Object(l.getDirection)(e,n),kind:t,mid:Object(l.getMid)(e),protocol:o.protocol};if(i||(s.iceParameters=Object(l.getIceParameters)(e,n),s.dtlsParameters=Object(l.getDtlsParameters)(e,n),s.setup=Object(l.matchPrefix)(e,"a=setup:")[0].substr(8)),"audio"===t||"video"===t){s.rtpParameters=Object(l.parseRtpParameters)(e),s.rtpEncodingParameters=Object(l.parseRtpEncodingParameters)(e),s.rtcpParameters=Object(l.parseRtcpParameters)(e);const t=Object(l.parseMsid)(e);s.streams=t?[t]:[]}else"application"===t&&(s.sctp=Xi(e));s.candidates=Object(l.matchPrefix)(e,"a=candidate:").map(l.parseCandidate),r.media.push(s)}return r}function to(e){const t=[];t.push(Object(l.writeSessionBoilerplate)(e.sessionId,e.sessionVersion),"a=msid-semantic:WMS *\r\n"),e.iceLite&&t.push("a=ice-lite\r\n");for(const n of e.groups||[])t.push(`a=group:${n.semantics} ${n.mids.join(" ")}\r\n`);for(const n of e.media||[]){const e=!(n.iceParameters&&n.dtlsParameters);if("application"===n.kind&&n.sctp)t.push(Zi(n,n.sctp));else if(n.rtpParameters){let r=Object(l.writeRtpDescription)(n.kind,n.rtpParameters);e&&(r=r.replace(`m=${n.kind} 9 `,`m=${n.kind} 0 `)),t.push(r),t.push(`a=${n.direction||"sendrecv"}\r\n`);for(const e of n.streams||[])t.push(`a=msid:${e.stream} ${e.track}\r\n`);if(n.rtcpParameters&&n.rtcpParameters.cname&&(t.push(`a=ssrc:${n.rtcpParameters.ssrc} cname:${n.rtcpParameters.cname}\r\n`),n.rtpEncodingParameters&&n.rtpEncodingParameters[0].rtx)){const e=n.rtpEncodingParameters[0];t.push(`a=ssrc-group:FID ${e.ssrc} ${e.rtx.ssrc}\r\n`),t.push(`a=ssrc:${e.rtx.ssrc} cname:${n.rtcpParameters.cname}\r\n`)}}if(void 0!==n.mid&&t.push(`a=mid:${n.mid}\r\n`),n.iceParameters&&t.push(Object(l.writeIceParameters)(n.iceParameters)),n.dtlsParameters&&n.setup&&t.push(Object(l.writeDtlsParameters)(n.dtlsParameters,n.setup)),n.candidates&&n.candidates.length)for(const e of n.candidates)t.push(`a=${Object(l.writeCandidate)(e)}`)}return t.join("")}class no extends ni{constructor(e){super(),this.sid=e.sid||si(),this.peerID=e.peerID,this.role=e.initiator?"initiator":"responder",this.parent=e.parent,this.state="starting",this.connectionState="starting",this.pendingApplicationTypes=e.applicationTypes||[],this.pendingAction=!1,this.processingQueue=Object(c.a)((e,t)=>Object(a.__awaiter)(this,void 0,void 0,function*(){if("ended"===this.state)return e.reject&&e.reject(new Error("Session ended")),t();if("local"===e.type){this._log("debug","Processing local action:",e.name);try{const t=yield e.handler();e.resolve(t)}catch(t){e.reject(t)}return t?t():void 0}const{action:n,changes:r,cb:i}=e;return this._log("debug","Processing remote action:",n),new Promise(e=>{const o=(n,r)=>{i(n,r),t&&t(),e()};switch(n){case"content-accept":return this.onContentAccept(r,o);case"content-add":return this.onContentAdd(r,o);case"content-modify":return this.onContentModify(r,o);case"content-reject":return this.onContentReject(r,o);case"content-remove":return this.onContentRemove(r,o);case"description-info":return this.onDescriptionInfo(r,o);case"security-info":return this.onSecurityInfo(r,o);case"session-accept":return this.onSessionAccept(r,o);case"session-info":return this.onSessionInfo(r,o);case"session-initiate":return this.onSessionInitiate(r,o);case"session-terminate":return this.onSessionTerminate(r,o);case"transport-accept":return this.onTransportAccept(r,o);case"transport-info":return this.onTransportInfo(r,o);case"transport-reject":return this.onTransportReject(r,o);case"transport-replace":return this.onTransportReplace(r,o);default:this._log("error","Invalid or unsupported action: "+n),o({condition:"bad-request"})}})}))}get isInitiator(){return"initiator"===this.role}get peerRole(){return this.isInitiator?"responder":"initiator"}get state(){return this._sessionState}set state(e){e!==this._sessionState&&(this._log("info","Changing session state to: "+e),this._sessionState=e,this.emit("sessionState",this,e))}get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this._log("info","Changing connection state to: "+e),this._connectionState=e,this.emit("connectionState",this,e))}_log(e,t,...n){t=this.sid+": "+t,this.emit("log:"+e,t,...n)}send(e,t){(t=t||{}).sid=this.sid,t.action=e;this.pendingAction=!!{"content-accept":!0,"content-add":!0,"content-modify":!0,"content-reject":!0,"content-remove":!0,"session-accept":!0,"session-inititate":!0,"transport-accept":!0,"transport-reject":!0,"transport-replace":!0}[e]&&e,this.emit("send",{id:si(),jingle:t,to:this.peerID,type:"set"})}processLocal(e,t){return new Promise((n,r)=>{this.processingQueue.push({handler:t,name:e,reject:r,resolve:n,type:"local"},1)})}process(e,t,n){this.processingQueue.push({action:e,cb:n,changes:t,type:"remote"},2)}start(e,t){this._log("error","Can not start base sessions"),this.end("unsupported-applications",!0)}accept(e,t){this._log("error","Can not accept base sessions"),this.end("unsupported-applications")}cancel(){this.end("cancel")}decline(){this.end("decline")}end(e,t){"ended"!==this.state&&(this.state="ended",this.processingQueue.kill(),e||(e="success"),"string"==typeof e&&(e={condition:e}),t||this.send("session-terminate",{reason:e}),this.emit("terminated",this,e))}onSessionInitiate(e,t){t()}onSessionAccept(e,t){t()}onSessionTerminate(e,t){this.end(e.reason,!0),t()}onSessionInfo(e,t){const n={action:!0,initiator:!0,responder:!0,sid:!0};let r=!1;Object.keys(e).forEach(function(e){n[e]||(r=!0)}),r?t({condition:"feature-not-implemented",jingleCondition:"unsupported-info",type:"modify"}):t()}onSecurityInfo(e,t){t({condition:"feature-not-implemented",jingleCondition:"unsupported-info",type:"modify"})}onDescriptionInfo(e,t){t({condition:"feature-not-implemented",jingleCondition:"unsupported-info",type:"modify"})}onTransportInfo(e,t){t({condition:"feature-not-implemented",jingleCondition:"unsupported-info",type:"modify"})}onContentAdd(e,t){t(),this.send("content-reject",{reason:{condition:"failed-application",text:"content-add is not supported"}})}onContentAccept(e,t){t({condition:"bad-request"})}onContentReject(e,t){t({condition:"bad-request"})}onContentModify(e,t){t({condition:"bad-request"})}onContentRemove(e,t){t({condition:"bad-request"})}onTransportReplace(e,t){t(),this.send("transport-reject",{reason:{condition:"failed-application",text:"transport-replace is not supported"}})}onTransportAccept(e,t){t({condition:"bad-request"})}onTransportReject(e,t){t({condition:"bad-request"})}}const ro=n(2);class io extends no{constructor(e){super(e),this.pc=new RTCPeerConnection(Object.assign({},e.config,{iceServers:e.iceServers}),e.constraints),this.pc.addEventListener("iceconnectionstatechange",()=>{this.onIceStateChange()}),this.pc.addEventListener("icecandidate",e=>{e.candidate?this.onIceCandidate(e):this.onIceEndOfCandidates()}),this.restrictRelayBandwidth(),this.bitrateLimit=0,this.maxRelayBandwidth=e.maxRelayBandwidth,this.candidateBuffer=[],this.restartingIce=!1}end(e,t){this.pc.close(),super.end(e,t)}onTransportInfo(e,t){return Object(a.__awaiter)(this,void 0,void 0,function*(){if(e.contents[0]&&e.contents[0].transport.gatheringComplete){try{"stable"===this.pc.signalingState?yield this.pc.addIceCandidate(null):this.candidateBuffer.push(null)}catch(e){this._log("debug","Could not add null ICE candidate")}finally{t()}return}if(this.pc.remoteDescription){const n=this.pc.remoteDescription,r=eo(n.sdp),i=r.media.find(t=>t.mid===e.contents[0].name).iceParameters.usernameFragment,o=e.contents[0].transport.ufrag;if(o&&i!==o){if(e.contents.forEach((e,t)=>{r.media[t].iceParameters={password:e.transport.pwd,usernameFragment:e.transport.ufrag},r.media[t].candidates=[]}),"offer"===n.type){try{yield this.pc.setRemoteDescription(n),yield this.processBufferedCandidates();const e=yield this.pc.createAnswer(),r={action:"transport-info",contents:eo(e.sdp).media.map(e=>({creator:"initiator",name:e.mid,transport:Qi(e)})),sessionId:this.sid};this.send("transport-info",r),yield this.pc.setLocalDescription(e),t()}catch(e){this._log("error","Could not do remote ICE restart",e),t(e),this.end("failed-transport")}return}try{yield this.pc.setRemoteDescription(n),yield this.processBufferedCandidates(),t()}catch(e){this._log("error","Could not do local ICE restart",e),t(e),this.end("failed-transport")}}}const n=(e.contents||[]).map(e=>{const t=e.name,n=(e.transport.candidates||[]).map(e=>Object(a.__awaiter)(this,void 0,void 0,function*(){e.relatedAddress=e.relAddr,e.relatedPort=e.relPort;const n=ro.writeCandidate(e);let r;const i=this.pc.remoteDescription.sdp,o=ro.getMediaSections(i);for(let e=0;e<o.length;e++)if(ro.getMid(o[e])===t){r=e;break}if("stable"===this.pc.signalingState)try{yield this.pc.addIceCandidate({sdpMid:t,sdpMLineIndex:r,candidate:n})}catch(e){this._log("error","Could not add ICE candidate",e)}else this.candidateBuffer.push({sdpMid:t,sdpMLineIndex:r,candidate:n})}));return Promise.all(n)});try{yield Promise.all(n),t()}catch(e){t(e)}})}onSessionAccept(e,t){return Object(a.__awaiter)(this,void 0,void 0,function*(){this.state="active";const n=to(Ji(e,this.peerRole));try{yield this.pc.setRemoteDescription({type:"answer",sdp:n}),yield this.processBufferedCandidates(),this.emit("accepted",this,void 0),t()}catch(e){this._log("error",`Could not process WebRTC answer: ${e}`),t({condition:"general-error"})}})}onSessionTerminate(e,t){this._log("info","Terminating session"),this.pc.close(),super.end(e.reason,!0),t()}onIceCandidate(e){const t=ro.parseCandidate(e.candidate.candidate),n=function(e,t){return{contents:[{creator:Bi.Initiator,name:e,transport:{candidates:[Hi(t)],transportType:"iceUdp",ufrag:t.usernameFragment||void 0}}]}}(e.candidate.sdpMid,t);n.contents.forEach((e,t)=>{if(!e.transport.ufrag){const n=eo(this.pc.localDescription.sdp);e.transport.ufrag=n.media[t].iceParameters.usernameFragment}}),this._log("info","Discovered new ICE candidate",n),this.send("transport-info",n)}onIceEndOfCandidates(){this._log("info","ICE end of candidates");const e=eo(this.pc.localDescription.sdp).media[0],t={contents:[{name:e.mid,transport:{gatheringComplete:!0,transportType:"iceUdp",ufrag:e.iceParameters.usernameFragment}}]};this.send("transport-info",t)}onIceStateChange(){switch(this.pc.iceConnectionState){case"checking":this.connectionState="connecting";break;case"completed":case"connected":this.connectionState="connected",this.restartingIce=!1;break;case"disconnected":if("stable"===this.pc.signalingState?this.connectionState="interrupted":this.connectionState="disconnected",this.restartingIce)return void this.end("failed-transport");this.maybeRestartIce();break;case"failed":if("failed"===this.connectionState||this.restartingIce)return void this.end("failed-transport");this.connectionState="failed",this.restartIce();break;case"closed":this.connectionState="disconnected",this.restartingIce?this.end("failed-transport"):this.end()}}restrictRelayBandwidth(){window.RTCRtpSender&&"getParameters"in window.RTCRtpSender.prototype&&this.pc.addEventListener("iceconnectionstatechange",()=>Object(a.__awaiter)(this,void 0,void 0,function*(){if("completed"!==this.pc.iceConnectionState&&"connected"!==this.pc.iceConnectionState)return;if(this._firstTimeConnected)return;this._firstTimeConnected=!0;const e=yield this.pc.getStats();let t;if(e.forEach(n=>{"transport"===n.type&&(t=e.get(n.selectedCandidatePairId))}),t||e.forEach(e=>{"candidate-pair"===e.type&&e.selected&&(t=e)}),t){let n=!1;if(t.remoteCandidateId){const r=e.get(t.remoteCandidateId);r&&"relay"===r.candidateType&&(n=!0)}if(t.localCandidateId){const r=e.get(t.localCandidateId);r&&"relay"===r.candidateType&&(n=!0)}n&&(this.maximumBitrate=this.maxRelayBandwidth,this.currentBitrate&&this.setMaximumBitrate(Math.min(this.currentBitrate,this.maximumBitrate)))}}))}processBufferedCandidates(){return Object(a.__awaiter)(this,void 0,void 0,function*(){for(const e of this.candidateBuffer)try{yield this.pc.addIceCandidate(e)}catch(e){this._log("error","Could not add ICE candidate",e)}this.candidateBuffer=[]})}maybeRestartIce(){this.isInitiator&&(void 0!==this._maybeRestartingIce&&clearTimeout(this._maybeRestartingIce),this._maybeRestartingIce=setTimeout(()=>{delete this._maybeRestartingIce,"disconnected"===this.pc.iceConnectionState&&this.restartIce()},2e3))}restartIce(){return Object(a.__awaiter)(this,void 0,void 0,function*(){if(this.isInitiator){void 0!==this._maybeRestartingIce&&clearTimeout(this._maybeRestartingIce),this.restartingIce=!0;try{yield this.processLocal("restart-ice",()=>Object(a.__awaiter)(this,void 0,void 0,function*(){const e=yield this.pc.createOffer({iceRestart:!0}),t={action:"transport-info",contents:eo(e.sdp).media.map(e=>({creator:"initiator",name:e.mid,transport:Qi(e)})),sessionId:this.sid};this.send("transport-info",t),yield this.pc.setLocalDescription(e)}))}catch(e){this._log("error","Could not create WebRTC offer",e),this.end("failed-transport")}}})}setMaximumBitrate(e){return Object(a.__awaiter)(this,void 0,void 0,function*(){if(this.maximumBitrate&&(e=Math.min(e,this.maximumBitrate)),this.currentBitrate=e,!(window.RTCRtpSender&&"getParameters"in window.RTCRtpSender.prototype))return;const t=this.pc.getSenders().find(e=>e.track&&"video"===e.track.kind);if(!t)return;let n="";window.navigator&&window.navigator.mozGetUserMedia?n="firefox":window.navigator&&window.navigator.webkitGetUserMedia&&(n="chrome");const r=t.getParameters();"firefox"!==n||r.encodings||(r.encodings=[{}]),0===e?delete r.encodings[0].maximumBitrate:(r.encodings.length||(r.encodings[0]={}),r.encodings[0].maxBitrate=e);try{yield this.processLocal("set-bitrate",()=>Object(a.__awaiter)(this,void 0,void 0,function*(){if("chrome"===n)yield t.setParameters(r);else if("firefox"===n)if("stable"!==this.pc.signalingState)yield t.setParameters(r);else if(this.pc.localDescription&&"offer"===this.pc.localDescription.type){yield t.setParameters(r);const e=yield this.pc.createOffer();yield this.pc.setLocalDescription(e),yield this.pc.setRemoteDescription(this.pc.remoteDescription),yield this.processBufferedCandidates()}else if(this.pc.localDescription&&"answer"===this.pc.localDescription.type){yield t.setParameters(r),yield this.pc.setRemoteDescription(this.pc.remoteDescription),yield this.processBufferedCandidates();const e=yield this.pc.createAnswer();yield this.pc.setLocalDescription(e)}}))}catch(e){this._log("error","setParameters failed",e)}})}}class oo extends u.EventEmitter{constructor(e={}){super(),this.config=Object.assign({chunkSize:16384,hash:"sha-1"},e),this.file=null,this.channel=null,this.hash=se(this.config.hash)}send(e,t){if(this.file&&this.channel)return;this.file=e,this.channel=t,this.channel.binaryType="arraybuffer";const n=new FileReader;let r=0,i=!1;n.addEventListener("load",t=>{const n=t.target.result;i=!1,r+=n.byteLength,this.channel.send(n),this.hash.update(new Uint8Array(n)),this.emit("progress",r,e.size,n),r<e.size?this.channel.bufferedAmount<=this.channel.bufferedAmountLowThreshold&&o():(this.emit("progress",e.size,e.size,null),this.emit("sentFile",{algo:this.config.hash,hash:this.hash.digest("hex")}))});const o=()=>{if(i||r>=e.size)return;i=!0;const t=e.slice(r,r+this.config.chunkSize);n.readAsArrayBuffer(t)};t.bufferedAmountLowThreshold=8*this.config.chunkSize,t.onbufferedamountlow=(()=>{o()}),o()}}class so extends u.EventEmitter{constructor(e={}){super(),this.config=Object.assign({hash:"sha-1"},e),this.receiveBuffer=[],this.received=0,this.metadata={},this.channel=null,this.hash=se(this.config.hash)}receive(e,t){e&&(this.metadata=e),this.channel=t,this.channel.binaryType="arraybuffer",this.channel.onmessage=(e=>{const t=e.data.byteLength;this.received+=t,this.receiveBuffer.push(e.data),e.data&&this.hash.update(new Uint8Array(e.data)),this.emit("progress",this.received,this.metadata.size,e.data),this.received===this.metadata.size?(this.metadata.actualhash=this.hash.digest("hex"),this.emit("receivedFile",new Blob(this.receiveBuffer),this.metadata),this.receiveBuffer=[]):this.received>this.metadata.size&&(console.error("received more than expected, discarding..."),this.receiveBuffer=[])})}}class ao extends io{constructor(e){super(e),this.sender=null,this.receiver=null,this.file=null}start(e,t){return Object(a.__awaiter)(this,void 0,void 0,function*(){t=t||(()=>void 0),this.state="pending",this.role="initiator",this.file=e,this.sender=new oo,this.sender.on("progress",(e,t)=>{this._log("info","Send progress "+e+"/"+t)}),this.sender.on("sentFile",e=>{this._log("info","Sent file",e.name),this.send("description-info",{contents:[{application:{applicationType:"filetransfer",offer:{hash:{algo:e.algo,value:e.hash}}},creator:"initiator",name:this.contentName}]}),this.emit("sentFile",this,e)}),this.channel=this.pc.createDataChannel("filetransfer",{ordered:!0}),this.channel.onopen=(()=>{this.sender.send(this.file,this.channel)});try{yield this.processLocal("session-initiate",()=>Object(a.__awaiter)(this,void 0,void 0,function*(){const t=yield this.pc.createOffer({offerToReceiveAudio:!1,offerToReceiveVideo:!1}),n=Ki(eo(t.sdp),this.role);this.contentName=n.contents[0].name,n.sessionId=this.sid,n.action="session-initate",n.contents[0].application={applicationType:"filetransfer",offer:{date:e.lastModifiedDate,hash:{algo:"sha-1",value:""},name:e.name,size:e.size}},this.send("session-initiate",n),yield this.pc.setLocalDescription(t)})),t()}catch(e){return this._log("error","Could not create WebRTC offer",e),this.end("failed-application",!0)}})}accept(e){return Object(a.__awaiter)(this,void 0,void 0,function*(){this._log("info","Accepted incoming session"),this.role="responder",this.state="active",e=e||(()=>void 0);try{yield this.processLocal("session-accept",()=>Object(a.__awaiter)(this,void 0,void 0,function*(){const e=yield this.pc.createAnswer(),t=Ki(eo(e.sdp),this.role);t.sessionId=this.sid,t.action="session-accept",t.contents.forEach(e=>{e.creator="initiator"}),this.contentName=t.contents[0].name,this.send("session-accept",t),yield this.pc.setLocalDescription(e)})),e()}catch(e){this._log("error","Could not create WebRTC answer",e),this.end("failed-application")}})}onSessionInitiate(e,t){return Object(a.__awaiter)(this,void 0,void 0,function*(){this._log("info","Initiating incoming session"),this.role="responder",this.state="pending";const n=to(Ji(e,this.peerRole)),r=e.contents[0].application;this.receiver=new so({hash:r.offer.hash.algo}),this.receiver.on("progress",(e,t)=>{this._log("info","Receive progress "+e+"/"+t)}),this.receiver.on("receivedFile",e=>{this.receivedFile=e,this._maybeReceivedFile()}),this.receiver.metadata=r.offer,this.pc.addEventListener("datachannel",e=>{this.channel=e.channel,this.receiver.receive(null,e.channel)});try{yield this.pc.setRemoteDescription({type:"offer",sdp:n}),yield this.processBufferedCandidates(),t()}catch(e){this._log("error","Could not create WebRTC answer",e),t({condition:"general-error"})}})}onDescriptionInfo(e,t){const n=e.contents[0].application.offer.hash;this.receiver.metadata.hash=n,this.receiver.metadata.actualhash&&this._maybeReceivedFile(),t()}_maybeReceivedFile(){this.receiver.metadata.hash.value&&(this.receiver.metadata.hash.value===this.receiver.metadata.actualhash?(this._log("info","File hash matches"),this.emit("receivedFile",this,this.receivedFile,this.receiver.metadata),this.end("success")):(this._log("error","File hash does not match"),this.end("media-error")))}}class co extends io{constructor(e){if(super(e),this.pc.addEventListener("track",e=>{this.onAddTrack(e.track,e.streams[0])}),e.stream)for(const t of e.stream.getTracks())this.addTrack(t,e.stream);this._ringing=!1}start(e,t){return Object(a.__awaiter)(this,void 0,void 0,function*(){this.state="pending",t=t||(()=>void 0),this.role="initiator",this.offerOptions=e;try{yield this.processLocal("session-initiate",()=>Object(a.__awaiter)(this,void 0,void 0,function*(){const t=yield this.pc.createOffer(e),n=Ki(eo(t.sdp),this.role);n.sessionId=this.sid,n.action="session-initate",n.contents.forEach(e=>{e.creator="initiator",function(e){if(e.application.streams&&e.application.streams.length&&e.application.sources&&e.application.sources.length){const t=e.application.streams[0];e.application.sources[0].parameters.push({key:"msid",value:`${t.id} ${t.track}`}),e.application.sourceGroups&&e.application.sourceGroups.length>0&&e.application.sources.push({parameters:[{key:"cname",value:e.application.sources[0].parameters[0].value},{key:"msid",value:`${t.id} ${t.track}`}],ssrc:e.application.sourceGroups[0].sources[1]})}}(e)}),yield this.pc.setLocalDescription(t),this.send("session-initiate",n)})),t()}catch(e){this._log("error","Could not create WebRTC offer",e),this.end("failed-application",!0)}})}accept(e,t){return Object(a.__awaiter)(this,arguments,void 0,function*(){1===arguments.length&&"function"==typeof e&&(t=e,e={}),t=t||(()=>void 0),e=e||{},this._log("info","Accepted incoming session"),this.state="active",this.role="responder";try{yield this.processLocal("session-accept",()=>Object(a.__awaiter)(this,void 0,void 0,function*(){const t=yield this.pc.createAnswer(e),n=Ki(eo(t.sdp),this.role);n.sessionId=this.sid,n.action="session-accept",n.contents.forEach(e=>{e.creator="initiator"}),yield this.pc.setLocalDescription(t),this.send("session-accept",n)})),t()}catch(e){this._log("error","Could not create WebRTC answer",e),this.end("failed-application")}})}end(e,t){this.pc.getReceivers().forEach(e=>{this.onRemoveTrack(e.track)}),super.end(e,t)}ring(){return this.processLocal("ring",()=>{this._log("info","Ringing on incoming session"),this.ringing=!0,this.send("session-info",{ringing:!0})})}mute(e,t){return this.processLocal("mute",()=>{this._log("info","Muting",t),this.send("session-info",{mute:{creator:e,name:t}})})}unmute(e,t){return this.processLocal("unmute",()=>{this._log("info","Unmuting",t),this.send("session-info",{unmute:{creator:e,name:t}})})}hold(){return this.processLocal("hold",()=>{this._log("info","Placing on hold"),this.send("session-info",{hold:!0})})}resume(){return this.processLocal("resume",()=>{this._log("info","Resuming from hold"),this.send("session-info",{active:!0})})}addTrack(e,t,n){return this.processLocal("addtrack",()=>Object(a.__awaiter)(this,void 0,void 0,function*(){this.pc.addTrack?this.pc.addTrack(e,t):this.pc.addStream(t),n&&n()}))}removeTrack(e,t){return Object(a.__awaiter)(this,void 0,void 0,function*(){return this.processLocal("removetrack",()=>Object(a.__awaiter)(this,void 0,void 0,function*(){if(this.pc.removeTrack(e),t)return t()}))})}onAddTrack(e,t){this._log("info","Track added"),this.emit("peerTrackAdded",this,e,t)}onRemoveTrack(e){this._log("info","Track removed"),this.emit("peerTrackRemoved",this,e)}onSessionInitiate(e,t){return Object(a.__awaiter)(this,void 0,void 0,function*(){this._log("info","Initiating incoming session"),this.state="pending",this.role="responder";const n=Ji(e,this.peerRole);n.media.forEach(e=>{e.streams||(e.streams=[{stream:"legacy",track:e.kind}])});const r=to(n);try{return yield this.pc.setRemoteDescription({type:"offer",sdp:r}),yield this.processBufferedCandidates(),t()}catch(e){return this._log("error","Could not create WebRTC answer",e),t({condition:"general-error"})}})}onSessionTerminate(e,t){for(const e of this.pc.getReceivers())this.onRemoveTrack(e.track);super.onSessionTerminate(e,t)}onSessionInfo(e,t){return e.ringing?(this._log("info","Outgoing session is ringing"),this.ringing=!0,this.emit("ringing",this),t()):e.hold?(this._log("info","On hold"),this.emit("hold",this),t()):e.active?(this._log("info","Resuming from hold"),this.emit("resumed",this),t()):e.mute?(this._log("info","Muting",e.mute),this.emit("mute",this,e.mute),t()):e.unmute?(this._log("info","Unmuting",e.unmute),this.emit("unmute",this,e.unmute),t()):t()}get ringing(){return this._ringing}set ringing(e){e!==this._ringing&&(this._ringing=e,this.emit("change:ringing",e))}get streams(){return"closed"!==this.pc.signalingState?this.pc.getRemoteStreams():[]}}const uo=786432;class lo extends ni{constructor(e){super(),e=e||{},this.selfID=e.selfID,this.sessions={},this.peers={},this.iceServers=e.iceServers||[{urls:"stun:stun.l.google.com:19302"}],this.prepareSession=e.prepareSession||function(e){return e.applicationTypes.indexOf("rtp")>=0?new co(e):e.applicationTypes.indexOf("filetransfer")>=0?new ao(e):void 0},this.performTieBreak=e.performTieBreak||function(e,t){const n=t.jingle.contents.map(e=>{if(e.application)return e.application.applicationType});return e.pendingApplicationTypes.filter(e=>n.includes(e)).length>0},this.config=Object.assign({debug:!1,peerConnectionConfig:{bundlePolicy:e.bundlePolicy||"balanced",iceTransportPolicy:e.iceTransportPolicy||"all",rtcpMuxPolicy:e.rtcpMuxPolicy||"require"},peerConnectionConstraints:{optional:[{DtlsSrtpKeyAgreement:!0},{RtpDataChannels:!1}]}},e)}addICEServer(e){"string"==typeof e&&(e={urls:e}),this.iceServers.push(e)}resetICEServers(){this.iceServers=[]}addSession(e){const t=e.sid,n=e.peerID;return this.sessions[t]=e,this.peers[n]||(this.peers[n]=[]),this.peers[n].push(e),e.on("terminated",()=>{const r=this.peers[n]||[];r.length&&r.splice(r.indexOf(e),1),delete this.sessions[t]}),e.on("*",(t,n,...r)=>{if("send"===t){const t=n.jingle&&n.jingle.action;e.isInitiator&&"session-initiate"===t&&this.emit("outgoing",e)}!this.config.debug||"log:debug"!==t&&"log:error"!==t||console.log("Jingle:",n,...r),0!==t.indexOf("change")&&this.emit(t,n,...r)}),this.emit("createdSession",e),e}createMediaSession(e,t,n){e=e.full||e;const r=new co({config:this.config.peerConnectionConfig,constraints:this.config.peerConnectionConstraints,iceServers:this.iceServers,initiator:!0,maxRelayBandwidth:uo,parent:this,peerID:e,sid:t,stream:n});return this.addSession(r),r}createFileTransferSession(e,t){e=e.full||e;const n=new ao({config:this.config.peerConnectionConfig,constraints:this.config.peerConnectionConstraints,iceServers:this.iceServers,initiator:!0,maxRelayBandwidth:uo,parent:this,peerID:e,sid:t});return this.addSession(n),n}endPeerSessions(e,t,n){e=e.full||e;const r=this.peers[e]||[];delete this.peers[e],r.forEach(function(e){e.end(t||"gone",n)})}endAllSessions(e,t){Object.keys(this.peers).forEach(n=>{this.endPeerSessions(n,e,t)})}_createIncomingSession(e,t){let n;return this.prepareSession&&(n=this.prepareSession(e,t)),n||(n=new no(e)),this.addSession(n),n}_sendError(e,t,n){n.type||(n.type="cancel"),this.emit("send",{error:n,id:t,to:e,type:"error"})}_log(e,t,...n){this.emit("log:"+e,t,...n)}process(e){const t=this,n=e.jingle?e.jingle.sid:null;let r=this.sessions[n]||null;const i=e.id,o=e.from?e.from.full||e.from:void 0;if("error"===e.type){const t=e.error&&"tie-break"===e.error.jingleCondition;return r&&"pending"===r.state&&t?r.end("alternative-session",!0):(r&&(r.pendingAction=!1),this.emit("error",e))}if("result"===e.type)return void(r&&(r.pendingAction=!1));const s=e.jingle.action,a=e.jingle.contents||[],c=a.map(function(e){if(e.application)return e.application.applicationType}),u=a.map(function(e){if(e.transport)return e.transport.transportType});if("session-initiate"!==s){if(!r)return"session-terminate"===s?this.emit("send",{id:i,to:o,type:"result"}):(this._log("error","Unknown session",n),this._sendError(o,i,{condition:"item-not-found",jingleCondition:"unknown-session"}));if(r.peerID!==o||"ended"===r.state)return this._log("error","Session has ended, or action has wrong sender"),this._sendError(o,i,{condition:"item-not-found",jingleCondition:"unknown-session"});if("session-accept"===s&&"pending"!==r.state)return this._log("error","Tried to accept session twice",n),this._sendError(o,i,{condition:"unexpected-request",jingleCondition:"out-of-order"});if("session-terminate"!==s&&s===r.pendingAction&&(this._log("error","Tie break during pending request"),r.isInitiator))return this._sendError(o,i,{condition:"conflict",jingleCondition:"tie-break"})}else if(r){if(r.peerID!==o)return this._log("error","Duplicate sid from new sender"),this._sendError(o,i,{condition:"service-unavailable"});if("pending"!==r.state)return this._log("error","Someone is doing this wrong"),this._sendError(o,i,{condition:"unexpected-request",jingleCondition:"out-of-order"});if(this.selfID>r.peerID&&this.performTieBreak(r,e))return this._log("error","Tie break new session because of duplicate sids"),this._sendError(o,i,{condition:"conflict",jingleCondition:"tie-break"})}else if(this.peers[o]&&this.peers[o].length)for(let t=0,r=this.peers[o].length;t<r;t++){const r=this.peers[o][t];if(r&&"pending"===r.state&&oi(r.sid,n)>0&&this.performTieBreak(r,e))return this._log("info","Tie break session-initiate"),this._sendError(o,i,{condition:"conflict",jingleCondition:"tie-break"})}if("session-initiate"===s){if(!a.length)return t._sendError(o,i,{condition:"bad-request"});r=this._createIncomingSession({applicationTypes:c,config:this.config.peerConnectionConfig,constraints:this.config.peerConnectionConstraints,iceServers:this.iceServers,initiator:!1,parent:this,peerID:o,sid:n,transportTypes:u},e)}r.process(s,e.jingle,t=>{t?(this._log("error","Could not process request",e,t),this._sendError(o,i,t)):(this.emit("send",{id:i,to:o,type:"result"}),"session-initiate"===s&&this.emit("incoming",r))})}}let fo;function po(e){const t=e.jingle=new lo;if(e.supportedICEServiceTypes={stun:!0,stuns:!0,turn:!0,turns:!0},e.disco.addFeature(pt),fo&&fo.RTCPeerConnection){const t=[mt,Ft,Ut,rn,Yt,nn,Ot,wt,bt,yt,"urn:xmpp:jingle:transports:dtls-sctp:1","urn:ietf:rfc:3264","urn:ietf:rfc:5576","urn:ietf:rfc:5888"];for(const n of t)e.disco.addFeature(n)}const n=["outgoing","incoming","accepted","terminated","ringing","mute","unmute","hold","resumed"];for(const r of n)t.on(r,function(t,n){e.emit("jingle:"+r,t,n)});t.on("createdSession",function(t){e.emit("jingle:created",t)}),t.on("send",function(n){e.sendIq(n,function(r,i){r&&e.emit("jingle:error",r);const o=r||i;o.jingle||(o.jingle={}),o.jingle.sid=n.jingle.sid,t.process(o)})}),e.on("session:bound","jingle",function(e){t.selfID=e.full}),e.on("iq:set:jingle","jingle",function(e){t.process(e)}),e.on("unavailable","jingle",function(e){const n=e.from.full;t.endPeerSessions(n,!0)}),e.discoverICEServers=function(t){return this.getServices(e.config.server).then(function(t){const n=t.services.services,r=[];for(let t=0;t<n.length;t++){const i=n[t],o={};e.supportedICEServiceTypes[i.type]&&("stun"===i.type||"stuns"===i.type?(o.urls=i.type+":"+i.host,i.port&&(o.urls+=":"+i.port),r.push(o),e.jingle.addICEServer(o)):"turn"!==i.type&&"turns"!==i.type||(o.urls=i.type+":"+i.host,i.port&&(o.urls+=":"+i.port),i.transport&&"udp"!==i.transport&&(o.urls+="?transport="+i.transport),i.username&&(o.username=i.username),i.password&&(o.credential=i.password),r.push(o),e.jingle.addICEServer(o)))}return r}).then(function(e){return t&&t(null,e),e},function(e){if(!t)throw e;t(e)})}}function ho(e){e.enableKeepAlive=function(t){(t=t||{}).interval=t.interval||300,t.timeout=t.timeout||15,e._keepAliveInterval=setInterval(function(){e.sessionStarted&&function(e,t){return ii(new Promise(function(t,n){e.sm.started?(e.once("stream:management:ack",t),e.sm.request()):e.ping().then(t).catch(function(e){e.error&&"timeout"!==e.error.condition?t():n()})}),1e3*t||15e3)}(e,t.timeout).catch(function(){e.emit("stream:error",{condition:"connection-timeout",text:"Server did not respond in "+t.timeout+" seconds"}),e.transport&&(e.transport.hasStream=!1,e.transport.disconnect())})},1e3*t.interval)},e.disableKeepAlive=function(){e._keepAliveInterval&&(clearInterval(e._keepAliveInterval),delete e._keepAliveInterval)},e.on("disconnected",function(){e.disableKeepAlive()})}function mo(e){e.disco.addFeature("",tn),e.sendLog=function(t,n){e.sendMessage({log:n,to:t,type:"normal"})}}function go(e){e.disco.addFeature(Ht),e.getHistorySearchForm=function(t,n){return e.sendIq({mam:!0,to:t,type:"get"},n)},e.searchHistory=function(t,n){const r=this.nextId();(t=t||{}).queryid=r;const i=t.jid||t.to||"";delete t.jid,delete t.to,t.form||(t.form={}),t.form.type="submit";const o=t.form.fields=t.form.fields||[],s=["FORM_TYPE","with","start","end"];for(const e of s)if(t[e]||"FORM_TYPE"===e){let n=t[e];("start"===e||"end"===e)&&"string"!=typeof n&&(n=n.toISOString()),"FORM_TYPE"===e&&(n=Ht);for(let e=0,t=o.length;e<t;e++)o[e].name;o.push({name:e,value:n}),delete t[e]}const a=new S(i||e.jid.bare),c={"":!0};c[a.full]=!0,c[a.bare]=!0,c[a.domain]=!0,c[e.jid.bare]=!0,c[e.jid.domain]=!0;const u=[];return this.on("mam:item:"+r,"session",function(e){c[e.from.full]&&u.push(e.mamItem)}),ii(this.sendIq({id:r,mam:t,to:i,type:"set"}),1e3*this.config.timeout||15e3,()=>({error:{condition:"timeout"},id:r,type:"error"})).then(e=>(e.mamResult.items=u,this.off("mam:item:"+r),n&&n(null,e),e)).catch(e=>{if(this.off("mam:item:"+r),!n)throw e;n(e)})},e.getHistoryPreferences=function(e){return this.sendIq({mamPrefs:!0,type:"get"},e)},e.setHistoryPreferences=function(e,t){return this.sendIq({mamPrefs:e,type:"set"},t)},e.on("message",function(t){t.mamItem&&(e.emit("mam:item",t),e.emit("mam:item:"+t.mamItem.queryid,t))})}function bo(e){function t(t){return t.markable&&!1!==e.config.chatMarkers}e.disco.addFeature(Xt),e.on("message",function(n){if(!t(n))return n.received?e.emit("marker:received",n):n.displayed?e.emit("marker:displayed",n):n.acknowledged?e.emit("marker:acknowledged",n):void 0;e.markReceived(n)}),e.markReceived=function(n){if(t(n)){const t="groupchat"===n.type?new S(n.from.bare):n.from;e.sendMessage({body:"",received:n.id,to:t,type:n.type})}},e.markDisplayed=function(n){if(t(n)){const t="groupchat"===n.type?new S(n.from.bare):n.from;e.sendMessage({body:"",displayed:n.id,to:t,type:n.type})}},e.markAcknowledged=function(n){if(t(n)){const t="groupchat"===n.type?new S(n.from.bare):n.from;e.sendMessage({acknowledged:n.id,body:"",to:t,type:n.type})}}}function yo(e){function t(){const t=e.joiningRooms;e.joiningRooms={};for(const n of Object.keys(t)){const r=t[n];e.joinRoom(n,r)}const n=e.joinedRooms;e.joinedRooms={};for(const t of Object.keys(n)){const r=n[t];e.joinRoom(t,r)}}e.disco.addFeature(Oe),e.disco.addFeature(Mt),e.disco.addFeature(Qt),e.joinedRooms={},e.joiningRooms={},e.on("session:started",t),e.on("stream:management:resumed",t),e.on("message",function(t){t.muc?t.muc.invite?e.emit("muc:invite",{from:t.muc.invite.from,password:t.muc.password,reason:t.muc.invite.reason,room:t.from,thread:t.muc.invite.thread,type:"mediated"}):t.muc.decline?e.emit("muc:declined",{from:t.muc.decline.from,reason:t.muc.decline.reason,room:t.from}):e.emit("muc:other",{muc:t.muc,room:t.from,to:t.to}):t.mucInvite&&e.emit("muc:invite",{from:t.from,password:t.mucInvite.password,reason:t.mucInvite.reason,room:t.mucInvite.jid,thread:t.mucInvite.thread,type:"direct"}),"groupchat"===t.type&&t.subject&&e.emit("muc:subject",t)}),e.on("presence",function(t){if(e.joiningRooms[t.from.bare]&&"error"===t.type)delete e.joiningRooms[t.from.bare],e.emit("muc:failed",t),e.emit("muc:error",t);else if(t.muc){const n=t.muc.codes&&t.muc.codes.indexOf("110")>=0;"error"===t.type?e.emit("muc:error",t):"unavailable"===t.type?(e.emit("muc:unavailable",t),n&&(e.emit("muc:leave",t),delete e.joinedRooms[t.from.bare]),t.muc.destroyed&&e.emit("muc:destroyed",{newRoom:t.muc.destroyed.jid,password:t.muc.destroyed.password,reason:t.muc.destroyed.reason,room:t.from})):(e.emit("muc:available",t),n&&!e.joinedRooms[t.from.bare]&&(e.emit("muc:join",t),delete e.joiningRooms[t.from.bare],e.joinedRooms[t.from.bare]=t.from.resource))}}),e.joinRoom=function(e,t,n){(n=n||{}).to=e+"/"+t,n.caps=this.disco.caps,n.joinMuc=n.joinMuc||{},this.joiningRooms[e]=t,this.sendPresence(n)},e.leaveRoom=function(e,t,n){(n=n||{}).to=e+"/"+t,n.type="unavailable",this.sendPresence(n)},e.ban=function(t,n,r,i){e.setRoomAffiliation(t,n,"outcast",r,i)},e.kick=function(t,n,r,i){e.setRoomRole(t,n,"none",r,i)},e.invite=function(t,n){e.sendMessage({muc:{invites:n},to:t})},e.directInvite=function(t,n){n.jid=t,e.sendMessage({mucInvite:n,to:n.to})},e.declineInvite=function(t,n,r){e.sendMessage({muc:{decline:{reason:r,to:n}},to:t})},e.changeNick=function(t,n){e.sendPresence({to:new S(t).bare+"/"+n})},e.setSubject=function(t,n){e.sendMessage({subject:n,to:t,type:"groupchat"})},e.discoverReservedNick=function(t,n){e.getDiscoInfo(t,"x-roomuser-item",function(e,t){if(e)return n(e);const r=t.discoInfo.identities[0]||{};n(null,r.name)})},e.requestRoomVoice=function(t){e.sendMessage({form:{fields:[{name:"FORM_TYPE",value:"http://jabber.org/protocol/muc#request"},{name:"muc#role",type:"text-single",value:"participant"}]},to:t})},e.setRoomAffiliation=function(e,t,n,r,i){return this.sendIq({mucAdmin:{affiliation:n,jid:t,reason:r},to:e,type:"set"},i)},e.setRoomRole=function(e,t,n,r,i){return this.sendIq({mucAdmin:{nick:t,reason:r,role:n},to:e,type:"set"},i)},e.getRoomMembers=function(e,t,n){return this.sendIq({mucAdmin:t,to:e,type:"get"},n)},e.getRoomConfig=function(e,t){return this.sendIq({mucOwner:!0,to:e,type:"get"},t)},e.configureRoom=function(e,t,n){return t.type||(t.type="submit"),this.sendIq({mucOwner:{form:t},to:e,type:"set"},n)},e.destroyRoom=function(e,t,n){return this.sendIq({mucOwner:{destroy:t},to:e,type:"set"},n)},e.getUniqueRoomName=function(e,t){return this.sendIq({mucUnique:!0,to:e,type:"get"},t)}}function vo(e){e.disco.addFeature(tt),e.disco.addFeature(ft(tt)),e.on("pubsub:event",function(t){t.event.updated&&t.event.updated.node===tt&&e.emit("mood",{jid:t.from,mood:t.event.updated.published[0].mood})}),e.publishMood=function(e,t,n){return this.publish("",tt,{mood:{text:t,value:e}},n)}}function wo(e){e.disco.addFeature(vt),e.disco.addFeature(ft(vt)),e.on("pubsub:event",function(t){t.event.updated&&t.event.updated.node===vt&&e.emit("nick",{jid:t.from,nick:t.event.updated.published[0].nick})}),e.publishNick=function(e,t){return this.publish("",vt,{nick:e},t)}}function So(e){e.disco.addFeature(Tt),e.on("iq:get:ping",function(t){e.sendIq(t.resultReply())}),e.ping=function(e,t){return this.sendIq({ping:!0,to:e,type:"get"},t)}}function xo(e){e.getPrivateData=function(e,t){return this.sendIq({privateStorage:e,type:"get"},t)},e.setPrivateData=function(e,t){return this.sendIq({privateStorage:e,type:"set"},t)}}function _o(e){e.disco.addFeature(an),e.enableNotifications=function(e,t,n,r){const i=[{name:"FORM_TYPE",value:"http://jabber.org/protocol/pubsub#publish-options"}],o={enablePush:{jid:e,node:t},type:"set"};return n&&n.length&&(o.enablePush.form={fields:i.concat(n),type:"submit"}),this.sendIq(o,r)},e.disableNotifications=function(e,t,n){const r={disablePush:{jid:e},type:"set"};return t&&(r.disablePush.node=t),this.sendIq(r,n)}}function Co(e){e.on("message",function(t){if(t.event){if(e.emit("pubsub:event",t),e.emit("pubsubEvent",t),t.event.updated){const n=t.event.updated.published,r=t.event.updated.retracted;n&&n.length&&e.emit("pubsub:published",t),r&&r.length&&e.emit("pubsub:retracted",t)}t.event.purged&&e.emit("pubsub:purged",t),t.event.deleted&&e.emit("pubsub:deleted",t),t.event.subscriptionChanged&&e.emit("pubsub:subscription",t),t.event.configurationChanged&&e.emit("pubsub:config",t)}t.pubsub&&t.pubsub.affiliations&&e.emit("pubsub:affiliation",t)}),e.subscribeToNode=function(t,n,r){return"string"==typeof n&&(n={node:n}),n.jid=n.jid||e.jid,this.sendIq({pubsub:{subscribe:n},to:t,type:"set"},r)},e.unsubscribeFromNode=function(t,n,r){return"string"==typeof n&&(n={node:n}),n.jid=n.jid||e.jid.bare,this.sendIq({pubsub:{unsubscribe:n},to:t,type:"set"},r)},e.publish=function(e,t,n,r){return this.sendIq({pubsub:{publish:{item:n,node:t}},to:e,type:"set"},r)},e.getItem=function(e,t,n,r){return this.sendIq({pubsub:{retrieve:{item:{id:n},node:t}},to:e,type:"get"},r)},e.getItems=function(e,t,n,r){return(n=n||{}).node=t,this.sendIq({pubsub:{retrieve:{max:n.max,node:t},rsm:n.rsm},to:e,type:"get"},r)},e.retract=function(e,t,n,r,i){return this.sendIq({pubsub:{retract:{id:n,node:t,notify:r}},to:e,type:"set"},i)},e.purgeNode=function(e,t,n){return this.sendIq({pubsubOwner:{purge:t},to:e,type:"set"},n)},e.deleteNode=function(e,t,n){return this.sendIq({pubsubOwner:{del:t},to:e,type:"set"},n)},e.createNode=function(e,t,n,r){const i={pubsub:{create:t},to:e,type:"set"};return n&&(i.pubsub.config={form:n}),this.sendIq(i,r)},e.getSubscriptions=function(e,t,n){return t=t||{},this.sendIq({pubsub:{subscriptions:t},to:e,type:"get"},n)},e.getAffiliations=function(e,t,n){return t=t||{},this.sendIq({pubsub:{affiliations:t},to:e,type:"get"},n)},e.getNodeSubscribers=function(e,t,n,r){return(n=n||{}).node=t,this.sendIq({pubsubOwner:{subscriptions:n},to:e,type:"get"},r)},e.updateNodeSubscriptions=function(e,t,n,r){return this.sendIq({pubsubOwner:{subscriptions:{list:n,node:t}},to:e,type:"set"},r)},e.getNodeAffiliations=function(e,t,n,r){return(n=n||{}).node=t,this.sendIq({pubsubOwner:{affiliations:n},to:e,type:"get"},r)},e.updateNodeAffiliations=function(e,t,n,r){return this.sendIq({pubsubOwner:{affiliations:{list:n,node:t}},to:e,type:"set"},r)}}function To(e){e.disco.addFeature(ut),e.disco.addFeature(ft(ut)),e.on("pubsub:event",function(t){t.event.updated&&t.event.updated.node===ut&&e.emit("reachability",{addresses:t.event.updated.published[0].reach,jid:t.from})}),e.on("presence",function(t){t.reach&&t.reach.length&&e.emit("reachability",{addresses:t.reach,jid:t.from})}),e.publishReachability=function(e,t){return this.publish("",ut,{reach:e},t)}}function ko(e,t,n){const r=!1!==n.sendReceipts;e.disco.addFeature(St),e.on("message",function(t){r&&{chat:!0,headline:!0,normal:!0}[t.type]&&t.requestReceipt&&!t.receipt&&e.sendMessage({id:t.id,receipt:t.id,to:t.from,type:t.type}),t.receipt&&(e.emit("receipt",t),e.emit("receipt:"+t.receipt))})}function Eo(e){e.getAccountInfo=function(e,t){return this.sendIq({register:!0,to:e,type:"get"},t)},e.updateAccount=function(e,t,n){return this.sendIq({register:t,to:e,type:"set"},n)},e.deleteAccount=function(e,t){return this.sendIq({register:{remove:!0},to:e,type:"set"},t)}}function Ro(e){e.on("iq:set:roster",function(t){const n={"":!0};if(n[e.jid.bare]=!0,n[e.jid.domain]=!0,!n[t.from.full])return e.sendIq(t.errorReply({error:{condition:"service-unavailable",type:"cancel"}}));e.emit("roster:update",t),e.sendIq({id:t.id,type:"result"})}),e.getRoster=function(t){return e.sendIq({roster:{ver:this.config.rosterVer},type:"get"}).then(e=>{if(e.roster){const t=e.roster.ver;t&&(this.config.rosterVer=t,this.emit("roster:ver",t))}return e}).then(function(e){return t&&t(null,e),e},function(e){if(!t)throw e;t(e)})},e.updateRosterItem=function(t,n){return e.sendIq({roster:{items:[t]},type:"set"},n)},e.removeRosterItem=function(t,n){return e.updateRosterItem({jid:t,subscription:"remove"},n)},e.subscribe=function(t){e.sendPresence({type:"subscribe",to:t})},e.unsubscribe=function(t){e.sendPresence({type:"unsubscribe",to:t})},e.acceptSubscription=function(t){e.sendPresence({type:"subscribed",to:t})},e.denySubscription=function(t){e.sendPresence({type:"unsubscribed",to:t})}}function Po(e){e.disco.addFeature(Vt),e.on("message",function(t){t.rtt&&(e.emit("rtt",t),e.emit("rtt:"+t.rtt.event,t))})}function Ao(e){e.disco.addFeature(kt),e.getTime=function(e,t){return this.sendIq({time:!0,to:e,type:"get"},t)},e.on("iq:get:time",function(t){const n=new Date;e.sendIq(t.resultReply({time:{tzo:n.getTimezoneOffset(),utc:n}}))})}function jo(e){function t(t){return Object(a.__awaiter)(this,void 0,void 0,function*(){const{discoInfo:n}=yield e.getDiscoInfo(t);if(n.features.includes("urn:xmpp:http:upload:0")){const e=n.form.fields;let r=null;return e.some(e=>"FORM_TYPE"===e.name&&e.value.includes("urn:xmpp:http:upload:0"))&&(r=parseInt(e.find(e=>"max-file-size"===e.name).value,10)),{maxSize:r,jid:t}}})}e.getUploadService=function(n=e.jid.domain){return Object(a.__awaiter)(this,void 0,void 0,function*(){const r=yield t(n);if(r)return r;const{discoItems:i}=yield e.getDiscoItems(n);for(const e of i.items){const n=yield t(e.jid);if(n)return n}throw new Error("No upload service discovered on: "+n)})},e.getUploadSlot=function(t,n,r){return e.sendIq({to:t,type:"get",uploadRequest:n},r)}}function Io(e){e.disco.addFeature("vcard-temp"),e.getVCard=function(e,t){return this.sendIq({to:e,type:"get",vCardTemp:!0},t)},e.publishVCard=function(e,t){return this.sendIq({type:"set",vCardTemp:e},t)}}function Oo(e){e.disco.addFeature("jabber:iq:version"),e.on("iq:get:version",function(t){e.sendIq(t.resultReply({version:e.config.softwareVersion||{name:"stanzajs.org"}}))}),e.getSoftwareVersion=function(e,t){return this.sendIq({to:e,type:"get",version:!0},t)}}function Mo(e){e.use(Ci),e.use(Ti),e.use(ki),e.use(Ei),e.use(Ri),e.use(Pi),e.use(Ai),e.use(ji),e.use(Ii),e.use(Oi),e.use(Mi),e.use(Di),e.use(Ni),e.use(Li),e.use(Fi),e.use(Ui),e.use(qi),e.use(po),e.use(ho),e.use(mo),e.use(go),e.use(bo),e.use(yo),e.use(vo),e.use(wo),e.use(So),e.use(xo),e.use(_o),e.use(Co),e.use(To),e.use(ko),e.use(Eo),e.use(Ro),e.use(Po),e.use(Ao),e.use(jo),e.use(Io),e.use(Oo)}"undefined"!=typeof window&&(fo=window),void 0!==r&&(fo=r);function Do(e){const t=new wi(e);return t.use(Mo),t}}).call(this,n(9).Buffer,n(3))},function(e,t,n){(t=e.exports=n(29)).Stream=t,t.Readable=t,t.Writable=n(33),t.Duplex=n(11),t.Transform=n(35),t.PassThrough=n(71),t.finished=n(14),t.pipeline=n(72)},function(e,t,n){"use strict";function r(e){return function(...t){var n=t.pop();return e.call(this,t,n)}}n.d(t,"a",function(){return K});var i="function"==typeof setImmediate&&setImmediate,o="object"==typeof process&&"function"==typeof process.nextTick;function s(e){setTimeout(e,0)}function a(e){return(t,...n)=>e(()=>t(...n))}var c=a(i?setImmediate:o?process.nextTick:s);function u(e){return f(e)?function(...t){const n=t.pop();return l(e.apply(this,t),n)}:r(function(t,n){var r;try{r=e.apply(this,t)}catch(e){return n(e)}if(r&&"function"==typeof r.then)return l(r,n);n(null,r)})}function l(e,t){return e.then(e=>{d(t,null,e)},e=>{d(t,e&&e.message?e:new Error(e))})}function d(e,t,n){try{e(t,n)}catch(e){c(e=>{throw e},e)}}function f(e){return"AsyncFunction"===e[Symbol.toStringTag]}function p(e){if("function"!=typeof e)throw new Error("expected a function");return f(e)?u(e):e}function h(e,t=e.length){if(!t)throw new Error("arity is undefined");function n(...n){return"function"==typeof n[t-1]?e.apply(this,n):new Promise((r,i)=>{n[t-1]=((e,...t)=>{if(e)return i(e);r(t.length>1?t:t[0])}),e.apply(this,n)})}return Object.defineProperty(n,"name",{value:`awaitable(${e.name})`}),n}function m(e){return function(t,...n){return h(function(r){var i=this;return e(t,(e,t)=>{p(e).apply(i,n.concat(t))},r)})}}function g(e,t,n,r){t=t||[];var i=[],o=0,s=p(n);return e(t,(e,t,n)=>{var r=o++;s(e,(e,t)=>{i[r]=t,n(e)})},e=>{r(e,i)})}function b(e){return e&&"number"==typeof e.length&&e.length>=0&&e.length%1==0}const y={};function v(e){function t(...t){if(null!==e){var n=e;e=null,n.apply(this,t)}}return Object.assign(t,e),t}function w(e){if(b(e))return function(e){var t=-1,n=e.length;return function(){return++t<n?{value:e[t],key:t}:null}}(e);var t,n,r,i,o=function(e){return e[Symbol.iterator]&&e[Symbol.iterator]()}(e);return o?function(e){var t=-1;return function(){var n=e.next();return n.done?null:(t++,{value:n.value,key:t})}}(o):(n=(t=e)?Object.keys(t):[],r=-1,i=n.length,function(){var e=n[++r];return r<i?{value:t[e],key:e}:null})}function S(e){return function(...t){if(null===e)throw new Error("Callback was already called.");var n=e;e=null,n.apply(this,t)}}function x(e,t,n,r){let i=!1,o=!1,s=!1,a=0,c=0;function u(){a>=t||s||i||(s=!0,e.next().then(({value:e,done:t})=>{if(!o&&!i){if(s=!1,t)return i=!0,void(a<=0&&r(null));a++,n(e,c,l),c++,u()}}).catch(d))}function l(e,t){if(a-=1,!o)return e?d(e):!1===e?(i=!0,void(o=!0)):t===y||i&&a<=0?(i=!0,r(null)):void u()}function d(e){o||(s=!1,i=!0,r(e))}u()}var _=e=>(t,n,r)=>{if(r=v(r),e<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!t)return r(null);if(function(e){return"AsyncGenerator"===e[Symbol.toStringTag]}(t))return x(t,e,n,r);if(function(e){return"function"==typeof e[Symbol.asyncIterator]}(t))return x(t[Symbol.asyncIterator](),e,n,r);var i=w(t),o=!1,s=!1,a=0,c=!1;function u(e,t){if(!s)if(a-=1,e)o=!0,r(e);else if(!1===e)o=!0,s=!0;else{if(t===y||o&&a<=0)return o=!0,r(null);c||l()}}function l(){for(c=!0;a<e&&!o;){var t=i();if(null===t)return o=!0,void(a<=0&&r(null));a+=1,n(t.value,t.key,S(u))}c=!1}l()};var C=h(function(e,t,n,r){return _(t)(e,p(n),r)},4);function T(e,t,n){n=v(n);var r=0,i=0,{length:o}=e,s=!1;function a(e,t){!1===e&&(s=!0),!0!==s&&(e?n(e):++i!==o&&t!==y||n(null))}for(0===o&&n(null);r<o;r++)t(e[r],r,S(a))}function k(e,t,n){return C(e,1/0,t,n)}var E=h(function(e,t,n){return(b(e)?T:k)(e,p(t),n)},3);var R=h(function(e,t,n){return g(E,e,t,n)},3);m(R);var P=h(function(e,t,n){return C(e,1,t,n)},3);var A=h(function(e,t,n){return g(P,e,t,n)},3);m(A);Symbol("promiseCallback");class j{constructor(){this.head=this.tail=null,this.length=0}removeLink(e){return e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev,e.prev=e.next=null,this.length-=1,e}empty(){for(;this.head;)this.shift();return this}insertAfter(e,t){t.prev=e,t.next=e.next,e.next?e.next.prev=t:this.tail=t,e.next=t,this.length+=1}insertBefore(e,t){t.prev=e.prev,t.next=e,e.prev?e.prev.next=t:this.head=t,e.prev=t,this.length+=1}unshift(e){this.head?this.insertBefore(this.head,e):I(this,e)}push(e){this.tail?this.insertAfter(this.tail,e):I(this,e)}shift(){return this.head&&this.removeLink(this.head)}pop(){return this.tail&&this.removeLink(this.tail)}toArray(){return[...this]}*[Symbol.iterator](){for(var e=this.head;e;)yield e.data,e=e.next}remove(e){for(var t=this.head;t;){var{next:n}=t;e(t)&&this.removeLink(t),t=n}return this}}function I(e,t){e.length=1,e.head=e.tail=t}function O(e,t,n){if(null==t)t=1;else if(0===t)throw new RangeError("Concurrency must not be zero");var r=p(e),i=0,o=[];const s={error:[],drain:[],saturated:[],unsaturated:[],empty:[]};function a(e,t){return e?t?void(s[e]=s[e].filter(e=>e!==t)):s[e]=[]:Object.keys(s).forEach(e=>s[e]=[])}function u(e,...t){s[e].forEach(e=>e(...t))}var l=!1;function d(e,t,n,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");var i,o;function s(e,...t){return e?n?o(e):i():t.length<=1?i(t[0]):void i(t)}b.started=!0;var a={data:e,callback:n?s:r||s};if(t?b._tasks.unshift(a):b._tasks.push(a),l||(l=!0,c(()=>{l=!1,b.process()})),n||!r)return new Promise((e,t)=>{i=e,o=t})}function f(e){return function(t,...n){i-=1;for(var r=0,s=e.length;r<s;r++){var a=e[r],c=o.indexOf(a);0===c?o.shift():c>0&&o.splice(c,1),a.callback(t,...n),null!=t&&u("error",t,a.data)}i<=b.concurrency-b.buffer&&u("unsaturated"),b.idle()&&u("drain"),b.process()}}function h(e){return!(0!==e.length||!b.idle())&&(c(()=>u("drain")),!0)}const m=e=>t=>{if(!t)return new Promise((t,n)=>{!function(e,t){const n=(...r)=>{a(e,n),t(...r)};s[e].push(n)}(e,(e,r)=>{if(e)return n(e);t(r)})});a(e),function(e,t){s[e].push(t)}(e,t)};var g=!1,b={_tasks:new j,*[Symbol.iterator](){yield*b._tasks[Symbol.iterator]()},concurrency:t,payload:n,buffer:t/4,started:!1,paused:!1,push(e,t){if(Array.isArray(e)){if(h(e))return;return e.map(e=>d(e,!1,!1,t))}return d(e,!1,!1,t)},pushAsync(e,t){if(Array.isArray(e)){if(h(e))return;return e.map(e=>d(e,!1,!0,t))}return d(e,!1,!0,t)},kill(){a(),b._tasks.empty()},unshift(e,t){if(Array.isArray(e)){if(h(e))return;return e.map(e=>d(e,!0,!1,t))}return d(e,!0,!1,t)},unshiftAsync(e,t){if(Array.isArray(e)){if(h(e))return;return e.map(e=>d(e,!0,!0,t))}return d(e,!0,!0,t)},remove(e){b._tasks.remove(e)},process(){if(!g){for(g=!0;!b.paused&&i<b.concurrency&&b._tasks.length;){var e=[],t=[],n=b._tasks.length;b.payload&&(n=Math.min(n,b.payload));for(var s=0;s<n;s++){var a=b._tasks.shift();e.push(a),o.push(a),t.push(a.data)}i+=1,0===b._tasks.length&&u("empty"),i===b.concurrency&&u("saturated");var c=S(f(e));r(t,c)}g=!1}},length:()=>b._tasks.length,running:()=>i,workersList:()=>o,idle:()=>b._tasks.length+i===0,pause(){b.paused=!0},resume(){!1!==b.paused&&(b.paused=!1,c(b.process))}};return Object.defineProperties(b,{saturated:{writable:!1,value:m("saturated")},unsaturated:{writable:!1,value:m("unsaturated")},empty:{writable:!1,value:m("empty")},drain:{writable:!1,value:m("drain")},error:{writable:!1,value:m("error")}}),b}h(function(e,t,n,r){r=v(r);var i=p(n);return P(e,(e,n,r)=>{i(t,e,(e,n)=>{t=n,r(e)})},e=>r(e,t))},4);var M=h(function(e,t,n,r){return g(_(t),e,n,r)},4);var D=h(function(e,t,n,r){var i=p(n);return M(e,t,(e,t)=>{i(e,(e,...n)=>e?t(e):t(e,n))},(e,t)=>{for(var n=[],i=0;i<t.length;i++)t[i]&&(n=n.concat(...t[i]));return r(e,n)})},4);h(function(e,t,n){return D(e,1/0,t,n)},3);h(function(e,t,n){return D(e,1,t,n)},3);function N(e,t){return(n,r,i,o)=>{var s,a=!1;const c=p(i);n(r,(n,r,i)=>{c(n,(r,o)=>r||!1===r?i(r):e(o)&&!s?(a=!0,s=t(!0,n),i(null,y)):void i())},e=>{if(e)return o(e);o(null,a?s:t(!1))})}}h(function(e,t,n){return N(e=>e,(e,t)=>t)(E,e,t,n)},3);h(function(e,t,n,r){return N(e=>e,(e,t)=>t)(_(t),e,n,r)},4);h(function(e,t,n){return N(e=>e,(e,t)=>t)(_(1),e,t,n)},3);function L(e){return(t,...n)=>p(t)(...n,(t,...n)=>{"object"==typeof console&&(t?console.error&&console.error(t):console[e]&&n.forEach(t=>console[e](t)))})}L("dir");h(function(e,t,n){n=S(n);var r,i=p(e),o=p(t);function s(e,...t){if(e)return n(e);!1!==e&&(r=t,o(...t,a))}function a(e,t){return e?n(e):!1!==e?t?void i(s):n(null,...r):void 0}return a(null,!0)},3);function F(e){return(t,n,r)=>e(t,r)}h(function(e,t,n){return E(e,F(p(t)),n)},3);var U=h(function(e,t,n,r){return _(t)(e,F(p(n)),r)},4);var q=h(function(e,t,n){return U(e,1,t,n)},3);function B(e){return f(e)?e:function(...t){var n=t.pop(),r=!0;t.push((...e)=>{r?c(()=>n(...e)):n(...e)}),e.apply(this,t),r=!1}}h(function(e,t,n){return N(e=>!e,e=>!e)(E,e,t,n)},3);h(function(e,t,n,r){return N(e=>!e,e=>!e)(_(t),e,n,r)},4);h(function(e,t,n){return N(e=>!e,e=>!e)(P,e,t,n)},3);function z(e,t,n,r){var i=new Array(t.length);e(t,(e,t,r)=>{n(e,(e,n)=>{i[t]=!!n,r(e)})},e=>{if(e)return r(e);for(var n=[],o=0;o<t.length;o++)i[o]&&n.push(t[o]);r(null,n)})}function V(e,t,n,r){var i=[];e(t,(e,t,r)=>{n(e,(n,o)=>{if(n)return r(n);o&&i.push({index:t,value:e}),r(n)})},e=>{if(e)return r(e);r(null,i.sort((e,t)=>e.index-t.index).map(e=>e.value))})}function W(e,t,n,r){return(b(t)?z:V)(e,t,p(n),r)}h(function(e,t,n){return W(E,e,t,n)},3);h(function(e,t,n,r){return W(_(t),e,n,r)},4);h(function(e,t,n){return W(P,e,t,n)},3);h(function(e,t){var n=S(t),r=p(B(e));return function e(t){if(t)return n(t);!1!==t&&r(e)}()},2);h(function(e,t,n,r){var i=p(n);return M(e,t,(e,t)=>{i(e,(n,r)=>n?t(n):t(n,{key:r,val:e}))},(e,t)=>{for(var n={},{hasOwnProperty:i}=Object.prototype,o=0;o<t.length;o++)if(t[o]){var{key:s}=t[o],{val:a}=t[o];i.call(n,s)?n[s].push(a):n[s]=[a]}return r(e,n)})},4);L("log");h(function(e,t,n,r){r=v(r);var i={},o=p(n);return _(t)(e,(e,t,n)=>{o(e,t,(e,r)=>{if(e)return n(e);i[t]=r,n(e)})},e=>r(e,i))},4);a(o?process.nextTick:i?setImmediate:s),h((e,t,n)=>{var r=b(t)?[]:{};e(t,(e,t,n)=>{p(e)((e,...i)=>{i.length<2&&([i]=i),r[t]=i,n(e)})},e=>n(e,r))},3);function G(e,t){var n=p(e);return O((e,t)=>{n(e[0],t)},t,1)}class ${constructor(){this.heap=[],this.pushCount=Number.MIN_SAFE_INTEGER}get length(){return this.heap.length}empty(){return this.heap=[],this}percUp(e){let t;for(;e>0&&Q(this.heap[e],this.heap[t=H(e)]);){let n=this.heap[e];this.heap[e]=this.heap[t],this.heap[t]=n,e=t}}percDown(e){let t;for(;(t=1+(e<<1))<this.heap.length&&(t+1<this.heap.length&&Q(this.heap[t+1],this.heap[t])&&(t+=1),!Q(this.heap[e],this.heap[t]));){let n=this.heap[e];this.heap[e]=this.heap[t],this.heap[t]=n,e=t}}push(e){e.pushCount=++this.pushCount,this.heap.push(e),this.percUp(this.heap.length-1)}unshift(e){return this.heap.push(e)}shift(){let[e]=this.heap;return this.heap[0]=this.heap[this.heap.length-1],this.heap.pop(),this.percDown(0),e}toArray(){return[...this]}*[Symbol.iterator](){for(let e=0;e<this.heap.length;e++)yield this.heap[e].data}remove(e){let t=0;for(let n=0;n<this.heap.length;n++)e(this.heap[n])||(this.heap[t]=this.heap[n],t++);this.heap.splice(t);for(let e=H(this.heap.length-1);e>=0;e--)this.percDown(e);return this}}function H(e){return(e+1>>1)-1}function Q(e,t){return e.priority!==t.priority?e.priority<t.priority:e.pushCount<t.pushCount}function K(e,t){var n=G(e,t);return n._tasks=new $,n.push=function(e,t=0,r=(()=>{})){if("function"!=typeof r)throw new Error("task callback must be a function");if(n.started=!0,Array.isArray(e)||(e=[e]),0===e.length&&n.idle())return c(()=>n.drain());for(var i=0,o=e.length;i<o;i++){var s={data:e[i],priority:t,callback:r};n._tasks.push(s)}c(n.process)},delete n.unshift,n}h(function(e,t){if(t=v(t),!Array.isArray(e))return t(new TypeError("First argument to race must be an array of functions"));if(!e.length)return t();for(var n=0,r=e.length;n<r;n++)p(e[n])(t)},2);function Y(e,t,n,r){const i=p(n);return W(e,t,(e,t)=>{i(e,(e,n)=>{t(e,!n)})},r)}h(function(e,t,n){return Y(E,e,t,n)},3);h(function(e,t,n,r){return Y(_(t),e,n,r)},4);h(function(e,t,n){return Y(P,e,t,n)},3);h(function(e,t,n){return N(Boolean,e=>e)(E,e,t,n)},3);h(function(e,t,n,r){return N(Boolean,e=>e)(_(t),e,n,r)},4);h(function(e,t,n){return N(Boolean,e=>e)(P,e,t,n)},3);h(function(e,t,n){var r=p(t);return R(e,(e,t)=>{r(e,(n,r)=>{if(n)return t(n);t(n,{value:e,criteria:r})})},(e,t)=>{if(e)return n(e);n(null,t.sort(i).map(e=>e.value))});function i(e,t){var n=e.criteria,r=t.criteria;return n<r?-1:n>r?1:0}},3);h(function(e,t){var n,r=null;return q(e,(e,t)=>{p(e)((e,...i)=>{if(!1===e)return t(e);i.length<2?[n]=i:n=i,r=e,t(e?null:{})})},()=>t(r,n))});h(function(e,t,n){n=S(n);var r=p(t),i=p(e),o=[];function s(e,...t){if(e)return n(e);o=t,!1!==e&&i(a)}function a(e,t){return e?n(e):!1!==e?t?void r(s):n(null,...o):void 0}return i(a)},3);h(function(e,t){if(t=v(t),!Array.isArray(e))return t(new Error("First argument to waterfall must be an array of functions"));if(!e.length)return t();var n=0;function r(t){p(e[n++])(...t,S(i))}function i(i,...o){if(!1!==i)return i||n===e.length?t(i,...o):void r(o)}r([])})},function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,a=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),c=1;c<arguments.length;c++){for(var u in n=Object(arguments[c]))i.call(n,u)&&(a[u]=n[u]);if(r){s=r(n);for(var l=0;l<s.length;l++)o.call(n,s[l])&&(a[s[l]]=n[s[l]])}}return a}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){(function(e,r){var i;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(o){t&&t.nodeType,e&&e.nodeType;var s="object"==typeof r&&r;s.global!==s&&s.window!==s&&s.self;var a,c=2147483647,u=36,l=1,d=26,f=38,p=700,h=72,m=128,g="-",b=/^xn--/,y=/[^\x20-\x7E]/,v=/[\x2E\u3002\uFF0E\uFF61]/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},S=u-l,x=Math.floor,_=String.fromCharCode;function C(e){throw new RangeError(w[e])}function T(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function k(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+T((e=e.replace(v,".")).split("."),t).join(".")}function E(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function R(e){return T(e,function(e){var t="";return e>65535&&(t+=_((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=_(e)}).join("")}function P(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function A(e,t,n){var r=0;for(e=n?x(e/p):e>>1,e+=x(e/t);e>S*d>>1;r+=u)e=x(e/S);return x(r+(S+1)*e/(e+f))}function j(e){var t,n,r,i,o,s,a,f,p,b,y,v=[],w=e.length,S=0,_=m,T=h;for((n=e.lastIndexOf(g))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&C("not-basic"),v.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<w;){for(o=S,s=1,a=u;i>=w&&C("invalid-input"),((f=(y=e.charCodeAt(i++))-48<10?y-22:y-65<26?y-65:y-97<26?y-97:u)>=u||f>x((c-S)/s))&&C("overflow"),S+=f*s,!(f<(p=a<=T?l:a>=T+d?d:a-T));a+=u)s>x(c/(b=u-p))&&C("overflow"),s*=b;T=A(S-o,t=v.length+1,0==o),x(S/t)>c-_&&C("overflow"),_+=x(S/t),S%=t,v.splice(S++,0,_)}return R(v)}function I(e){var t,n,r,i,o,s,a,f,p,b,y,v,w,S,T,k=[];for(v=(e=E(e)).length,t=m,n=0,o=h,s=0;s<v;++s)(y=e[s])<128&&k.push(_(y));for(r=i=k.length,i&&k.push(g);r<v;){for(a=c,s=0;s<v;++s)(y=e[s])>=t&&y<a&&(a=y);for(a-t>x((c-n)/(w=r+1))&&C("overflow"),n+=(a-t)*w,t=a,s=0;s<v;++s)if((y=e[s])<t&&++n>c&&C("overflow"),y==t){for(f=n,p=u;!(f<(b=p<=o?l:p>=o+d?d:p-o));p+=u)T=f-b,S=u-b,k.push(_(P(b+T%S,0))),f=x(T/S);k.push(_(P(f,0))),o=A(n,w,r==i),n=0,++r}++n,++t}return k.join("")}a={version:"1.4.1",ucs2:{decode:E,encode:R},decode:j,encode:I,toASCII:function(e){return k(e,function(e){return y.test(e)?"xn--"+I(e):e})},toUnicode:function(e){return k(e,function(e){return b.test(e)?j(e.slice(4).toLowerCase()):e})}},void 0===(i=function(){return a}.call(t,n,t,e))||(e.exports=i)}()}).call(this,n(23)(e),n(3))},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,i=n;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},function(e,t,n){"use strict";var r=n(28),i=r.escapeXML,o=r.escapeXMLText,s=n(59),a=s.equal,c=s.name,u=s.attrs,l=s.children,d=n(60);function f(e,t){this.name=e,this.parent=null,this.children=[],this.attrs={},this.setAttrs(t)}f.prototype.is=function(e,t){return this.getName()===e&&(!t||this.getNS()===t)},f.prototype.getName=function(){return this.name.indexOf(":")>=0?this.name.substr(this.name.indexOf(":")+1):this.name},f.prototype.getNS=function(){if(this.name.indexOf(":")>=0){var e=this.name.substr(0,this.name.indexOf(":"));return this.findNS(e)}return this.findNS()},f.prototype.findNS=function(e){if(e){var t="xmlns:"+e;if(this.attrs[t])return this.attrs[t];if(this.parent)return this.parent.findNS(e)}else{if(this.attrs.xmlns)return this.attrs.xmlns;if(this.parent)return this.parent.findNS()}},f.prototype.getXmlns=function(){var e={};for(var t in this.parent&&(e=this.parent.getXmlns()),this.attrs){var n=t.match("xmlns:?(.*)");this.attrs.hasOwnProperty(t)&&n&&(e[this.attrs[t]]=n[1])}return e},f.prototype.setAttrs=function(e){"string"==typeof e?this.attrs.xmlns=e:e&&Object.keys(e).forEach(function(t){this.attrs[t]=e[t]},this)},f.prototype.getAttr=function(e,t){if(!t)return this.attrs[e];var n=this.getXmlns();return n[t]?this.attrs[[n[t],e].join(":")]:null},f.prototype.getChild=function(e,t){return this.getChildren(e,t)[0]},f.prototype.getChildren=function(e,t){for(var n=[],r=0;r<this.children.length;r++){var i=this.children[r];!i.getName||i.getName()!==e||t&&i.getNS()!==t||n.push(i)}return n},f.prototype.getChildByAttr=function(e,t,n,r){return this.getChildrenByAttr(e,t,n,r)[0]},f.prototype.getChildrenByAttr=function(e,t,n,r){for(var i=[],o=0;o<this.children.length;o++){var s=this.children[o];!s.attrs||s.attrs[e]!==t||n&&s.getNS()!==n||i.push(s),r&&s.getChildrenByAttr&&i.push(s.getChildrenByAttr(e,t,n,!0))}return r&&(i=[].concat.apply([],i)),i},f.prototype.getChildrenByFilter=function(e,t){for(var n=[],r=0;r<this.children.length;r++){var i=this.children[r];e(i)&&n.push(i),t&&i.getChildrenByFilter&&n.push(i.getChildrenByFilter(e,!0))}return t&&(n=[].concat.apply([],n)),n},f.prototype.getText=function(){for(var e="",t=0;t<this.children.length;t++){var n=this.children[t];"string"!=typeof n&&"number"!=typeof n||(e+=n)}return e},f.prototype.getChildText=function(e,t){var n=this.getChild(e,t);return n?n.getText():null},f.prototype.getChildElements=function(){return this.getChildrenByFilter(function(e){return e instanceof f})},f.prototype.root=function(){return this.parent?this.parent.root():this},f.prototype.tree=f.prototype.root,f.prototype.up=function(){return this.parent?this.parent:this},f.prototype.c=function(e,t){return this.cnode(new f(e,t))},f.prototype.cnode=function(e){return this.children.push(e),"object"==typeof e&&(e.parent=this),e},f.prototype.t=function(e){return this.children.push(e),this},f.prototype.remove=function(e,t){var n;return n="string"==typeof e?function(n){return!(n.is&&n.is(e,t))}:function(t){return t!==e},this.children=this.children.filter(n),this},f.prototype.clone=function(){return d(this)},f.prototype.text=function(e){return e&&1===this.children.length?(this.children[0]=e,this):this.getText()},f.prototype.attr=function(e,t){return void 0!==t||null===t?(this.attrs||(this.attrs={}),this.attrs[e]=t,this):this.attrs[e]},f.prototype.toString=function(){var e="";return this.write(function(t){e+=t}),e},f.prototype.toJSON=function(){return{name:this.name,attrs:this.attrs,children:this.children.map(function(e){return e&&e.toJSON?e.toJSON():e})}},f.prototype._addChildren=function(e){e(">");for(var t=0;t<this.children.length;t++){var n=this.children[t];(n||0===n)&&(n.write?n.write(e):"string"==typeof n?e(o(n)):n.toString&&e(o(n.toString(10))))}e("</"),e(this.name),e(">")},f.prototype.write=function(e){for(var t in e("<"),e(this.name),this.attrs){var n=this.attrs[t];null!=n&&(e(" "),e(t),e('="'),"string"!=typeof n&&(n=n.toString()),e(i(n)),e('"'))}0===this.children.length?e("/>"):this._addChildren(e)},f.prototype.nameEquals=function(e){return c(this,e)},f.prototype.attrsEquals=function(e){return u(this,e)},f.prototype.childrenEquals=function(e){return l(this,e)},f.prototype.equals=function(e){return a(this,e)},e.exports=f},function(e,t,n){"use strict";var r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"};function i(e){return r[e]}var o={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'"};function s(e){if("#"===e[1]){var t;if(9===(t="x"===e[2]?parseInt(e.slice(3),16):parseInt(e.slice(2),10))||10===t||13===t||t>=32&&t<=55295||t>=57344&&t<=65533||t>=65536&&t<=1114111)return String.fromCodePoint(t);throw new Error("Illegal XML character 0x"+t.toString(16))}if(o[e])return o[e]||e;throw new Error("Illegal XML entity "+e)}t.escapeXML=function(e){return e.replace(/&|<|>|"|'/g,i)},t.unescapeXML=function(e){for(var t="",n=-1,r=-1,i=0;-1!==(n=e.indexOf("&",i))&&-1!==(r=e.indexOf(";",n+1));)t=t+e.substring(i,n)+s(e.substring(n,r+1)),i=r+1;return 0===i?e:t+=e.substring(i)},t.escapeXMLText=function(e){return e.replace(/&|<|>/g,i)},t.unescapeXMLText=function(e){return e.replace(/&(amp|#38|lt|#60|gt|#62);/g,s)}},function(e,t,n){"use strict";(function(t,r){var i;e.exports=C,C.ReadableState=_;n(4).EventEmitter;var o=function(e,t){return e.listeners(t).length},s=n(30),a=n(9).Buffer,c=t.Uint8Array||function(){};var u,l=n(64);u=l&&l.debuglog?l.debuglog("stream"):function(){};var d,f,p=n(65),h=n(31),m=n(32).getHighWaterMark,g=n(10).codes,b=g.ERR_INVALID_ARG_TYPE,y=g.ERR_STREAM_PUSH_AFTER_EOF,v=g.ERR_METHOD_NOT_IMPLEMENTED,w=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,S=n(67).emitExperimentalWarning;n(7)(C,s);var x=["error","close","destroy","pause","resume"];function _(e,t,r){i=i||n(11),e=e||{},"boolean"!=typeof r&&(r=t instanceof i),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=m(this,e,"readableHighWaterMark",r),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(d||(d=n(34).StringDecoder),this.decoder=new d(e.encoding),this.encoding=e.encoding)}function C(e){if(i=i||n(11),!(this instanceof C))return new C(e);var t=this instanceof i;this._readableState=new _(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),s.call(this)}function T(e,t,n,r,i){u("readableAddChunk",t);var o,s=e._readableState;if(null===t)s.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?P(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,A(e)))}(e,s);else if(i||(o=function(e,t){var n;r=t,a.isBuffer(r)||r instanceof c||"string"==typeof t||void 0===t||e.objectMode||(n=new b("chunk",["string","Buffer","Uint8Array"],t));var r;return n}(s,t)),o)e.emit("error",o);else if(s.objectMode||t&&t.length>0)if("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===a.prototype||(t=function(e){return a.from(e)}(t)),r)s.endEmitted?e.emit("error",new w):k(e,s,t,!0);else if(s.ended)e.emit("error",new y);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!n?(t=s.decoder.write(t),s.objectMode||0!==t.length?k(e,s,t,!1):j(e,s)):k(e,s,t,!1)}else r||(s.reading=!1,j(e,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function k(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&P(e)),j(e,t)}Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),C.prototype.destroy=h.destroy,C.prototype._undestroy=h.undestroy,C.prototype._destroy=function(e,t){t(e)},C.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=a.from(e,t),t=""),n=!0),T(this,e,t,!1,n)},C.prototype.unshift=function(e){return T(this,e,null,!0,!1)},C.prototype.isPaused=function(){return!1===this._readableState.flowing},C.prototype.setEncoding=function(e){return d||(d=n(34).StringDecoder),this._readableState.decoder=new d(e),this._readableState.encoding=this._readableState.decoder.encoding,this};var E=8388608;function R(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=E?e=E:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function P(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(u("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(A,e))}function A(e){var t=e._readableState;u("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||e.emit("readable"),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,N(e)}function j(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(I,e,t))}function I(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(u("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function O(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function M(e){u("readable nexttick read 0"),e.read(0)}function D(e,t){u("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),N(e),t.flowing&&!t.reading&&e.read(0)}function N(e){var t=e._readableState;for(u("flow",t.flowing);t.flowing&&null!==e.read(););}function L(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function F(e){var t=e._readableState;u("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(U,t,e))}function U(e,t){u("endReadableNT",e.endEmitted,e.length),e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function q(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}C.prototype.read=function(e){u("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return u("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?F(this):P(this),null;if(0===(e=R(e,t))&&t.ended)return 0===t.length&&F(this),null;var r,i=t.needReadable;return u("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&u("length less than watermark",i=!0),t.ended||t.reading?u("reading or ended",i=!1):i&&(u("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=R(n,t))),null===(r=e>0?L(e,t):null)?(t.needReadable=!0,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&F(this)),null!==r&&this.emit("data",r),r},C.prototype._read=function(e){this.emit("error",new v("_read()"))},C.prototype.pipe=function(e,t){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,u("pipe count=%d opts=%j",i.pipesCount,t);var s=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?c:g;function a(t,r){u("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,u("cleanup"),e.removeListener("close",h),e.removeListener("finish",m),e.removeListener("drain",l),e.removeListener("error",p),e.removeListener("unpipe",a),n.removeListener("end",c),n.removeListener("end",g),n.removeListener("data",f),d=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function c(){u("onend"),e.end()}i.endEmitted?r.nextTick(s):n.once("end",s),e.on("unpipe",a);var l=function(e){return function(){var t=e._readableState;u("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,"data")&&(t.flowing=!0,N(e))}}(n);e.on("drain",l);var d=!1;function f(t){u("ondata");var r=e.write(t);u("dest.write",r),!1===r&&((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==q(i.pipes,e))&&!d&&(u("false write response, pause",i.awaitDrain),i.awaitDrain++),n.pause())}function p(t){u("onerror",t),g(),e.removeListener("error",p),0===o(e,"error")&&e.emit("error",t)}function h(){e.removeListener("finish",m),g()}function m(){u("onfinish"),e.removeListener("close",h),g()}function g(){u("unpipe"),n.unpipe(e)}return n.on("data",f),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",p),e.once("close",h),e.once("finish",m),e.emit("pipe",n),i.flowing||(u("pipe resume"),n.resume()),e},C.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=q(t.pipes,e);return-1===s?this:(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},C.prototype.on=function(e,t){var n=s.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,u("on readable",i.length,i.reading),i.length?P(this):i.reading||r.nextTick(M,this))),n},C.prototype.addListener=C.prototype.on,C.prototype.removeListener=function(e,t){var n=s.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(O,this),n},C.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||r.nextTick(O,this),t},C.prototype.resume=function(){var e=this._readableState;return e.flowing||(u("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(D,e,t))}(this,e)),e.paused=!1,this},C.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},C.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",function(){if(u("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){(u("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<x.length;o++)e.on(x[o],this.emit.bind(this,x[o]));return this._read=function(t){u("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(C.prototype[Symbol.asyncIterator]=function(){return S("Readable[Symbol.asyncIterator]"),void 0===f&&(f=n(70)),f(this)}),Object.defineProperty(C.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(C.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(C.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),C._fromList=L,Object.defineProperty(C.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}})}).call(this,n(3),n(6))},function(e,t,n){e.exports=n(4).EventEmitter},function(e,t,n){"use strict";(function(t){function n(e,t){i(e,t),r(e)}function r(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,o){var s=this,a=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return a||c?(o?o(e):!e||this._writableState&&this._writableState.errorEmitted||t.nextTick(i,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!o&&e?(t.nextTick(n,s,e),s._writableState&&(s._writableState.errorEmitted=!0)):o?(t.nextTick(r,s),o(e)):t.nextTick(r,s)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}}).call(this,n(6))},function(e,t,n){"use strict";var r=n(10).codes.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,n,i){var o=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,i,n);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new r(i?n:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}},function(e,t,n){"use strict";(function(t,r){function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}var o;e.exports=C,C.WritableState=_;var s={deprecate:n(68)},a=n(30),c=n(9).Buffer,u=t.Uint8Array||function(){};var l,d=n(31),f=n(32).getHighWaterMark,p=n(10).codes,h=p.ERR_INVALID_ARG_TYPE,m=p.ERR_METHOD_NOT_IMPLEMENTED,g=p.ERR_MULTIPLE_CALLBACK,b=p.ERR_STREAM_CANNOT_PIPE,y=p.ERR_STREAM_DESTROYED,v=p.ERR_STREAM_NULL_VALUES,w=p.ERR_STREAM_WRITE_AFTER_END,S=p.ERR_UNKNOWN_ENCODING;function x(){}function _(e,t,s){o=o||n(11),e=e||{},"boolean"!=typeof s&&(s=t instanceof o),this.objectMode=!!e.objectMode,s&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=f(this,e,"writableHighWaterMark",s),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===e.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,o=n.writecb;if("function"!=typeof o)throw new g;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,o){--t.pendingcb,n?(r.nextTick(o,i),r.nextTick(A,e,t),e._writableState.errorEmitted=!0,e.emit("error",i)):(o(i),e._writableState.errorEmitted=!0,e.emit("error",i),A(e,t))}(e,n,i,t,o);else{var s=R(n)||e.destroyed;s||n.corked||n.bufferProcessing||!n.bufferedRequest||E(e,n),i?r.nextTick(k,e,n,s,o):k(e,n,s,o)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function C(e){var t=this instanceof(o=o||n(11));if(!t&&!l.call(C,this))return new C(e);this._writableState=new _(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),a.call(this)}function T(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new y("write")):n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function k(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),A(e,t)}function E(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,o=new Array(r),s=t.corkedRequestsFree;s.entry=n;for(var a=0,c=!0;n;)o[a]=n,n.isBuf||(c=!1),n=n.next,a+=1;o.allBuffers=c,T(e,t,!0,t.length,o,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,l=n.encoding,d=n.callback;if(T(e,t,!1,t.objectMode?1:u.length,u,l,d),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function R(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function P(e,t){e._final(function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),A(e,t)})}function A(e,t){var n=R(t);return n&&(!function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,r.nextTick(P,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}n(7)(C,a),_.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(_.prototype,"buffer",{get:s.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(C,Symbol.hasInstance,{value:function(e){return!!l.call(this,e)||this===C&&(e&&e._writableState instanceof _)}})):l=function(e){return e instanceof this},C.prototype.pipe=function(){this.emit("error",new b)},C.prototype.write=function(e,t,n){var i,o=this._writableState,s=!1,a=!o.objectMode&&(i=e,c.isBuffer(i)||i instanceof u);return a&&!c.isBuffer(e)&&(e=function(e){return c.from(e)}(e)),"function"==typeof t&&(n=t,t=null),a?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof n&&(n=x),o.ending?function(e,t){var n=new w;e.emit("error",n),r.nextTick(t,n)}(this,n):(a||function(e,t,n,i){var o;return null===n?o=new v:"string"==typeof n||t.objectMode||(o=new h("chunk",["string","Buffer"],n)),!o||(e.emit("error",o),r.nextTick(i,o),!1)}(this,o,e,n))&&(o.pendingcb++,s=function(e,t,n,r,i,o){if(!n){var s=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=c.from(t,n));return t}(t,r,i);r!==s&&(n=!0,i="buffer",r=s)}var a=t.objectMode?1:r.length;t.length+=a;var u=t.length<t.highWaterMark;u||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else T(e,t,!1,a,r,i,o);return u}(this,o,a,e,t,n)),s},C.prototype.cork=function(){this._writableState.corked++},C.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||E(this,e))},C.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new S(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(C.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(C.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),C.prototype._write=function(e,t,n){n(new m("_write()"))},C.prototype._writev=null,C.prototype.end=function(e,t,n){var i=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,n){t.ending=!0,A(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,i,n),this},Object.defineProperty(C.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),C.prototype.destroy=d.destroy,C.prototype._undestroy=d.undestroy,C.prototype._destroy=function(e,t){t(e)}}).call(this,n(3),n(6))},function(e,t,n){"use strict";var r=n(69).Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=u,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=l,this.end=d,t=3;break;default:return this.write=f,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function u(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function l(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function f(e){return e.toString(this.encoding)}function p(e){return e&&e.length?this.write(e):""}t.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},o.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=s(t[r]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if((i=s(t[r]))>=0)return i>0&&(e.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if((i=s(t[r]))>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,n){"use strict";e.exports=l;var r=n(10).codes,i=r.ERR_METHOD_NOT_IMPLEMENTED,o=r.ERR_MULTIPLE_CALLBACK,s=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=r.ERR_TRANSFORM_WITH_LENGTH_0,c=n(11);function u(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new o);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);c.call(this,e),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function d(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush(function(t,n){f(e,t,n)})}function f(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new a;if(e._transformState.transforming)throw new s;return e.push(null)}n(7)(l,c),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,c.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,n){n(new i("_transform()"))},l.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){c.prototype._destroy.call(this,e,function(e){t(e)})}},function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";var r=n(2);function i(e,t,n,i,o){var s=r.writeRtpDescription(e.kind,t);if(s+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),s+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":o||"active"),s+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?s+="a=sendrecv\r\n":e.rtpSender?s+="a=sendonly\r\n":e.rtpReceiver?s+="a=recvonly\r\n":s+="a=inactive\r\n",e.rtpSender){var a=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=a;var c="msid:"+(i?i.id:"-")+" "+a+"\r\n";s+="a="+c,s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+c,e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+c,s+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),s}function o(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},r=function(e,t){e=parseInt(e,10);for(var n=0;n<t.length;n++)if(t[n].payloadType===e||t[n].preferredPayloadType===e)return t[n]},i=function(e,t,n,i){var o=r(e.parameters.apt,n),s=r(t.parameters.apt,i);return o&&s&&o.name.toLowerCase()===s.name.toLowerCase()};return e.codecs.forEach(function(r){for(var o=0;o<t.codecs.length;o++){var s=t.codecs[o];if(r.name.toLowerCase()===s.name.toLowerCase()&&r.clockRate===s.clockRate){if("rtx"===r.name.toLowerCase()&&r.parameters&&s.parameters.apt&&!i(r,s,e.codecs,t.codecs))continue;(s=JSON.parse(JSON.stringify(s))).numChannels=Math.min(r.numChannels,s.numChannels),n.codecs.push(s),s.rtcpFeedback=s.rtcpFeedback.filter(function(e){for(var t=0;t<r.rtcpFeedback.length;t++)if(r.rtcpFeedback[t].type===e.type&&r.rtcpFeedback[t].parameter===e.parameter)return!0;return!1});break}}}),e.headerExtensions.forEach(function(e){for(var r=0;r<t.headerExtensions.length;r++){var i=t.headerExtensions[r];if(e.uri===i.uri){n.headerExtensions.push(i);break}}}),n}function s(e,t,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)}function a(e,t){var n=e.getRemoteCandidates().find(function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type});return n||e.addRemoteCandidate(t),!n}function c(e,t){var n=new Error(t);return n.name=e,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],n}e.exports=function(e,t){function n(t,n){n.addTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function u(t,n,r,i){var o=new Event("track");o.track=n,o.receiver=r,o.transceiver={receiver:r},o.streams=i,e.setTimeout(function(){t._dispatchEvent("track",o)})}var l=function(n){var i=this,o=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){i[e]=o[e].bind(o)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",n=JSON.parse(JSON.stringify(n||{})),this.usingBundle="max-bundle"===n.bundlePolicy,"negotiate"===n.rtcpMuxPolicy)throw c("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(n.rtcpMuxPolicy||(n.rtcpMuxPolicy="require"),n.iceTransportPolicy){case"all":case"relay":break;default:n.iceTransportPolicy="all"}switch(n.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:n.bundlePolicy="balanced"}if(n.iceServers=function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter(function(e){if(e&&(e.urls||e.url)){var r=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var i="string"==typeof r;return i&&(r=[r]),r=r.filter(function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||n?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(n=!0,!0)}),delete e.url,e.urls=i?r[0]:r,!!r.length}})}(n.iceServers||[],t),this._iceGatherers=[],n.iceCandidatePoolSize)for(var s=n.iceCandidatePoolSize;s>0;s--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:n.iceServers,gatherPolicy:n.iceTransportPolicy}));else n.iceCandidatePoolSize=0;this._config=n,this.transceivers=[],this._sdpSessionId=r.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(l.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(l.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),l.prototype.onicecandidate=null,l.prototype.onaddstream=null,l.prototype.ontrack=null,l.prototype.onremovestream=null,l.prototype.onsignalingstatechange=null,l.prototype.oniceconnectionstatechange=null,l.prototype.onconnectionstatechange=null,l.prototype.onicegatheringstatechange=null,l.prototype.onnegotiationneeded=null,l.prototype.ondatachannel=null,l.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},l.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},l.prototype.getConfiguration=function(){return this._config},l.prototype.getLocalStreams=function(){return this.localStreams},l.prototype.getRemoteStreams=function(){return this.remoteStreams},l.prototype._createTransceiver=function(e,t){var n=this.transceivers.length>0,r={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&n)r.iceTransport=this.transceivers[0].iceTransport,r.dtlsTransport=this.transceivers[0].dtlsTransport;else{var i=this._createIceAndDtlsTransports();r.iceTransport=i.iceTransport,r.dtlsTransport=i.dtlsTransport}return t||this.transceivers.push(r),r},l.prototype.addTrack=function(t,n){if(this._isClosed)throw c("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var r;if(this.transceivers.find(function(e){return e.track===t}))throw c("InvalidAccessError","Track already exists.");for(var i=0;i<this.transceivers.length;i++)this.transceivers[i].track||this.transceivers[i].kind!==t.kind||(r=this.transceivers[i]);return r||(r=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(n)&&this.localStreams.push(n),r.track=t,r.stream=n,r.rtpSender=new e.RTCRtpSender(t,r.dtlsTransport),r.rtpSender},l.prototype.addStream=function(e){var n=this;if(t>=15025)e.getTracks().forEach(function(t){n.addTrack(t,e)});else{var r=e.clone();e.getTracks().forEach(function(e,t){var n=r.getTracks()[t];e.addEventListener("enabled",function(e){n.enabled=e.enabled})}),r.getTracks().forEach(function(e){n.addTrack(e,r)})}},l.prototype.removeTrack=function(t){if(this._isClosed)throw c("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var n=this.transceivers.find(function(e){return e.rtpSender===t});if(!n)throw c("InvalidAccessError","Sender was not created by this connection.");var r=n.stream;n.rtpSender.stop(),n.rtpSender=null,n.track=null,n.stream=null,-1===this.transceivers.map(function(e){return e.stream}).indexOf(r)&&this.localStreams.indexOf(r)>-1&&this.localStreams.splice(this.localStreams.indexOf(r),1),this._maybeFireNegotiationNeeded()},l.prototype.removeStream=function(e){var t=this;e.getTracks().forEach(function(e){var n=t.getSenders().find(function(t){return t.track===e});n&&t.removeTrack(n)})},l.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender}).map(function(e){return e.rtpSender})},l.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver}).map(function(e){return e.rtpReceiver})},l.prototype._createIceGatherer=function(t,n){var r=this;if(n&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var i=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(i,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var n=!e.candidate||0===Object.keys(e.candidate).length;i.state=n?"completed":"gathering",null!==r.transceivers[t].bufferedCandidateEvents&&r.transceivers[t].bufferedCandidateEvents.push(e)},i.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),i},l.prototype._gather=function(t,n){var i=this,o=this.transceivers[n].iceGatherer;if(!o.onlocalcandidate){var s=this.transceivers[n].bufferedCandidateEvents;this.transceivers[n].bufferedCandidateEvents=null,o.removeEventListener("localcandidate",this.transceivers[n].bufferCandidates),o.onlocalcandidate=function(e){if(!(i.usingBundle&&n>0)){var s=new Event("icecandidate");s.candidate={sdpMid:t,sdpMLineIndex:n};var a=e.candidate,c=!a||0===Object.keys(a).length;if(c)"new"!==o.state&&"gathering"!==o.state||(o.state="completed");else{"new"===o.state&&(o.state="gathering"),a.component=1,a.ufrag=o.getLocalParameters().usernameFragment;var u=r.writeCandidate(a);s.candidate=Object.assign(s.candidate,r.parseCandidate(u)),s.candidate.candidate=u,s.candidate.toJSON=function(){return{candidate:s.candidate.candidate,sdpMid:s.candidate.sdpMid,sdpMLineIndex:s.candidate.sdpMLineIndex,usernameFragment:s.candidate.usernameFragment}}}var l=r.getMediaSections(i._localDescription.sdp);l[s.candidate.sdpMLineIndex]+=c?"a=end-of-candidates\r\n":"a="+s.candidate.candidate+"\r\n",i._localDescription.sdp=r.getDescription(i._localDescription.sdp)+l.join("");var d=i.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});"gathering"!==i.iceGatheringState&&(i.iceGatheringState="gathering",i._emitGatheringStateChange()),c||i._dispatchEvent("icecandidate",s),d&&(i._dispatchEvent("icecandidate",new Event("icecandidate")),i.iceGatheringState="complete",i._emitGatheringStateChange())}},e.setTimeout(function(){s.forEach(function(e){o.onlocalcandidate(e)})},0)}},l.prototype._createIceAndDtlsTransports=function(){var t=this,n=new e.RTCIceTransport(null);n.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var r=new e.RTCDtlsTransport(n);return r.ondtlsstatechange=function(){t._updateConnectionState()},r.onerror=function(){Object.defineProperty(r,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:n,dtlsTransport:r}},l.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var n=this.transceivers[e].iceTransport;n&&(delete n.onicestatechange,delete this.transceivers[e].iceTransport);var r=this.transceivers[e].dtlsTransport;r&&(delete r.ondtlsstatechange,delete r.onerror,delete this.transceivers[e].dtlsTransport)},l.prototype._transceive=function(e,n,i){var s=o(e.localCapabilities,e.remoteCapabilities);n&&e.rtpSender&&(s.encodings=e.sendEncodingParameters,s.rtcp={cname:r.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(s.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(s)),i&&e.rtpReceiver&&s.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach(function(e){delete e.rtx}),e.recvEncodingParameters.length?s.encodings=e.recvEncodingParameters:s.encodings=[{}],s.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(s.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(s.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(s))},l.prototype.setLocalDescription=function(e){var t,n,i=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(c("TypeError",'Unsupported type "'+e.type+'"'));if(!s("setLocalDescription",e.type,i.signalingState)||i._isClosed)return Promise.reject(c("InvalidStateError","Can not set local "+e.type+" in state "+i.signalingState));if("offer"===e.type)t=r.splitSections(e.sdp),n=t.shift(),t.forEach(function(e,t){var n=r.parseRtpParameters(e);i.transceivers[t].localCapabilities=n}),i.transceivers.forEach(function(e,t){i._gather(e.mid,t)});else if("answer"===e.type){t=r.splitSections(i._remoteDescription.sdp),n=t.shift();var a=r.matchPrefix(n,"a=ice-lite").length>0;t.forEach(function(e,t){var s=i.transceivers[t],c=s.iceGatherer,u=s.iceTransport,l=s.dtlsTransport,d=s.localCapabilities,f=s.remoteCapabilities;if(!(r.isRejected(e)&&0===r.matchPrefix(e,"a=bundle-only").length)&&!s.rejected){var p=r.getIceParameters(e,n),h=r.getDtlsParameters(e,n);a&&(h.role="server"),i.usingBundle&&0!==t||(i._gather(s.mid,t),"new"===u.state&&u.start(c,p,a?"controlling":"controlled"),"new"===l.state&&l.start(h));var m=o(d,f);i._transceive(s,m.codecs.length>0,!1)}})}return i._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?i._updateSignalingState("have-local-offer"):i._updateSignalingState("stable"),Promise.resolve()},l.prototype.setRemoteDescription=function(i){var l=this;if(-1===["offer","answer"].indexOf(i.type))return Promise.reject(c("TypeError",'Unsupported type "'+i.type+'"'));if(!s("setRemoteDescription",i.type,l.signalingState)||l._isClosed)return Promise.reject(c("InvalidStateError","Can not set remote "+i.type+" in state "+l.signalingState));var d={};l.remoteStreams.forEach(function(e){d[e.id]=e});var f=[],p=r.splitSections(i.sdp),h=p.shift(),m=r.matchPrefix(h,"a=ice-lite").length>0,g=r.matchPrefix(h,"a=group:BUNDLE ").length>0;l.usingBundle=g;var b=r.matchPrefix(h,"a=ice-options:")[0];return l.canTrickleIceCandidates=!!b&&b.substr(14).split(" ").indexOf("trickle")>=0,p.forEach(function(s,c){var u=r.splitLines(s),p=r.getKind(s),b=r.isRejected(s)&&0===r.matchPrefix(s,"a=bundle-only").length,y=u[0].substr(2).split(" ")[2],v=r.getDirection(s,h),w=r.parseMsid(s),S=r.getMid(s)||r.generateIdentifier();if(b||"application"===p&&("DTLS/SCTP"===y||"UDP/DTLS/SCTP"===y))l.transceivers[c]={mid:S,kind:p,protocol:y,rejected:!0};else{var x,_,C,T,k,E,R,P,A;!b&&l.transceivers[c]&&l.transceivers[c].rejected&&(l.transceivers[c]=l._createTransceiver(p,!0));var j,I,O=r.parseRtpParameters(s);b||(j=r.getIceParameters(s,h),(I=r.getDtlsParameters(s,h)).role="client"),R=r.parseRtpEncodingParameters(s);var M=r.parseRtcpParameters(s),D=r.matchPrefix(s,"a=end-of-candidates",h).length>0,N=r.matchPrefix(s,"a=candidate:").map(function(e){return r.parseCandidate(e)}).filter(function(e){return 1===e.component});if(("offer"===i.type||"answer"===i.type)&&!b&&g&&c>0&&l.transceivers[c]&&(l._disposeIceAndDtlsTransports(c),l.transceivers[c].iceGatherer=l.transceivers[0].iceGatherer,l.transceivers[c].iceTransport=l.transceivers[0].iceTransport,l.transceivers[c].dtlsTransport=l.transceivers[0].dtlsTransport,l.transceivers[c].rtpSender&&l.transceivers[c].rtpSender.setTransport(l.transceivers[0].dtlsTransport),l.transceivers[c].rtpReceiver&&l.transceivers[c].rtpReceiver.setTransport(l.transceivers[0].dtlsTransport)),"offer"!==i.type||b){if("answer"===i.type&&!b){_=(x=l.transceivers[c]).iceGatherer,C=x.iceTransport,T=x.dtlsTransport,k=x.rtpReceiver,E=x.sendEncodingParameters,P=x.localCapabilities,l.transceivers[c].recvEncodingParameters=R,l.transceivers[c].remoteCapabilities=O,l.transceivers[c].rtcpParameters=M,N.length&&"new"===C.state&&(!m&&!D||g&&0!==c?N.forEach(function(e){a(x.iceTransport,e)}):C.setRemoteCandidates(N)),g&&0!==c||("new"===C.state&&C.start(_,j,"controlling"),"new"===T.state&&T.start(I)),!o(x.localCapabilities,x.remoteCapabilities).codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&x.sendEncodingParameters[0].rtx&&delete x.sendEncodingParameters[0].rtx,l._transceive(x,"sendrecv"===v||"recvonly"===v,"sendrecv"===v||"sendonly"===v),!k||"sendrecv"!==v&&"sendonly"!==v?delete x.rtpReceiver:(A=k.track,w?(d[w.stream]||(d[w.stream]=new e.MediaStream),n(A,d[w.stream]),f.push([A,k,d[w.stream]])):(d.default||(d.default=new e.MediaStream),n(A,d.default),f.push([A,k,d.default])))}}else{(x=l.transceivers[c]||l._createTransceiver(p)).mid=S,x.iceGatherer||(x.iceGatherer=l._createIceGatherer(c,g)),N.length&&"new"===x.iceTransport.state&&(!D||g&&0!==c?N.forEach(function(e){a(x.iceTransport,e)}):x.iceTransport.setRemoteCandidates(N)),P=e.RTCRtpReceiver.getCapabilities(p),t<15019&&(P.codecs=P.codecs.filter(function(e){return"rtx"!==e.name})),E=x.sendEncodingParameters||[{ssrc:1001*(2*c+2)}];var L,F=!1;if("sendrecv"===v||"sendonly"===v){if(F=!x.rtpReceiver,k=x.rtpReceiver||new e.RTCRtpReceiver(x.dtlsTransport,p),F)A=k.track,w&&"-"===w.stream||(w?(d[w.stream]||(d[w.stream]=new e.MediaStream,Object.defineProperty(d[w.stream],"id",{get:function(){return w.stream}})),Object.defineProperty(A,"id",{get:function(){return w.track}}),L=d[w.stream]):(d.default||(d.default=new e.MediaStream),L=d.default)),L&&(n(A,L),x.associatedRemoteMediaStreams.push(L)),f.push([A,k,L])}else x.rtpReceiver&&x.rtpReceiver.track&&(x.associatedRemoteMediaStreams.forEach(function(t){var n,r,i=t.getTracks().find(function(e){return e.id===x.rtpReceiver.track.id});i&&(n=i,(r=t).removeTrack(n),r.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:n})))}),x.associatedRemoteMediaStreams=[]);x.localCapabilities=P,x.remoteCapabilities=O,x.rtpReceiver=k,x.rtcpParameters=M,x.sendEncodingParameters=E,x.recvEncodingParameters=R,l._transceive(l.transceivers[c],!1,F)}}}),void 0===l._dtlsRole&&(l._dtlsRole="offer"===i.type?"active":"passive"),l._remoteDescription={type:i.type,sdp:i.sdp},"offer"===i.type?l._updateSignalingState("have-remote-offer"):l._updateSignalingState("stable"),Object.keys(d).forEach(function(t){var n=d[t];if(n.getTracks().length){if(-1===l.remoteStreams.indexOf(n)){l.remoteStreams.push(n);var r=new Event("addstream");r.stream=n,e.setTimeout(function(){l._dispatchEvent("addstream",r)})}f.forEach(function(e){var t=e[0],r=e[1];n.id===e[2].id&&u(l,t,r,[n])})}}),f.forEach(function(e){e[2]||u(l,e[0],e[1],[])}),e.setTimeout(function(){l&&l.transceivers&&l.transceivers.forEach(function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},l.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},l.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},l.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout(function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}},0))},l.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++}),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var n=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",n)}},l.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)}),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var n=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",n)}},l.prototype.createOffer=function(){var n=this;if(n._isClosed)return Promise.reject(c("InvalidStateError","Can not call createOffer after close"));var o=n.transceivers.filter(function(e){return"audio"===e.kind}).length,s=n.transceivers.filter(function(e){return"video"===e.kind}).length,a=arguments[0];if(a){if(a.mandatory||a.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==a.offerToReceiveAudio&&(o=!0===a.offerToReceiveAudio?1:!1===a.offerToReceiveAudio?0:a.offerToReceiveAudio),void 0!==a.offerToReceiveVideo&&(s=!0===a.offerToReceiveVideo?1:!1===a.offerToReceiveVideo?0:a.offerToReceiveVideo)}for(n.transceivers.forEach(function(e){"audio"===e.kind?--o<0&&(e.wantReceive=!1):"video"===e.kind&&--s<0&&(e.wantReceive=!1)});o>0||s>0;)o>0&&(n._createTransceiver("audio"),o--),s>0&&(n._createTransceiver("video"),s--);var u=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.transceivers.forEach(function(i,o){var s=i.track,a=i.kind,c=i.mid||r.generateIdentifier();i.mid=c,i.iceGatherer||(i.iceGatherer=n._createIceGatherer(o,n.usingBundle));var u=e.RTCRtpSender.getCapabilities(a);t<15019&&(u.codecs=u.codecs.filter(function(e){return"rtx"!==e.name})),u.codecs.forEach(function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),i.remoteCapabilities&&i.remoteCapabilities.codecs&&i.remoteCapabilities.codecs.forEach(function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)})}),u.headerExtensions.forEach(function(e){(i.remoteCapabilities&&i.remoteCapabilities.headerExtensions||[]).forEach(function(t){e.uri===t.uri&&(e.id=t.id)})});var l=i.sendEncodingParameters||[{ssrc:1001*(2*o+1)}];s&&t>=15019&&"video"===a&&!l[0].rtx&&(l[0].rtx={ssrc:l[0].ssrc+1}),i.wantReceive&&(i.rtpReceiver=new e.RTCRtpReceiver(i.dtlsTransport,a)),i.localCapabilities=u,i.sendEncodingParameters=l}),"max-compat"!==n._config.bundlePolicy&&(u+="a=group:BUNDLE "+n.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),u+="a=ice-options:trickle\r\n",n.transceivers.forEach(function(e,t){u+=i(e,e.localCapabilities,"offer",e.stream,n._dtlsRole),u+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===n.iceGatheringState||0!==t&&n.usingBundle||(e.iceGatherer.getLocalCandidates().forEach(function(e){e.component=1,u+="a="+r.writeCandidate(e)+"\r\n"}),"completed"===e.iceGatherer.state&&(u+="a=end-of-candidates\r\n"))});var l=new e.RTCSessionDescription({type:"offer",sdp:u});return Promise.resolve(l)},l.prototype.createAnswer=function(){var n=this;if(n._isClosed)return Promise.reject(c("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==n.signalingState&&"have-local-pranswer"!==n.signalingState)return Promise.reject(c("InvalidStateError","Can not call createAnswer in signalingState "+n.signalingState));var s=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.usingBundle&&(s+="a=group:BUNDLE "+n.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),s+="a=ice-options:trickle\r\n";var a=r.getMediaSections(n._remoteDescription.sdp).length;n.transceivers.forEach(function(e,r){if(!(r+1>a)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?s+="m=application 0 DTLS/SCTP 5000\r\n":s+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?s+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(s+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(s+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var c;if(e.stream)"audio"===e.kind?c=e.stream.getAudioTracks()[0]:"video"===e.kind&&(c=e.stream.getVideoTracks()[0]),c&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1});var u=o(e.localCapabilities,e.remoteCapabilities);!u.codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,s+=i(e,u,"answer",e.stream,n._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(s+="a=rtcp-rsize\r\n")}});var u=new e.RTCSessionDescription({type:"answer",sdp:s});return Promise.resolve(u)},l.prototype.addIceCandidate=function(e){var t,n=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(i,o){if(!n._remoteDescription)return o(c("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var s=e.sdpMLineIndex;if(e.sdpMid)for(var u=0;u<n.transceivers.length;u++)if(n.transceivers[u].mid===e.sdpMid){s=u;break}var l=n.transceivers[s];if(!l)return o(c("OperationError","Can not add ICE candidate"));if(l.rejected)return i();var d=Object.keys(e.candidate).length>0?r.parseCandidate(e.candidate):{};if("tcp"===d.protocol&&(0===d.port||9===d.port))return i();if(d.component&&1!==d.component)return i();if((0===s||s>0&&l.iceTransport!==n.transceivers[0].iceTransport)&&!a(l.iceTransport,d))return o(c("OperationError","Can not add ICE candidate"));var f=e.candidate.trim();0===f.indexOf("a=")&&(f=f.substr(2)),(t=r.getMediaSections(n._remoteDescription.sdp))[s]+="a="+(d.type?f:"end-of-candidates")+"\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join("")}else for(var p=0;p<n.transceivers.length&&(n.transceivers[p].rejected||(n.transceivers[p].iceTransport.addRemoteCandidate({}),(t=r.getMediaSections(n._remoteDescription.sdp))[p]+="a=end-of-candidates\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join(""),!n.usingBundle));p++);i()})},l.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var n=null;if(this.transceivers.forEach(function(e){e.rtpSender&&e.rtpSender.track===t?n=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(n=e.rtpReceiver)}),!n)throw c("InvalidAccessError","Invalid selector.");return n.getStats()}var r=[];return this.transceivers.forEach(function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(t){e[t]&&r.push(e[t].getStats())})}),Promise.all(r).then(function(e){var t=new Map;return e.forEach(function(e){e.forEach(function(e){t.set(e.id,e)})}),t})};["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(t){var n=e[t];if(n&&n.prototype&&n.prototype.getStats){var r=n.prototype.getStats;n.prototype.getStats=function(){return r.apply(this).then(function(e){var t=new Map;return Object.keys(e).forEach(function(n){var r;e[n].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(r=e[n]).type]||r.type,t.set(n,e[n])}),t})}}});var d=["createOffer","createAnswer"];return d.forEach(function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then(function(t){"function"==typeof e[0]&&e[0].apply(null,[t])},function(t){"function"==typeof e[1]&&e[1].apply(null,[t])}):t.apply(this,arguments)}}),(d=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null)},function(t){"function"==typeof e[2]&&e[2].apply(null,[t])}):t.apply(this,arguments)}}),["getStats"].forEach(function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null)}):t.apply(this,arguments)}}),l}},function(e,t,n){var r=n(48),i=n(49),o=i;o.v1=r,o.v4=i,e.exports=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),i=r.__importStar(n(56)),o=r.__importStar(n(13)),s=r.__importDefault(n(63));class a{constructor(){this._LOOKUP={},this._LOOKUP_EXT={},this._TAGS={},this._CB_DEFINITION={},this._CB_TAG={},this._ID=Symbol("JXT"),this.utils=Object.assign({},i,o)}use(e){return e&&"function"==typeof e?(e[this._ID]||(e(this),e[this._ID]=!0),this):this}getDefinition(e,t,n){const r=this._LOOKUP[t+"|"+e];if(n&&!r)throw new Error("Could not find definition for <"+e+' xmlns="'+t+'" />');return r}getExtensions(e,t){return this._LOOKUP_EXT[t+"|"+e]||{}}withDefinition(e,t,n){const r=t+"|"+e;this._CB_DEFINITION[r]||(this._CB_DEFINITION[r]=[]),this._CB_DEFINITION[r].push(n),this._LOOKUP[r]&&n(this._LOOKUP[r])}withTag(e,t){this._CB_TAG[e]||(this._CB_TAG[e]=[]),this._CB_TAG[e].push(t),this.tagged(e).forEach(function(e){t(e)})}tagged(e){return this._TAGS[e]||[]}build(e){const t=this.getDefinition(e.localName,e.namespaceURI);if(t)return new t(null,e)}parse(e){const t=o.parse(e);if(t)return this.build(t)}extend(e,t,n,r){const o=e.prototype._NS+"|"+e.prototype._EL,s=t.prototype._name,a=t.prototype._NS+"|"+t.prototype._EL;this._LOOKUP[a]=t,this._LOOKUP_EXT[a]||(this._LOOKUP_EXT[a]={}),this._LOOKUP_EXT[o]||(this._LOOKUP_EXT[o]={}),this._LOOKUP_EXT[o][s]=t,(!n||n&&!r)&&this.add(e,s,i.extension(t)),n&&this.add(e,n,i.multiExtension(t))}add(e,t,n){n.enumerable=!0,Object.defineProperty(e.prototype,t,n)}define(e){const t=this,n=s.default(this,e),r=n.prototype._NS,i=n.prototype._EL,o=n.prototype._TAGS,a=r+"|"+i;return this._LOOKUP[a]=n,o.forEach(function(e){t._TAGS[e]||(t._TAGS[e]=[]),t._TAGS[e].push(n)}),Object.keys(e.fields||{}).forEach(function(r){t.add(n,r,e.fields[r])}),this._CB_DEFINITION[a]&&this._CB_DEFINITION[a].forEach(function(e){e(n)}),o.forEach(function(e){t._CB_TAG[e]&&t._CB_TAG[e].forEach(function(e){e(n)})}),n}static createRegistry(){return new a}}Object.assign(a,o),Object.assign(a,i),t.createRegistry=function(){return new a},t.default=a},function(e,t,n){"use strict";
/** @license React v16.8.6
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(22),i="function"==typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,s=i?Symbol.for("react.portal"):60106,a=i?Symbol.for("react.fragment"):60107,c=i?Symbol.for("react.strict_mode"):60108,u=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,d=i?Symbol.for("react.context"):60110,f=i?Symbol.for("react.concurrent_mode"):60111,p=i?Symbol.for("react.forward_ref"):60112,h=i?Symbol.for("react.suspense"):60113,m=i?Symbol.for("react.memo"):60115,g=i?Symbol.for("react.lazy"):60116,b="function"==typeof Symbol&&Symbol.iterator;function y(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(e,t,n,r,i,o,s,a){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,o,s,a],u=0;(e=Error(t.replace(/%s/g,function(){return c[u++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w={};function S(e,t,n){this.props=e,this.context=t,this.refs=w,this.updater=n||v}function x(){}function _(e,t,n){this.props=e,this.context=t,this.refs=w,this.updater=n||v}S.prototype.isReactComponent={},S.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&y("85"),this.updater.enqueueSetState(this,e,t,"setState")},S.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=S.prototype;var C=_.prototype=new x;C.constructor=_,r(C,S.prototype),C.isPureReactComponent=!0;var T={current:null},k={current:null},E=Object.prototype.hasOwnProperty,R={key:!0,ref:!0,__self:!0,__source:!0};function P(e,t,n){var r=void 0,i={},s=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)E.call(t,r)&&!R.hasOwnProperty(r)&&(i[r]=t[r]);var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){for(var u=Array(c),l=0;l<c;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in c=e.defaultProps)void 0===i[r]&&(i[r]=c[r]);return{$$typeof:o,type:e,key:s,ref:a,props:i,_owner:k.current}}function A(e){return"object"==typeof e&&null!==e&&e.$$typeof===o}var j=/\/+/g,I=[];function O(e,t,n,r){if(I.length){var i=I.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function M(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>I.length&&I.push(e)}function D(e,t,n){return null==e?0:function e(t,n,r,i){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var c=!1;if(null===t)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(t.$$typeof){case o:case s:c=!0}}if(c)return r(i,t,""===n?"."+N(t,0):n),1;if(c=0,n=""===n?".":n+":",Array.isArray(t))for(var u=0;u<t.length;u++){var l=n+N(a=t[u],u);c+=e(a,l,r,i)}else if(l=null===t||"object"!=typeof t?null:"function"==typeof(l=b&&t[b]||t["@@iterator"])?l:null,"function"==typeof l)for(t=l.call(t),u=0;!(a=t.next()).done;)c+=e(a=a.value,l=n+N(a,u++),r,i);else"object"===a&&y("31","[object Object]"==(r=""+t)?"object with keys {"+Object.keys(t).join(", ")+"}":r,"");return c}(e,"",t,n)}function N(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}(e.key):t.toString(36)}function L(e,t){e.func.call(e.context,t,e.count++)}function F(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?U(e,r,n,function(e){return e}):null!=e&&(A(e)&&(e=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(j,"$&/")+"/")+n)),r.push(e))}function U(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(j,"$&/")+"/"),D(e,F,t=O(t,o,r,i)),M(t)}function q(){var e=T.current;return null===e&&y("321"),e}var B={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return U(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;D(e,L,t=O(null,null,t,n)),M(t)},count:function(e){return D(e,function(){return null},null)},toArray:function(e){var t=[];return U(e,t,null,function(e){return e}),t},only:function(e){return A(e)||y("143"),e}},createRef:function(){return{current:null}},Component:S,PureComponent:_,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:d,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:p,render:e}},lazy:function(e){return{$$typeof:g,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:m,type:e,compare:void 0===t?null:t}},useCallback:function(e,t){return q().useCallback(e,t)},useContext:function(e,t){return q().useContext(e,t)},useEffect:function(e,t){return q().useEffect(e,t)},useImperativeHandle:function(e,t,n){return q().useImperativeHandle(e,t,n)},useDebugValue:function(){},useLayoutEffect:function(e,t){return q().useLayoutEffect(e,t)},useMemo:function(e,t){return q().useMemo(e,t)},useReducer:function(e,t,n){return q().useReducer(e,t,n)},useRef:function(e){return q().useRef(e)},useState:function(e){return q().useState(e)},Fragment:a,StrictMode:c,Suspense:h,createElement:P,cloneElement:function(e,t,n){null==e&&y("267",e);var i=void 0,s=r({},e.props),a=e.key,c=e.ref,u=e._owner;if(null!=t){void 0!==t.ref&&(c=t.ref,u=k.current),void 0!==t.key&&(a=""+t.key);var l=void 0;for(i in e.type&&e.type.defaultProps&&(l=e.type.defaultProps),t)E.call(t,i)&&!R.hasOwnProperty(i)&&(s[i]=void 0===t[i]&&void 0!==l?l[i]:t[i])}if(1===(i=arguments.length-2))s.children=n;else if(1<i){l=Array(i);for(var d=0;d<i;d++)l[d]=arguments[d+2];s.children=l}return{$$typeof:o,type:e.type,key:a,ref:c,props:s,_owner:u}},createFactory:function(e){var t=P.bind(null,e);return t.type=e,t},isValidElement:A,version:"16.8.6",unstable_ConcurrentMode:f,unstable_Profiler:u,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:T,ReactCurrentOwner:k,assign:r}},z={default:B},V=z&&B||z;e.exports=V.default||V},function(e,t,n){"use strict";
/** @license React v16.8.6
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(0),i=n(22),o=n(42);function s(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(e,t,n,r,i,o,s,a){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,o,s,a],u=0;(e=Error(t.replace(/%s/g,function(){return c[u++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}r||s("227");var a=!1,c=null,u=!1,l=null,d={onError:function(e){a=!0,c=e}};function f(e,t,n,r,i,o,s,u,l){a=!1,c=null,function(e,t,n,r,i,o,s,a,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(e){this.onError(e)}}.apply(d,arguments)}var p=null,h={};function m(){if(p)for(var e in h){var t=h[e],n=p.indexOf(e);if(-1<n||s("96",e),!b[n])for(var r in t.extractEvents||s("97",e),b[n]=t,n=t.eventTypes){var i=void 0,o=n[r],a=t,c=r;y.hasOwnProperty(c)&&s("99",c),y[c]=o;var u=o.phasedRegistrationNames;if(u){for(i in u)u.hasOwnProperty(i)&&g(u[i],a,c);i=!0}else o.registrationName?(g(o.registrationName,a,c),i=!0):i=!1;i||s("98",r,e)}}}function g(e,t,n){v[e]&&s("100",e),v[e]=t,w[e]=t.eventTypes[n].dependencies}var b=[],y={},v={},w={},S=null,x=null,_=null;function C(e,t,n){var r=e.type||"unknown-event";e.currentTarget=_(n),function(e,t,n,r,i,o,d,p,h){if(f.apply(this,arguments),a){if(a){var m=c;a=!1,c=null}else s("198"),m=void 0;u||(u=!0,l=m)}}(r,t,void 0,e),e.currentTarget=null}function T(e,t){return null==t&&s("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function k(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var E=null;function R(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)C(e,t[r],n[r]);else t&&C(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}var P={injectEventPluginOrder:function(e){p&&s("101"),p=Array.prototype.slice.call(e),m()},injectEventPluginsByName:function(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];h.hasOwnProperty(t)&&h[t]===r||(h[t]&&s("102",t),h[t]=r,n=!0)}n&&m()}};function A(e,t){var n=e.stateNode;if(!n)return null;var r=S(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}return e?null:(n&&"function"!=typeof n&&s("231",t,typeof n),n)}function j(e){if(null!==e&&(E=T(E,e)),e=E,E=null,e&&(k(e,R),E&&s("95"),u))throw e=l,u=!1,l=null,e}var I=Math.random().toString(36).slice(2),O="__reactInternalInstance$"+I,M="__reactEventHandlers$"+I;function D(e){if(e[O])return e[O];for(;!e[O];){if(!e.parentNode)return null;e=e.parentNode}return 5===(e=e[O]).tag||6===e.tag?e:null}function N(e){return!(e=e[O])||5!==e.tag&&6!==e.tag?null:e}function L(e){if(5===e.tag||6===e.tag)return e.stateNode;s("33")}function F(e){return e[M]||null}function U(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function q(e,t,n){(t=A(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=T(n._dispatchListeners,t),n._dispatchInstances=T(n._dispatchInstances,e))}function B(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=U(t);for(t=n.length;0<t--;)q(n[t],"captured",e);for(t=0;t<n.length;t++)q(n[t],"bubbled",e)}}function z(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=A(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=T(n._dispatchListeners,t),n._dispatchInstances=T(n._dispatchInstances,e))}function V(e){e&&e.dispatchConfig.registrationName&&z(e._targetInst,null,e)}function W(e){k(e,B)}var G=!("undefined"==typeof window||!window.document||!window.document.createElement);function $(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var H={animationend:$("Animation","AnimationEnd"),animationiteration:$("Animation","AnimationIteration"),animationstart:$("Animation","AnimationStart"),transitionend:$("Transition","TransitionEnd")},Q={},K={};function Y(e){if(Q[e])return Q[e];if(!H[e])return e;var t,n=H[e];for(t in n)if(n.hasOwnProperty(t)&&t in K)return Q[e]=n[t];return e}G&&(K=document.createElement("div").style,"AnimationEvent"in window||(delete H.animationend.animation,delete H.animationiteration.animation,delete H.animationstart.animation),"TransitionEvent"in window||delete H.transitionend.transition);var J=Y("animationend"),X=Y("animationiteration"),Z=Y("animationstart"),ee=Y("transitionend"),te="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ne=null,re=null,ie=null;function oe(){if(ie)return ie;var e,t,n=re,r=n.length,i="value"in ne?ne.value:ne.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return ie=i.slice(e,1<t?1-t:void 0)}function se(){return!0}function ae(){return!1}function ce(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?se:ae,this.isPropagationStopped=ae,this}function ue(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function le(e){e instanceof this||s("279"),e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function de(e){e.eventPool=[],e.getPooled=ue,e.release=le}i(ce.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=se)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=se)},persist:function(){this.isPersistent=se},isPersistent:ae,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=ae,this._dispatchInstances=this._dispatchListeners=null}}),ce.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},ce.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var o=new t;return i(o,n.prototype),n.prototype=o,n.prototype.constructor=n,n.Interface=i({},r.Interface,e),n.extend=r.extend,de(n),n},de(ce);var fe=ce.extend({data:null}),pe=ce.extend({data:null}),he=[9,13,27,32],me=G&&"CompositionEvent"in window,ge=null;G&&"documentMode"in document&&(ge=document.documentMode);var be=G&&"TextEvent"in window&&!ge,ye=G&&(!me||ge&&8<ge&&11>=ge),ve=String.fromCharCode(32),we={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Se=!1;function xe(e,t){switch(e){case"keyup":return-1!==he.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function _e(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Ce=!1;var Te={eventTypes:we,extractEvents:function(e,t,n,r){var i=void 0,o=void 0;if(me)e:{switch(e){case"compositionstart":i=we.compositionStart;break e;case"compositionend":i=we.compositionEnd;break e;case"compositionupdate":i=we.compositionUpdate;break e}i=void 0}else Ce?xe(e,n)&&(i=we.compositionEnd):"keydown"===e&&229===n.keyCode&&(i=we.compositionStart);return i?(ye&&"ko"!==n.locale&&(Ce||i!==we.compositionStart?i===we.compositionEnd&&Ce&&(o=oe()):(re="value"in(ne=r)?ne.value:ne.textContent,Ce=!0)),i=fe.getPooled(i,t,n,r),o?i.data=o:null!==(o=_e(n))&&(i.data=o),W(i),o=i):o=null,(e=be?function(e,t){switch(e){case"compositionend":return _e(t);case"keypress":return 32!==t.which?null:(Se=!0,ve);case"textInput":return(e=t.data)===ve&&Se?null:e;default:return null}}(e,n):function(e,t){if(Ce)return"compositionend"===e||!me&&xe(e,t)?(e=oe(),ie=re=ne=null,Ce=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ye&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))?((t=pe.getPooled(we.beforeInput,t,n,r)).data=e,W(t)):t=null,null===o?t:null===t?o:[o,t]}},ke=null,Ee=null,Re=null;function Pe(e){if(e=x(e)){"function"!=typeof ke&&s("280");var t=S(e.stateNode);ke(e.stateNode,e.type,t)}}function Ae(e){Ee?Re?Re.push(e):Re=[e]:Ee=e}function je(){if(Ee){var e=Ee,t=Re;if(Re=Ee=null,Pe(e),t)for(e=0;e<t.length;e++)Pe(t[e])}}function Ie(e,t){return e(t)}function Oe(e,t,n){return e(t,n)}function Me(){}var De=!1;function Ne(e,t){if(De)return e(t);De=!0;try{return Ie(e,t)}finally{De=!1,(null!==Ee||null!==Re)&&(Me(),je())}}var Le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fe(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Le[e.type]:"textarea"===t}function Ue(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function qe(e){if(!G)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t}function Be(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ze(e){e._valueTracker||(e._valueTracker=function(e){var t=Be(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Ve(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Be(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}var We=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;We.hasOwnProperty("ReactCurrentDispatcher")||(We.ReactCurrentDispatcher={current:null});var Ge=/^(.*)[\\\/]/,$e="function"==typeof Symbol&&Symbol.for,He=$e?Symbol.for("react.element"):60103,Qe=$e?Symbol.for("react.portal"):60106,Ke=$e?Symbol.for("react.fragment"):60107,Ye=$e?Symbol.for("react.strict_mode"):60108,Je=$e?Symbol.for("react.profiler"):60114,Xe=$e?Symbol.for("react.provider"):60109,Ze=$e?Symbol.for("react.context"):60110,et=$e?Symbol.for("react.concurrent_mode"):60111,tt=$e?Symbol.for("react.forward_ref"):60112,nt=$e?Symbol.for("react.suspense"):60113,rt=$e?Symbol.for("react.memo"):60115,it=$e?Symbol.for("react.lazy"):60116,ot="function"==typeof Symbol&&Symbol.iterator;function st(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=ot&&e[ot]||e["@@iterator"])?e:null}function at(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case et:return"ConcurrentMode";case Ke:return"Fragment";case Qe:return"Portal";case Je:return"Profiler";case Ye:return"StrictMode";case nt:return"Suspense"}if("object"==typeof e)switch(e.$$typeof){case Ze:return"Context.Consumer";case Xe:return"Context.Provider";case tt:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case rt:return at(e.type);case it:if(e=1===e._status?e._result:null)return at(e)}return null}function ct(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,o=at(e.type);n=null,r&&(n=at(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(Ge,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}t+=n,e=e.return}while(e);return t}var ut=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,lt=Object.prototype.hasOwnProperty,dt={},ft={};function pt(e,t,n,r,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t}var ht={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ht[e]=new pt(e,0,!1,e,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ht[t]=new pt(t,1,!1,e[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){ht[e]=new pt(e,2,!1,e.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ht[e]=new pt(e,2,!1,e,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ht[e]=new pt(e,3,!1,e.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(e){ht[e]=new pt(e,3,!0,e,null)}),["capture","download"].forEach(function(e){ht[e]=new pt(e,4,!1,e,null)}),["cols","rows","size","span"].forEach(function(e){ht[e]=new pt(e,6,!1,e,null)}),["rowSpan","start"].forEach(function(e){ht[e]=new pt(e,5,!1,e.toLowerCase(),null)});var mt=/[\-:]([a-z])/g;function gt(e){return e[1].toUpperCase()}function bt(e,t,n,r){var i=ht.hasOwnProperty(t)?ht[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!lt.call(ft,e)||!lt.call(dt,e)&&(ut.test(e)?ft[e]=!0:(dt[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function yt(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function vt(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function wt(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=yt(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function St(e,t){null!=(t=t.checked)&&bt(e,"checked",t,!1)}function xt(e,t){St(e,t);var n=yt(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Ct(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ct(e,t.type,yt(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function _t(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Ct(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(mt,gt);ht[t]=new pt(t,1,!1,e,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(mt,gt);ht[t]=new pt(t,1,!1,e,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(mt,gt);ht[t]=new pt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace")}),["tabIndex","crossOrigin"].forEach(function(e){ht[e]=new pt(e,1,!1,e.toLowerCase(),null)});var Tt={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function kt(e,t,n){return(e=ce.getPooled(Tt.change,e,t,n)).type="change",Ae(n),W(e),e}var Et=null,Rt=null;function Pt(e){j(e)}function At(e){if(Ve(L(e)))return e}function jt(e,t){if("change"===e)return t}var It=!1;function Ot(){Et&&(Et.detachEvent("onpropertychange",Mt),Rt=Et=null)}function Mt(e){"value"===e.propertyName&&At(Rt)&&Ne(Pt,e=kt(Rt,e,Ue(e)))}function Dt(e,t,n){"focus"===e?(Ot(),Rt=n,(Et=t).attachEvent("onpropertychange",Mt)):"blur"===e&&Ot()}function Nt(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return At(Rt)}function Lt(e,t){if("click"===e)return At(t)}function Ft(e,t){if("input"===e||"change"===e)return At(t)}G&&(It=qe("input")&&(!document.documentMode||9<document.documentMode));var Ut={eventTypes:Tt,_isInputEventSupported:It,extractEvents:function(e,t,n,r){var i=t?L(t):window,o=void 0,s=void 0,a=i.nodeName&&i.nodeName.toLowerCase();if("select"===a||"input"===a&&"file"===i.type?o=jt:Fe(i)?It?o=Ft:(o=Nt,s=Dt):(a=i.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(o=Lt),o&&(o=o(e,t)))return kt(o,n,r);s&&s(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&Ct(i,"number",i.value)}},qt=ce.extend({view:null,detail:null}),Bt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zt(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Bt[e])&&!!t[e]}function Vt(){return zt}var Wt=0,Gt=0,$t=!1,Ht=!1,Qt=qt.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Vt,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Wt;return Wt=e.screenX,$t?"mousemove"===e.type?e.screenX-t:0:($t=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Gt;return Gt=e.screenY,Ht?"mousemove"===e.type?e.screenY-t:0:(Ht=!0,0)}}),Kt=Qt.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Yt={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Jt={eventTypes:Yt,extractEvents:function(e,t,n,r){var i="mouseover"===e||"pointerover"===e,o="mouseout"===e||"pointerout"===e;if(i&&(n.relatedTarget||n.fromElement)||!o&&!i)return null;if(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,o?(o=t,t=(t=n.relatedTarget||n.toElement)?D(t):null):o=null,o===t)return null;var s=void 0,a=void 0,c=void 0,u=void 0;"mouseout"===e||"mouseover"===e?(s=Qt,a=Yt.mouseLeave,c=Yt.mouseEnter,u="mouse"):"pointerout"!==e&&"pointerover"!==e||(s=Kt,a=Yt.pointerLeave,c=Yt.pointerEnter,u="pointer");var l=null==o?i:L(o);if(i=null==t?i:L(t),(e=s.getPooled(a,o,n,r)).type=u+"leave",e.target=l,e.relatedTarget=i,(n=s.getPooled(c,t,n,r)).type=u+"enter",n.target=i,n.relatedTarget=l,r=t,o&&r)e:{for(i=r,u=0,s=t=o;s;s=U(s))u++;for(s=0,c=i;c;c=U(c))s++;for(;0<u-s;)t=U(t),u--;for(;0<s-u;)i=U(i),s--;for(;u--;){if(t===i||t===i.alternate)break e;t=U(t),i=U(i)}t=null}else t=null;for(i=t,t=[];o&&o!==i&&(null===(u=o.alternate)||u!==i);)t.push(o),o=U(o);for(o=[];r&&r!==i&&(null===(u=r.alternate)||u!==i);)o.push(r),r=U(r);for(r=0;r<t.length;r++)z(t[r],"bubbled",e);for(r=o.length;0<r--;)z(o[r],"captured",n);return[e,n]}};function Xt(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t}var Zt=Object.prototype.hasOwnProperty;function en(e,t){if(Xt(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Zt.call(t,n[r])||!Xt(e[n[r]],t[n[r]]))return!1;return!0}function tn(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if(0!=(2&t.effectTag))return 1;for(;t.return;)if(0!=(2&(t=t.return).effectTag))return 1}return 3===t.tag?2:3}function nn(e){2!==tn(e)&&s("188")}function rn(e){if(!(e=function(e){var t=e.alternate;if(!t)return 3===(t=tn(e))&&s("188"),1===t?null:e;for(var n=e,r=t;;){var i=n.return,o=i?i.alternate:null;if(!i||!o)break;if(i.child===o.child){for(var a=i.child;a;){if(a===n)return nn(i),e;if(a===r)return nn(i),t;a=a.sibling}s("188")}if(n.return!==r.return)n=i,r=o;else{a=!1;for(var c=i.child;c;){if(c===n){a=!0,n=i,r=o;break}if(c===r){a=!0,r=i,n=o;break}c=c.sibling}if(!a){for(c=o.child;c;){if(c===n){a=!0,n=o,r=i;break}if(c===r){a=!0,r=o,n=i;break}c=c.sibling}a||s("189")}}n.alternate!==r&&s("190")}return 3!==n.tag&&s("188"),n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}var on=ce.extend({animationName:null,elapsedTime:null,pseudoElement:null}),sn=ce.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),an=qt.extend({relatedTarget:null});function cn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var un={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ln={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dn=qt.extend({key:function(e){if(e.key){var t=un[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=cn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?ln[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Vt,charCode:function(e){return"keypress"===e.type?cn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?cn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),fn=Qt.extend({dataTransfer:null}),pn=qt.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Vt}),hn=ce.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),mn=Qt.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),gn=[["abort","abort"],[J,"animationEnd"],[X,"animationIteration"],[Z,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[ee,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],bn={},yn={};function vn(e,t){var n=e[0],r="on"+((e=e[1])[0].toUpperCase()+e.slice(1));t={phasedRegistrationNames:{bubbled:r,captured:r+"Capture"},dependencies:[n],isInteractive:t},bn[e]=t,yn[n]=t}[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["auxclick","auxClick"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(e){vn(e,!0)}),gn.forEach(function(e){vn(e,!1)});var wn={eventTypes:bn,isInteractiveTopLevelEventType:function(e){return void 0!==(e=yn[e])&&!0===e.isInteractive},extractEvents:function(e,t,n,r){var i=yn[e];if(!i)return null;switch(e){case"keypress":if(0===cn(n))return null;case"keydown":case"keyup":e=dn;break;case"blur":case"focus":e=an;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Qt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=fn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=pn;break;case J:case X:case Z:e=on;break;case ee:e=hn;break;case"scroll":e=qt;break;case"wheel":e=mn;break;case"copy":case"cut":case"paste":e=sn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Kt;break;default:e=ce}return W(t=e.getPooled(i,t,n,r)),t}},Sn=wn.isInteractiveTopLevelEventType,xn=[];function _n(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r;for(r=n;r.return;)r=r.return;if(!(r=3!==r.tag?null:r.stateNode.containerInfo))break;e.ancestors.push(n),n=D(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=Ue(e.nativeEvent);r=e.topLevelType;for(var o=e.nativeEvent,s=null,a=0;a<b.length;a++){var c=b[a];c&&(c=c.extractEvents(r,t,o,i))&&(s=T(s,c))}j(s)}}var Cn=!0;function Tn(e,t){if(!t)return null;var n=(Sn(e)?En:Rn).bind(null,e);t.addEventListener(e,n,!1)}function kn(e,t){if(!t)return null;var n=(Sn(e)?En:Rn).bind(null,e);t.addEventListener(e,n,!0)}function En(e,t){Oe(Rn,e,t)}function Rn(e,t){if(Cn){var n=Ue(t);if(null===(n=D(n))||"number"!=typeof n.tag||2===tn(n)||(n=null),xn.length){var r=xn.pop();r.topLevelType=e,r.nativeEvent=t,r.targetInst=n,e=r}else e={topLevelType:e,nativeEvent:t,targetInst:n,ancestors:[]};try{Ne(_n,e)}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>xn.length&&xn.push(e)}}}var Pn={},An=0,jn="_reactListenersID"+(""+Math.random()).slice(2);function In(e){return Object.prototype.hasOwnProperty.call(e,jn)||(e[jn]=An++,Pn[e[jn]]={}),Pn[e[jn]]}function On(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Mn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Dn(e,t){var n,r=Mn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Mn(r)}}function Nn(){for(var e=window,t=On();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=On((e=t.contentWindow).document)}return t}function Ln(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function Fn(e){var t=Nn(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(n.ownerDocument.documentElement,n)){if(null!==r&&Ln(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=Dn(n,o);var s=Dn(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Un=G&&"documentMode"in document&&11>=document.documentMode,qn={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Bn=null,zn=null,Vn=null,Wn=!1;function Gn(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Wn||null==Bn||Bn!==On(n)?null:("selectionStart"in(n=Bn)&&Ln(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Vn&&en(Vn,n)?null:(Vn=n,(e=ce.getPooled(qn.select,zn,e,t)).type="select",e.target=Bn,W(e),e))}var $n={eventTypes:qn,extractEvents:function(e,t,n,r){var i,o=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!o)){e:{o=In(o),i=w.onSelect;for(var s=0;s<i.length;s++){var a=i[s];if(!o.hasOwnProperty(a)||!o[a]){o=!1;break e}}o=!0}i=!o}if(i)return null;switch(o=t?L(t):window,e){case"focus":(Fe(o)||"true"===o.contentEditable)&&(Bn=o,zn=t,Vn=null);break;case"blur":Vn=zn=Bn=null;break;case"mousedown":Wn=!0;break;case"contextmenu":case"mouseup":case"dragend":return Wn=!1,Gn(n,r);case"selectionchange":if(Un)break;case"keydown":case"keyup":return Gn(n,r)}return null}};function Hn(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,function(e){null!=e&&(t+=e)}),t}(t.children))&&(e.children=t),e}function Qn(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+yt(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Kn(e,t){return null!=t.dangerouslySetInnerHTML&&s("91"),i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Yn(e,t){var n=t.value;null==n&&(n=t.defaultValue,null!=(t=t.children)&&(null!=n&&s("92"),Array.isArray(t)&&(1>=t.length||s("93"),t=t[0]),n=t),null==n&&(n="")),e._wrapperState={initialValue:yt(n)}}function Jn(e,t){var n=yt(t.value),r=yt(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Xn(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)}P.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),S=F,x=N,_=L,P.injectEventPluginsByName({SimpleEventPlugin:wn,EnterLeaveEventPlugin:Jt,ChangeEventPlugin:Ut,SelectEventPlugin:$n,BeforeInputEventPlugin:Te});var Zn={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function er(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tr(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?er(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var nr,rr=void 0,ir=(nr=function(e,t){if(e.namespaceURI!==Zn.svg||"innerHTML"in e)e.innerHTML=t;else{for((rr=rr||document.createElement("div")).innerHTML="<svg>"+t+"</svg>",t=rr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return nr(e,t)})}:nr);function or(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var sr={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ar=["Webkit","ms","Moz","O"];function cr(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||sr.hasOwnProperty(e)&&sr[e]?(""+t).trim():t+"px"}function ur(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=cr(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(sr).forEach(function(e){ar.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),sr[t]=sr[e]})});var lr=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dr(e,t){t&&(lr[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&s("137",e,""),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&s("60"),"object"==typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML||s("61")),null!=t.style&&"object"!=typeof t.style&&s("62",""))}function fr(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function pr(e,t){var n=In(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=w[t];for(var r=0;r<t.length;r++){var i=t[r];if(!n.hasOwnProperty(i)||!n[i]){switch(i){case"scroll":kn("scroll",e);break;case"focus":case"blur":kn("focus",e),kn("blur",e),n.blur=!0,n.focus=!0;break;case"cancel":case"close":qe(i)&&kn(i,e);break;case"invalid":case"submit":case"reset":break;default:-1===te.indexOf(i)&&Tn(i,e)}n[i]=!0}}}function hr(){}var mr=null,gr=null;function br(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function yr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var vr="function"==typeof setTimeout?setTimeout:void 0,wr="function"==typeof clearTimeout?clearTimeout:void 0,Sr=o.unstable_scheduleCallback,xr=o.unstable_cancelCallback;function _r(e){for(e=e.nextSibling;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}function Cr(e){for(e=e.firstChild;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}new Set;var Tr=[],kr=-1;function Er(e){0>kr||(e.current=Tr[kr],Tr[kr]=null,kr--)}function Rr(e,t){Tr[++kr]=e.current,e.current=t}var Pr={},Ar={current:Pr},jr={current:!1},Ir=Pr;function Or(e,t){var n=e.type.contextTypes;if(!n)return Pr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Mr(e){return null!=(e=e.childContextTypes)}function Dr(e){Er(jr),Er(Ar)}function Nr(e){Er(jr),Er(Ar)}function Lr(e,t,n){Ar.current!==Pr&&s("168"),Rr(Ar,t),Rr(jr,n)}function Fr(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var o in r=r.getChildContext())o in e||s("108",at(t)||"Unknown",o);return i({},n,r)}function Ur(e){var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||Pr,Ir=Ar.current,Rr(Ar,t),Rr(jr,jr.current),!0}function qr(e,t,n){var r=e.stateNode;r||s("169"),n?(t=Fr(e,t,Ir),r.__reactInternalMemoizedMergedChildContext=t,Er(jr),Er(Ar),Rr(Ar,t)):Er(jr),Rr(jr,n)}var Br=null,zr=null;function Vr(e){return function(t){try{return e(t)}catch(e){}}}function Wr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.contextDependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Gr(e,t,n,r){return new Wr(e,t,n,r)}function $r(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Hr(e,t){var n=e.alternate;return null===n?((n=Gr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,n.contextDependencies=e.contextDependencies,n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Qr(e,t,n,r,i,o){var a=2;if(r=e,"function"==typeof e)$r(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case Ke:return Kr(n.children,i,o,t);case et:return Yr(n,3|i,o,t);case Ye:return Yr(n,2|i,o,t);case Je:return(e=Gr(12,n,t,4|i)).elementType=Je,e.type=Je,e.expirationTime=o,e;case nt:return(e=Gr(13,n,t,i)).elementType=nt,e.type=nt,e.expirationTime=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case Xe:a=10;break e;case Ze:a=9;break e;case tt:a=11;break e;case rt:a=14;break e;case it:a=16,r=null;break e}s("130",null==e?e:typeof e,"")}return(t=Gr(a,n,t,i)).elementType=e,t.type=r,t.expirationTime=o,t}function Kr(e,t,n,r){return(e=Gr(7,e,r,t)).expirationTime=n,e}function Yr(e,t,n,r){return e=Gr(8,e,r,t),t=0==(1&t)?Ye:et,e.elementType=t,e.type=t,e.expirationTime=n,e}function Jr(e,t,n){return(e=Gr(6,e,null,t)).expirationTime=n,e}function Xr(e,t,n){return(t=Gr(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Zr(e,t){e.didError=!1;var n=e.earliestPendingTime;0===n?e.earliestPendingTime=e.latestPendingTime=t:n<t?e.earliestPendingTime=t:e.latestPendingTime>t&&(e.latestPendingTime=t),ni(t,e)}function ei(e,t){e.didError=!1,e.latestPingedTime>=t&&(e.latestPingedTime=0);var n=e.earliestPendingTime,r=e.latestPendingTime;n===t?e.earliestPendingTime=r===t?e.latestPendingTime=0:r:r===t&&(e.latestPendingTime=n),n=e.earliestSuspendedTime,r=e.latestSuspendedTime,0===n?e.earliestSuspendedTime=e.latestSuspendedTime=t:n<t?e.earliestSuspendedTime=t:r>t&&(e.latestSuspendedTime=t),ni(t,e)}function ti(e,t){var n=e.earliestPendingTime;return n>t&&(t=n),(e=e.earliestSuspendedTime)>t&&(t=e),t}function ni(e,t){var n=t.earliestSuspendedTime,r=t.latestSuspendedTime,i=t.earliestPendingTime,o=t.latestPingedTime;0===(i=0!==i?i:o)&&(0===e||r<e)&&(i=r),0!==(e=i)&&n>e&&(e=n),t.nextExpirationTimeToWorkOn=i,t.expirationTime=e}function ri(e,t){if(e&&e.defaultProps)for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var ii=(new r.Component).refs;function oi(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:i({},t,n),e.memoizedState=n,null!==(r=e.updateQueue)&&0===e.expirationTime&&(r.baseState=n)}var si={isMounted:function(e){return!!(e=e._reactInternalFiber)&&2===tn(e)},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=xa(),i=Yo(r=Ks(r,e));i.payload=t,null!=n&&(i.callback=n),Vs(),Xo(e,i),Xs(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=xa(),i=Yo(r=Ks(r,e));i.tag=Wo,i.payload=t,null!=n&&(i.callback=n),Vs(),Xo(e,i),Xs(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=xa(),r=Yo(n=Ks(n,e));r.tag=Go,null!=t&&(r.callback=t),Vs(),Xo(e,r),Xs(e,n)}};function ai(e,t,n,r,i,o,s){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!en(n,r)||!en(i,o))}function ci(e,t,n){var r=!1,i=Pr,o=t.contextType;return"object"==typeof o&&null!==o?o=zo(o):(i=Mr(t)?Ir:Ar.current,o=(r=null!=(r=t.contextTypes))?Or(e,i):Pr),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=si,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function ui(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&si.enqueueReplaceState(t,t.state,null)}function li(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ii;var o=t.contextType;"object"==typeof o&&null!==o?i.context=zo(o):(o=Mr(t)?Ir:Ar.current,i.context=Or(e,o)),null!==(o=e.updateQueue)&&(ns(e,o,n,i,r),i.state=e.memoizedState),"function"==typeof(o=t.getDerivedStateFromProps)&&(oi(e,t,o,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&si.enqueueReplaceState(i,i.state,null),null!==(o=e.updateQueue)&&(ns(e,o,n,i,r),i.state=e.memoizedState)),"function"==typeof i.componentDidMount&&(e.effectTag|=4)}var di=Array.isArray;function fi(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){n=n._owner;var r=void 0;n&&(1!==n.tag&&s("309"),r=n.stateNode),r||s("147",e);var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===ii&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}"string"!=typeof e&&s("284"),n._owner||s("290",e)}return e}function pi(e,t){"textarea"!==e.type&&s("31","[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function hi(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t,n){return(e=Hr(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function a(t){return e&&null===t.alternate&&(t.effectTag=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=Jr(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=fi(e,t,n),r.return=e,r):((r=Qr(n.type,n.key,n.props,null,e.mode,r)).ref=fi(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Xr(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Kr(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Jr(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case He:return(n=Qr(t.type,t.key,t.props,null,e.mode,n)).ref=fi(e,null,t),n.return=e,n;case Qe:return(t=Xr(t,e.mode,n)).return=e,t}if(di(t)||st(t))return(t=Kr(t,e.mode,n,null)).return=e,t;pi(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:c(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case He:return n.key===i?n.type===Ke?d(e,t,n.props.children,r,i):u(e,t,n,r):null;case Qe:return n.key===i?l(e,t,n,r):null}if(di(n)||st(n))return null!==i?null:d(e,t,n,r,null);pi(e,n)}return null}function h(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return c(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case He:return e=e.get(null===r.key?n:r.key)||null,r.type===Ke?d(t,e,r.props.children,i,r.key):u(t,e,r,i);case Qe:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(di(r)||st(r))return d(t,e=e.get(n)||null,r,i,null);pi(t,r)}return null}function m(i,s,a,c){for(var u=null,l=null,d=s,m=s=0,g=null;null!==d&&m<a.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var b=p(i,d,a[m],c);if(null===b){null===d&&(d=g);break}e&&d&&null===b.alternate&&t(i,d),s=o(b,s,m),null===l?u=b:l.sibling=b,l=b,d=g}if(m===a.length)return n(i,d),u;if(null===d){for(;m<a.length;m++)(d=f(i,a[m],c))&&(s=o(d,s,m),null===l?u=d:l.sibling=d,l=d);return u}for(d=r(i,d);m<a.length;m++)(g=h(d,i,m,a[m],c))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=o(g,s,m),null===l?u=g:l.sibling=g,l=g);return e&&d.forEach(function(e){return t(i,e)}),u}function g(i,a,c,u){var l=st(c);"function"!=typeof l&&s("150"),null==(c=l.call(c))&&s("151");for(var d=l=null,m=a,g=a=0,b=null,y=c.next();null!==m&&!y.done;g++,y=c.next()){m.index>g?(b=m,m=null):b=m.sibling;var v=p(i,m,y.value,u);if(null===v){m||(m=b);break}e&&m&&null===v.alternate&&t(i,m),a=o(v,a,g),null===d?l=v:d.sibling=v,d=v,m=b}if(y.done)return n(i,m),l;if(null===m){for(;!y.done;g++,y=c.next())null!==(y=f(i,y.value,u))&&(a=o(y,a,g),null===d?l=y:d.sibling=y,d=y);return l}for(m=r(i,m);!y.done;g++,y=c.next())null!==(y=h(m,i,g,y.value,u))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=o(y,a,g),null===d?l=y:d.sibling=y,d=y);return e&&m.forEach(function(e){return t(i,e)}),l}return function(e,r,o,c){var u="object"==typeof o&&null!==o&&o.type===Ke&&null===o.key;u&&(o=o.props.children);var l="object"==typeof o&&null!==o;if(l)switch(o.$$typeof){case He:e:{for(l=o.key,u=r;null!==u;){if(u.key===l){if(7===u.tag?o.type===Ke:u.elementType===o.type){n(e,u.sibling),(r=i(u,o.type===Ke?o.props.children:o.props)).ref=fi(e,u,o),r.return=e,e=r;break e}n(e,u);break}t(e,u),u=u.sibling}o.type===Ke?((r=Kr(o.props.children,e.mode,c,o.key)).return=e,e=r):((c=Qr(o.type,o.key,o.props,null,e.mode,c)).ref=fi(e,r,o),c.return=e,e=c)}return a(e);case Qe:e:{for(u=o.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Xr(o,e.mode,c)).return=e,e=r}return a(e)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=Jr(o,e.mode,c)).return=e,e=r),a(e);if(di(o))return m(e,r,o,c);if(st(o))return g(e,r,o,c);if(l&&pi(e,o),void 0===o&&!u)switch(e.tag){case 1:case 0:s("152",(c=e.type).displayName||c.name||"Component")}return n(e,r)}}var mi=hi(!0),gi=hi(!1),bi={},yi={current:bi},vi={current:bi},wi={current:bi};function Si(e){return e===bi&&s("174"),e}function xi(e,t){Rr(wi,t),Rr(vi,e),Rr(yi,bi);var n=t.nodeType;switch(n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:tr(null,"");break;default:t=tr(t=(n=8===n?t.parentNode:t).namespaceURI||null,n=n.tagName)}Er(yi),Rr(yi,t)}function _i(e){Er(yi),Er(vi),Er(wi)}function Ci(e){Si(wi.current);var t=Si(yi.current),n=tr(t,e.type);t!==n&&(Rr(vi,e),Rr(yi,n))}function Ti(e){vi.current===e&&(Er(yi),Er(vi))}var ki=0,Ei=2,Ri=4,Pi=8,Ai=16,ji=32,Ii=64,Oi=128,Mi=We.ReactCurrentDispatcher,Di=0,Ni=null,Li=null,Fi=null,Ui=null,qi=null,Bi=null,zi=0,Vi=null,Wi=0,Gi=!1,$i=null,Hi=0;function Qi(){s("321")}function Ki(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Xt(e[n],t[n]))return!1;return!0}function Yi(e,t,n,r,i,o){if(Di=o,Ni=t,Fi=null!==e?e.memoizedState:null,Mi.current=null===Fi?uo:lo,t=n(r,i),Gi){do{Gi=!1,Hi+=1,Fi=null!==e?e.memoizedState:null,Bi=Ui,Vi=qi=Li=null,Mi.current=lo,t=n(r,i)}while(Gi);$i=null,Hi=0}return Mi.current=co,(e=Ni).memoizedState=Ui,e.expirationTime=zi,e.updateQueue=Vi,e.effectTag|=Wi,e=null!==Li&&null!==Li.next,Di=0,Bi=qi=Ui=Fi=Li=Ni=null,zi=0,Vi=null,Wi=0,e&&s("300"),t}function Ji(){Mi.current=co,Di=0,Bi=qi=Ui=Fi=Li=Ni=null,zi=0,Vi=null,Wi=0,Gi=!1,$i=null,Hi=0}function Xi(){var e={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===qi?Ui=qi=e:qi=qi.next=e,qi}function Zi(){if(null!==Bi)Bi=(qi=Bi).next,Fi=null!==(Li=Fi)?Li.next:null;else{null===Fi&&s("310");var e={memoizedState:(Li=Fi).memoizedState,baseState:Li.baseState,queue:Li.queue,baseUpdate:Li.baseUpdate,next:null};qi=null===qi?Ui=e:qi.next=e,Fi=Li.next}return qi}function eo(e,t){return"function"==typeof t?t(e):t}function to(e){var t=Zi(),n=t.queue;if(null===n&&s("311"),n.lastRenderedReducer=e,0<Hi){var r=n.dispatch;if(null!==$i){var i=$i.get(n);if(void 0!==i){$i.delete(n);var o=t.memoizedState;do{o=e(o,i.action),i=i.next}while(null!==i);return Xt(o,t.memoizedState)||(xo=!0),t.memoizedState=o,t.baseUpdate===n.last&&(t.baseState=o),n.lastRenderedState=o,[o,r]}}return[t.memoizedState,r]}r=n.last;var a=t.baseUpdate;if(o=t.baseState,null!==a?(null!==r&&(r.next=null),r=a.next):r=null!==r?r.next:null,null!==r){var c=i=null,u=r,l=!1;do{var d=u.expirationTime;d<Di?(l||(l=!0,c=a,i=o),d>zi&&(zi=d)):o=u.eagerReducer===e?u.eagerState:e(o,u.action),a=u,u=u.next}while(null!==u&&u!==r);l||(c=a,i=o),Xt(o,t.memoizedState)||(xo=!0),t.memoizedState=o,t.baseUpdate=c,t.baseState=i,n.lastRenderedState=o}return[t.memoizedState,n.dispatch]}function no(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===Vi?(Vi={lastEffect:null}).lastEffect=e.next=e:null===(t=Vi.lastEffect)?Vi.lastEffect=e.next=e:(n=t.next,t.next=e,e.next=n,Vi.lastEffect=e),e}function ro(e,t,n,r){var i=Xi();Wi|=e,i.memoizedState=no(t,n,void 0,void 0===r?null:r)}function io(e,t,n,r){var i=Zi();r=void 0===r?null:r;var o=void 0;if(null!==Li){var s=Li.memoizedState;if(o=s.destroy,null!==r&&Ki(r,s.deps))return void no(ki,n,o,r)}Wi|=e,i.memoizedState=no(t,n,o,r)}function oo(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function so(){}function ao(e,t,n){25>Hi||s("301");var r=e.alternate;if(e===Ni||null!==r&&r===Ni)if(Gi=!0,e={expirationTime:Di,action:n,eagerReducer:null,eagerState:null,next:null},null===$i&&($i=new Map),void 0===(n=$i.get(t)))$i.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}else{Vs();var i=xa(),o={expirationTime:i=Ks(i,e),action:n,eagerReducer:null,eagerState:null,next:null},a=t.last;if(null===a)o.next=o;else{var c=a.next;null!==c&&(o.next=c),a.next=o}if(t.last=o,0===e.expirationTime&&(null===r||0===r.expirationTime)&&null!==(r=t.lastRenderedReducer))try{var u=t.lastRenderedState,l=r(u,n);if(o.eagerReducer=r,o.eagerState=l,Xt(l,u))return}catch(e){}Xs(e,i)}}var co={readContext:zo,useCallback:Qi,useContext:Qi,useEffect:Qi,useImperativeHandle:Qi,useLayoutEffect:Qi,useMemo:Qi,useReducer:Qi,useRef:Qi,useState:Qi,useDebugValue:Qi},uo={readContext:zo,useCallback:function(e,t){return Xi().memoizedState=[e,void 0===t?null:t],e},useContext:zo,useEffect:function(e,t){return ro(516,Oi|Ii,e,t)},useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,ro(4,Ri|ji,oo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ro(4,Ri|ji,e,t)},useMemo:function(e,t){var n=Xi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Xi();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={last:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=ao.bind(null,Ni,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Xi().memoizedState=e},useState:function(e){var t=Xi();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={last:null,dispatch:null,lastRenderedReducer:eo,lastRenderedState:e}).dispatch=ao.bind(null,Ni,e),[t.memoizedState,e]},useDebugValue:so},lo={readContext:zo,useCallback:function(e,t){var n=Zi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ki(t,r[1])?r[0]:(n.memoizedState=[e,t],e)},useContext:zo,useEffect:function(e,t){return io(516,Oi|Ii,e,t)},useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,io(4,Ri|ji,oo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return io(4,Ri|ji,e,t)},useMemo:function(e,t){var n=Zi();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ki(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)},useReducer:to,useRef:function(){return Zi().memoizedState},useState:function(e){return to(eo)},useDebugValue:so},fo=null,po=null,ho=!1;function mo(e,t){var n=Gr(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function go(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function bo(e){if(ho){var t=po;if(t){var n=t;if(!go(e,t)){if(!(t=_r(n))||!go(e,t))return e.effectTag|=2,ho=!1,void(fo=e);mo(fo,n)}fo=e,po=Cr(t)}else e.effectTag|=2,ho=!1,fo=e}}function yo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&18!==e.tag;)e=e.return;fo=e}function vo(e){if(e!==fo)return!1;if(!ho)return yo(e),ho=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!yr(t,e.memoizedProps))for(t=po;t;)mo(e,t),t=_r(t);return yo(e),po=fo?_r(e.stateNode):null,!0}function wo(){po=fo=null,ho=!1}var So=We.ReactCurrentOwner,xo=!1;function _o(e,t,n,r){t.child=null===e?gi(t,null,n,r):mi(t,e.child,n,r)}function Co(e,t,n,r,i){n=n.render;var o=t.ref;return Bo(t,i),r=Yi(e,t,n,r,o,i),null===e||xo?(t.effectTag|=1,_o(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Oo(e,t,i))}function To(e,t,n,r,i,o){if(null===e){var s=n.type;return"function"!=typeof s||$r(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Qr(n.type,null,r,null,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,ko(e,t,s,r,i,o))}return s=e.child,i<o&&(i=s.memoizedProps,(n=null!==(n=n.compare)?n:en)(i,r)&&e.ref===t.ref)?Oo(e,t,o):(t.effectTag|=1,(e=Hr(s,r)).ref=t.ref,e.return=t,t.child=e)}function ko(e,t,n,r,i,o){return null!==e&&en(e.memoizedProps,r)&&e.ref===t.ref&&(xo=!1,i<o)?Oo(e,t,o):Ro(e,t,n,r,o)}function Eo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Ro(e,t,n,r,i){var o=Mr(n)?Ir:Ar.current;return o=Or(t,o),Bo(t,i),n=Yi(e,t,n,r,o,i),null===e||xo?(t.effectTag|=1,_o(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Oo(e,t,i))}function Po(e,t,n,r,i){if(Mr(n)){var o=!0;Ur(t)}else o=!1;if(Bo(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),ci(t,n,r),li(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var c=s.context,u=n.contextType;"object"==typeof u&&null!==u?u=zo(u):u=Or(t,u=Mr(n)?Ir:Ar.current);var l=n.getDerivedStateFromProps,d="function"==typeof l||"function"==typeof s.getSnapshotBeforeUpdate;d||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==r||c!==u)&&ui(t,s,r,u),Ho=!1;var f=t.memoizedState;c=s.state=f;var p=t.updateQueue;null!==p&&(ns(t,p,r,s,i),c=t.memoizedState),a!==r||f!==c||jr.current||Ho?("function"==typeof l&&(oi(t,n,l,r),c=t.memoizedState),(a=Ho||ai(t,n,a,r,f,c,u))?(d||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(t.effectTag|=4)):("function"==typeof s.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=u,r=a):("function"==typeof s.componentDidMount&&(t.effectTag|=4),r=!1)}else s=t.stateNode,a=t.memoizedProps,s.props=t.type===t.elementType?a:ri(t.type,a),c=s.context,"object"==typeof(u=n.contextType)&&null!==u?u=zo(u):u=Or(t,u=Mr(n)?Ir:Ar.current),(d="function"==typeof(l=n.getDerivedStateFromProps)||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(a!==r||c!==u)&&ui(t,s,r,u),Ho=!1,c=t.memoizedState,f=s.state=c,null!==(p=t.updateQueue)&&(ns(t,p,r,s,i),f=t.memoizedState),a!==r||c!==f||jr.current||Ho?("function"==typeof l&&(oi(t,n,l,r),f=t.memoizedState),(l=Ho||ai(t,n,a,r,c,f,u))?(d||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,u),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,u)),"function"==typeof s.componentDidUpdate&&(t.effectTag|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=u,r=l):("function"!=typeof s.componentDidUpdate||a===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=4),"function"!=typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&c===e.memoizedState||(t.effectTag|=256),r=!1);return Ao(e,t,n,r,o,i)}function Ao(e,t,n,r,i,o){Eo(e,t);var s=0!=(64&t.effectTag);if(!r&&!s)return i&&qr(t,n,!1),Oo(e,t,o);r=t.stateNode,So.current=t;var a=s&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&s?(t.child=mi(t,e.child,null,o),t.child=mi(t,null,a,o)):_o(e,t,a,o),t.memoizedState=r.state,i&&qr(t,n,!0),t.child}function jo(e){var t=e.stateNode;t.pendingContext?Lr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Lr(0,t.context,!1),xi(e,t.containerInfo)}function Io(e,t,n){var r=t.mode,i=t.pendingProps,o=t.memoizedState;if(0==(64&t.effectTag)){o=null;var s=!1}else o={timedOutAt:null!==o?o.timedOutAt:0},s=!0,t.effectTag&=-65;if(null===e)if(s){var a=i.fallback;e=Kr(null,r,0,null),0==(1&t.mode)&&(e.child=null!==t.memoizedState?t.child.child:t.child),r=Kr(a,r,n,null),e.sibling=r,(n=e).return=r.return=t}else n=r=gi(t,null,i.children,n);else null!==e.memoizedState?(a=(r=e.child).sibling,s?(n=i.fallback,i=Hr(r,r.pendingProps),0==(1&t.mode)&&((s=null!==t.memoizedState?t.child.child:t.child)!==r.child&&(i.child=s)),r=i.sibling=Hr(a,n,a.expirationTime),n=i,i.childExpirationTime=0,n.return=r.return=t):n=r=mi(t,r.child,i.children,n)):(a=e.child,s?(s=i.fallback,(i=Kr(null,r,0,null)).child=a,0==(1&t.mode)&&(i.child=null!==t.memoizedState?t.child.child:t.child),(r=i.sibling=Kr(s,r,n,null)).effectTag|=2,n=i,i.childExpirationTime=0,n.return=r.return=t):r=n=mi(t,a,i.children,n)),t.stateNode=e.stateNode;return t.memoizedState=o,t.child=n,r}function Oo(e,t,n){if(null!==e&&(t.contextDependencies=e.contextDependencies),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child&&s("153"),null!==t.child){for(n=Hr(e=t.child,e.pendingProps,e.expirationTime),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Hr(e,e.pendingProps,e.expirationTime)).return=t;n.sibling=null}return t.child}function Mo(e,t,n){var r=t.expirationTime;if(null!==e){if(e.memoizedProps!==t.pendingProps||jr.current)xo=!0;else if(r<n){switch(xo=!1,t.tag){case 3:jo(t),wo();break;case 5:Ci(t);break;case 1:Mr(t.type)&&Ur(t);break;case 4:xi(t,t.stateNode.containerInfo);break;case 10:Uo(t,t.memoizedProps.value);break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?Io(e,t,n):null!==(t=Oo(e,t,n))?t.sibling:null}return Oo(e,t,n)}}else xo=!1;switch(t.expirationTime=0,t.tag){case 2:r=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps;var i=Or(t,Ar.current);if(Bo(t,n),i=Yi(null,t,r,e,i,n),t.effectTag|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,Ji(),Mr(r)){var o=!0;Ur(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null;var a=r.getDerivedStateFromProps;"function"==typeof a&&oi(t,r,a,e),i.updater=si,t.stateNode=i,i._reactInternalFiber=t,li(t,r,e,n),t=Ao(null,t,r,!0,o,n)}else t.tag=0,_o(null,t,i,n),t=t.child;return t;case 16:switch(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),o=t.pendingProps,e=function(e){var t=e._result;switch(e._status){case 1:return t;case 2:case 0:throw t;default:switch(e._status=0,(t=(t=e._ctor)()).then(function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)},function(t){0===e._status&&(e._status=2,e._result=t)}),e._status){case 1:return e._result;case 2:throw e._result}throw e._result=t,t}}(i),t.type=e,i=t.tag=function(e){if("function"==typeof e)return $r(e)?1:0;if(null!=e){if((e=e.$$typeof)===tt)return 11;if(e===rt)return 14}return 2}(e),o=ri(e,o),a=void 0,i){case 0:a=Ro(null,t,e,o,n);break;case 1:a=Po(null,t,e,o,n);break;case 11:a=Co(null,t,e,o,n);break;case 14:a=To(null,t,e,ri(e.type,o),r,n);break;default:s("306",e,"")}return a;case 0:return r=t.type,i=t.pendingProps,Ro(e,t,r,i=t.elementType===r?i:ri(r,i),n);case 1:return r=t.type,i=t.pendingProps,Po(e,t,r,i=t.elementType===r?i:ri(r,i),n);case 3:return jo(t),null===(r=t.updateQueue)&&s("282"),i=null!==(i=t.memoizedState)?i.element:null,ns(t,r,t.pendingProps,null,n),(r=t.memoizedState.element)===i?(wo(),t=Oo(e,t,n)):(i=t.stateNode,(i=(null===e||null===e.child)&&i.hydrate)&&(po=Cr(t.stateNode.containerInfo),fo=t,i=ho=!0),i?(t.effectTag|=2,t.child=gi(t,null,r,n)):(_o(e,t,r,n),wo()),t=t.child),t;case 5:return Ci(t),null===e&&bo(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,yr(r,i)?a=null:null!==o&&yr(r,o)&&(t.effectTag|=16),Eo(e,t),1!==n&&1&t.mode&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(_o(e,t,a,n),t=t.child),t;case 6:return null===e&&bo(t),null;case 13:return Io(e,t,n);case 4:return xi(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=mi(t,null,r,n):_o(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Co(e,t,r,i=t.elementType===r?i:ri(r,i),n);case 7:return _o(e,t,t.pendingProps,n),t.child;case 8:case 12:return _o(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,Uo(t,o=i.value),null!==a){var c=a.value;if(0===(o=Xt(c,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(c,o):1073741823))){if(a.children===i.children&&!jr.current){t=Oo(e,t,n);break e}}else for(null!==(c=t.child)&&(c.return=t);null!==c;){var u=c.contextDependencies;if(null!==u){a=c.child;for(var l=u.first;null!==l;){if(l.context===r&&0!=(l.observedBits&o)){1===c.tag&&((l=Yo(n)).tag=Go,Xo(c,l)),c.expirationTime<n&&(c.expirationTime=n),null!==(l=c.alternate)&&l.expirationTime<n&&(l.expirationTime=n),l=n;for(var d=c.return;null!==d;){var f=d.alternate;if(d.childExpirationTime<l)d.childExpirationTime=l,null!==f&&f.childExpirationTime<l&&(f.childExpirationTime=l);else{if(!(null!==f&&f.childExpirationTime<l))break;f.childExpirationTime=l}d=d.return}u.expirationTime<n&&(u.expirationTime=n);break}l=l.next}}else a=10===c.tag&&c.type===t.type?null:c.child;if(null!==a)a.return=c;else for(a=c;null!==a;){if(a===t){a=null;break}if(null!==(c=a.sibling)){c.return=a.return,a=c;break}a=a.return}c=a}}_o(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,Bo(t,n),r=r(i=zo(i,o.unstable_observedBits)),t.effectTag|=1,_o(e,t,r,n),t.child;case 14:return o=ri(i=t.type,t.pendingProps),To(e,t,i,o=ri(i.type,o),r,n);case 15:return ko(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ri(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,Mr(r)?(e=!0,Ur(t)):e=!1,Bo(t,n),ci(t,r,i),li(t,r,i,n),Ao(null,t,r,!0,e,n)}s("156")}var Do={current:null},No=null,Lo=null,Fo=null;function Uo(e,t){var n=e.type._context;Rr(Do,n._currentValue),n._currentValue=t}function qo(e){var t=Do.current;Er(Do),e.type._context._currentValue=t}function Bo(e,t){No=e,Fo=Lo=null;var n=e.contextDependencies;null!==n&&n.expirationTime>=t&&(xo=!0),e.contextDependencies=null}function zo(e,t){return Fo!==e&&!1!==t&&0!==t&&("number"==typeof t&&1073741823!==t||(Fo=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Lo?(null===No&&s("308"),Lo=t,No.contextDependencies={first:t,expirationTime:0}):Lo=Lo.next=t),e._currentValue}var Vo=0,Wo=1,Go=2,$o=3,Ho=!1;function Qo(e){return{baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Ko(e){return{baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Yo(e){return{expirationTime:e,tag:Vo,payload:null,callback:null,next:null,nextEffect:null}}function Jo(e,t){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t)}function Xo(e,t){var n=e.alternate;if(null===n){var r=e.updateQueue,i=null;null===r&&(r=e.updateQueue=Qo(e.memoizedState))}else r=e.updateQueue,i=n.updateQueue,null===r?null===i?(r=e.updateQueue=Qo(e.memoizedState),i=n.updateQueue=Qo(n.memoizedState)):r=e.updateQueue=Ko(i):null===i&&(i=n.updateQueue=Ko(r));null===i||r===i?Jo(r,t):null===r.lastUpdate||null===i.lastUpdate?(Jo(r,t),Jo(i,t)):(Jo(r,t),i.lastUpdate=t)}function Zo(e,t){var n=e.updateQueue;null===(n=null===n?e.updateQueue=Qo(e.memoizedState):es(e,n)).lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=t:(n.lastCapturedUpdate.next=t,n.lastCapturedUpdate=t)}function es(e,t){var n=e.alternate;return null!==n&&t===n.updateQueue&&(t=e.updateQueue=Ko(t)),t}function ts(e,t,n,r,o,s){switch(n.tag){case Wo:return"function"==typeof(e=n.payload)?e.call(s,r,o):e;case $o:e.effectTag=-2049&e.effectTag|64;case Vo:if(null==(o="function"==typeof(e=n.payload)?e.call(s,r,o):e))break;return i({},r,o);case Go:Ho=!0}return r}function ns(e,t,n,r,i){Ho=!1;for(var o=(t=es(e,t)).baseState,s=null,a=0,c=t.firstUpdate,u=o;null!==c;){var l=c.expirationTime;l<i?(null===s&&(s=c,o=u),a<l&&(a=l)):(u=ts(e,0,c,u,n,r),null!==c.callback&&(e.effectTag|=32,c.nextEffect=null,null===t.lastEffect?t.firstEffect=t.lastEffect=c:(t.lastEffect.nextEffect=c,t.lastEffect=c))),c=c.next}for(l=null,c=t.firstCapturedUpdate;null!==c;){var d=c.expirationTime;d<i?(null===l&&(l=c,null===s&&(o=u)),a<d&&(a=d)):(u=ts(e,0,c,u,n,r),null!==c.callback&&(e.effectTag|=32,c.nextEffect=null,null===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=c:(t.lastCapturedEffect.nextEffect=c,t.lastCapturedEffect=c))),c=c.next}null===s&&(t.lastUpdate=null),null===l?t.lastCapturedUpdate=null:e.effectTag|=32,null===s&&null===l&&(o=u),t.baseState=o,t.firstUpdate=s,t.firstCapturedUpdate=l,e.expirationTime=a,e.memoizedState=u}function rs(e,t,n){null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),is(t.firstEffect,n),t.firstEffect=t.lastEffect=null,is(t.firstCapturedEffect,n),t.firstCapturedEffect=t.lastCapturedEffect=null}function is(e,t){for(;null!==e;){var n=e.callback;if(null!==n){e.callback=null;var r=t;"function"!=typeof n&&s("191",n),n.call(r)}e=e.nextEffect}}function os(e,t){return{value:e,source:t,stack:ct(t)}}function ss(e){e.effectTag|=4}var as=void 0,cs=void 0,us=void 0,ls=void 0;as=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},cs=function(){},us=function(e,t,n,r,o){var s=e.memoizedProps;if(s!==r){var a=t.stateNode;switch(Si(yi.current),e=null,n){case"input":s=vt(a,s),r=vt(a,r),e=[];break;case"option":s=Hn(a,s),r=Hn(a,r),e=[];break;case"select":s=i({},s,{value:void 0}),r=i({},r,{value:void 0}),e=[];break;case"textarea":s=Kn(a,s),r=Kn(a,r),e=[];break;default:"function"!=typeof s.onClick&&"function"==typeof r.onClick&&(a.onclick=hr)}dr(n,r),a=n=void 0;var c=null;for(n in s)if(!r.hasOwnProperty(n)&&s.hasOwnProperty(n)&&null!=s[n])if("style"===n){var u=s[n];for(a in u)u.hasOwnProperty(a)&&(c||(c={}),c[a]="")}else"dangerouslySetInnerHTML"!==n&&"children"!==n&&"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&"autoFocus"!==n&&(v.hasOwnProperty(n)?e||(e=[]):(e=e||[]).push(n,null));for(n in r){var l=r[n];if(u=null!=s?s[n]:void 0,r.hasOwnProperty(n)&&l!==u&&(null!=l||null!=u))if("style"===n)if(u){for(a in u)!u.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(c||(c={}),c[a]="");for(a in l)l.hasOwnProperty(a)&&u[a]!==l[a]&&(c||(c={}),c[a]=l[a])}else c||(e||(e=[]),e.push(n,c)),c=l;else"dangerouslySetInnerHTML"===n?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(e=e||[]).push(n,""+l)):"children"===n?u===l||"string"!=typeof l&&"number"!=typeof l||(e=e||[]).push(n,""+l):"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&(v.hasOwnProperty(n)?(null!=l&&pr(o,n),e||u===l||(e=[])):(e=e||[]).push(n,l))}c&&(e=e||[]).push("style",c),o=e,(t.updateQueue=o)&&ss(t)}},ls=function(e,t,n,r){n!==r&&ss(t)};var ds="function"==typeof WeakSet?WeakSet:Set;function fs(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=ct(n)),null!==n&&at(n.type),t=t.value,null!==e&&1===e.tag&&at(e.type);try{console.error(t)}catch(e){setTimeout(function(){throw e})}}function ps(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Qs(e,t)}else t.current=null}function hs(e,t,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var r=n=n.next;do{if((r.tag&e)!==ki){var i=r.destroy;r.destroy=void 0,void 0!==i&&i()}(r.tag&t)!==ki&&(i=r.create,r.destroy=i()),r=r.next}while(r!==n)}}function ms(e){switch("function"==typeof zr&&zr(e),e.tag){case 0:case 11:case 14:case 15:var t=e.updateQueue;if(null!==t&&null!==(t=t.lastEffect)){var n=t=t.next;do{var r=n.destroy;if(void 0!==r){var i=e;try{r()}catch(e){Qs(i,e)}}n=n.next}while(n!==t)}break;case 1:if(ps(e),"function"==typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){Qs(e,t)}break;case 5:ps(e);break;case 4:ys(e)}}function gs(e){return 5===e.tag||3===e.tag||4===e.tag}function bs(e){e:{for(var t=e.return;null!==t;){if(gs(t)){var n=t;break e}t=t.return}s("160"),n=void 0}var r=t=void 0;switch(n.tag){case 5:t=n.stateNode,r=!1;break;case 3:case 4:t=n.stateNode.containerInfo,r=!0;break;default:s("161")}16&n.effectTag&&(or(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||gs(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var i=e;;){if(5===i.tag||6===i.tag)if(n)if(r){var o=t,a=i.stateNode,c=n;8===o.nodeType?o.parentNode.insertBefore(a,c):o.insertBefore(a,c)}else t.insertBefore(i.stateNode,n);else r?(a=t,c=i.stateNode,8===a.nodeType?(o=a.parentNode).insertBefore(c,a):(o=a).appendChild(c),null!=(a=a._reactRootContainer)||null!==o.onclick||(o.onclick=hr)):t.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function ys(e){for(var t=e,n=!1,r=void 0,i=void 0;;){if(!n){n=t.return;e:for(;;){switch(null===n&&s("160"),n.tag){case 5:r=n.stateNode,i=!1;break e;case 3:case 4:r=n.stateNode.containerInfo,i=!0;break e}n=n.return}n=!0}if(5===t.tag||6===t.tag){e:for(var o=t,a=o;;)if(ms(a),null!==a.child&&4!==a.tag)a.child.return=a,a=a.child;else{if(a===o)break;for(;null===a.sibling;){if(null===a.return||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}i?(o=r,a=t.stateNode,8===o.nodeType?o.parentNode.removeChild(a):o.removeChild(a)):r.removeChild(t.stateNode)}else if(4===t.tag){if(null!==t.child){r=t.stateNode.containerInfo,i=!0,t.child.return=t,t=t.child;continue}}else if(ms(t),null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;4===(t=t.return).tag&&(n=!1)}t.sibling.return=t.return,t=t.sibling}}function vs(e,t){switch(t.tag){case 0:case 11:case 14:case 15:hs(Ri,Pi,t);break;case 1:break;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps;e=null!==e?e.memoizedProps:r;var i=t.type,o=t.updateQueue;t.updateQueue=null,null!==o&&function(e,t,n,r,i){e[M]=i,"input"===n&&"radio"===i.type&&null!=i.name&&St(e,i),fr(n,r),r=fr(n,i);for(var o=0;o<t.length;o+=2){var s=t[o],a=t[o+1];"style"===s?ur(e,a):"dangerouslySetInnerHTML"===s?ir(e,a):"children"===s?or(e,a):bt(e,s,a,r)}switch(n){case"input":xt(e,i);break;case"textarea":Jn(e,i);break;case"select":t=e._wrapperState.wasMultiple,e._wrapperState.wasMultiple=!!i.multiple,null!=(n=i.value)?Qn(e,!!i.multiple,n,!1):t!==!!i.multiple&&(null!=i.defaultValue?Qn(e,!!i.multiple,i.defaultValue,!0):Qn(e,!!i.multiple,i.multiple?[]:"",!1))}}(n,o,i,e,r)}break;case 6:null===t.stateNode&&s("162"),t.stateNode.nodeValue=t.memoizedProps;break;case 3:case 12:break;case 13:if(n=t.memoizedState,r=void 0,e=t,null===n?r=!1:(r=!0,e=t.child,0===n.timedOutAt&&(n.timedOutAt=xa())),null!==e&&function(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)r.style.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=null!=i&&i.hasOwnProperty("display")?i.display:null,r.style.display=cr("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else{if(13===n.tag&&null!==n.memoizedState){(r=n.child.sibling).return=n,n=r;continue}if(null!==n.child){n.child.return=n,n=n.child;continue}}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}(e,r),null!==(n=t.updateQueue)){t.updateQueue=null;var a=t.stateNode;null===a&&(a=t.stateNode=new ds),n.forEach(function(e){var n=function(e,t){var n=e.stateNode;null!==n&&n.delete(t),t=Ks(t=xa(),e),null!==(e=Js(e,t))&&(Zr(e,t),0!==(t=e.expirationTime)&&_a(e,t))}.bind(null,t,e);a.has(e)||(a.add(e),e.then(n,n))})}break;case 17:break;default:s("163")}}var ws="function"==typeof WeakMap?WeakMap:Map;function Ss(e,t,n){(n=Yo(n)).tag=$o,n.payload={element:null};var r=t.value;return n.callback=function(){Ia(r),fs(e,t)},n}function xs(e,t,n){(n=Yo(n)).tag=$o;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Fs?Fs=new Set([this]):Fs.add(this));var n=t.value,i=t.stack;fs(e,t),this.componentDidCatch(n,{componentStack:null!==i?i:""})}),n}function _s(e){switch(e.tag){case 1:Mr(e.type)&&Dr();var t=e.effectTag;return 2048&t?(e.effectTag=-2049&t|64,e):null;case 3:return _i(),Nr(),0!=(64&(t=e.effectTag))&&s("285"),e.effectTag=-2049&t|64,e;case 5:return Ti(e),null;case 13:return 2048&(t=e.effectTag)?(e.effectTag=-2049&t|64,e):null;case 18:return null;case 4:return _i(),null;case 10:return qo(e),null;default:return null}}var Cs=We.ReactCurrentDispatcher,Ts=We.ReactCurrentOwner,ks=1073741822,Es=!1,Rs=null,Ps=null,As=0,js=-1,Is=!1,Os=null,Ms=!1,Ds=null,Ns=null,Ls=null,Fs=null;function Us(){if(null!==Rs)for(var e=Rs.return;null!==e;){var t=e;switch(t.tag){case 1:var n=t.type.childContextTypes;null!=n&&Dr();break;case 3:_i(),Nr();break;case 5:Ti(t);break;case 4:_i();break;case 10:qo(t)}e=e.return}Ps=null,As=0,js=-1,Is=!1,Rs=null}function qs(){for(;null!==Os;){var e=Os.effectTag;if(16&e&&or(Os.stateNode,""),128&e){var t=Os.alternate;null!==t&&(null!==(t=t.ref)&&("function"==typeof t?t(null):t.current=null))}switch(14&e){case 2:bs(Os),Os.effectTag&=-3;break;case 6:bs(Os),Os.effectTag&=-3,vs(Os.alternate,Os);break;case 4:vs(Os.alternate,Os);break;case 8:ys(e=Os),e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,null!==(e=e.alternate)&&(e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null)}Os=Os.nextEffect}}function Bs(){for(;null!==Os;){if(256&Os.effectTag)e:{var e=Os.alternate,t=Os;switch(t.tag){case 0:case 11:case 15:hs(Ei,ki,t);break e;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:ri(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}break e;case 3:case 5:case 6:case 4:case 17:break e;default:s("163")}}Os=Os.nextEffect}}function zs(e,t){for(;null!==Os;){var n=Os.effectTag;if(36&n){var r=Os.alternate,i=Os,o=t;switch(i.tag){case 0:case 11:case 15:hs(Ai,ji,i);break;case 1:var a=i.stateNode;if(4&i.effectTag)if(null===r)a.componentDidMount();else{var c=i.elementType===i.type?r.memoizedProps:ri(i.type,r.memoizedProps);a.componentDidUpdate(c,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}null!==(r=i.updateQueue)&&rs(0,r,a);break;case 3:if(null!==(r=i.updateQueue)){if(a=null,null!==i.child)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}rs(0,r,a)}break;case 5:o=i.stateNode,null===r&&4&i.effectTag&&br(i.type,i.memoizedProps)&&o.focus();break;case 6:case 4:case 12:case 13:case 17:break;default:s("163")}}128&n&&(null!==(i=Os.ref)&&(o=Os.stateNode,"function"==typeof i?i(o):i.current=o)),512&n&&(Ds=e),Os=Os.nextEffect}}function Vs(){null!==Ns&&xr(Ns),null!==Ls&&Ls()}function Ws(e,t){Ms=Es=!0,e.current===t&&s("177");var n=e.pendingCommitExpirationTime;0===n&&s("261"),e.pendingCommitExpirationTime=0;var r=t.expirationTime,i=t.childExpirationTime;for(function(e,t){if(e.didError=!1,0===t)e.earliestPendingTime=0,e.latestPendingTime=0,e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0;else{t<e.latestPingedTime&&(e.latestPingedTime=0);var n=e.latestPendingTime;0!==n&&(n>t?e.earliestPendingTime=e.latestPendingTime=0:e.earliestPendingTime>t&&(e.earliestPendingTime=e.latestPendingTime)),0===(n=e.earliestSuspendedTime)?Zr(e,t):t<e.latestSuspendedTime?(e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0,Zr(e,t)):t>n&&Zr(e,t)}ni(0,e)}(e,i>r?i:r),Ts.current=null,r=void 0,1<t.effectTag?null!==t.lastEffect?(t.lastEffect.nextEffect=t,r=t.firstEffect):r=t:r=t.firstEffect,mr=Cn,gr=function(){var e=Nn();if(Ln(e)){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(t=(t=e.ownerDocument)&&t.defaultView||window).getSelection&&t.getSelection();if(n&&0!==n.rangeCount){t=n.anchorNode;var r=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{t.nodeType,i.nodeType}catch(e){t=null;break e}var o=0,s=-1,a=-1,c=0,u=0,l=e,d=null;t:for(;;){for(var f;l!==t||0!==r&&3!==l.nodeType||(s=o+r),l!==i||0!==n&&3!==l.nodeType||(a=o+n),3===l.nodeType&&(o+=l.nodeValue.length),null!==(f=l.firstChild);)d=l,l=f;for(;;){if(l===e)break t;if(d===t&&++c===r&&(s=o),d===i&&++u===n&&(a=o),null!==(f=l.nextSibling))break;d=(l=d).parentNode}l=f}t=-1===s||-1===a?null:{start:s,end:a}}else t=null}t=t||{start:0,end:0}}else t=null;return{focusedElem:e,selectionRange:t}}(),Cn=!1,Os=r;null!==Os;){i=!1;var a=void 0;try{Bs()}catch(e){i=!0,a=e}i&&(null===Os&&s("178"),Qs(Os,a),null!==Os&&(Os=Os.nextEffect))}for(Os=r;null!==Os;){i=!1,a=void 0;try{qs()}catch(e){i=!0,a=e}i&&(null===Os&&s("178"),Qs(Os,a),null!==Os&&(Os=Os.nextEffect))}for(Fn(gr),gr=null,Cn=!!mr,mr=null,e.current=t,Os=r;null!==Os;){i=!1,a=void 0;try{zs(e,n)}catch(e){i=!0,a=e}i&&(null===Os&&s("178"),Qs(Os,a),null!==Os&&(Os=Os.nextEffect))}if(null!==r&&null!==Ds){var c=function(e,t){Ls=Ns=Ds=null;var n=ia;ia=!0;do{if(512&t.effectTag){var r=!1,i=void 0;try{var o=t;hs(Oi,ki,o),hs(ki,Ii,o)}catch(e){r=!0,i=e}r&&Qs(t,i)}t=t.nextEffect}while(null!==t);ia=n,0!==(n=e.expirationTime)&&_a(e,n),la||ia||Ra(1073741823,!1)}.bind(null,e,r);Ns=o.unstable_runWithPriority(o.unstable_NormalPriority,function(){return Sr(c)}),Ls=c}Es=Ms=!1,"function"==typeof Br&&Br(t.stateNode),n=t.expirationTime,0===(t=(t=t.childExpirationTime)>n?t:n)&&(Fs=null),function(e,t){e.expirationTime=t,e.finishedWork=null}(e,t)}function Gs(e){for(;;){var t=e.alternate,n=e.return,r=e.sibling;if(0==(1024&e.effectTag)){Rs=e;e:{var o=t,a=As,c=(t=e).pendingProps;switch(t.tag){case 2:case 16:break;case 15:case 0:break;case 1:Mr(t.type)&&Dr();break;case 3:_i(),Nr(),(c=t.stateNode).pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),null!==o&&null!==o.child||(vo(t),t.effectTag&=-3),cs(t);break;case 5:Ti(t);var u=Si(wi.current);if(a=t.type,null!==o&&null!=t.stateNode)us(o,t,a,c,u),o.ref!==t.ref&&(t.effectTag|=128);else if(c){var l=Si(yi.current);if(vo(t)){o=(c=t).stateNode;var d=c.type,f=c.memoizedProps,p=u;switch(o[O]=c,o[M]=f,a=void 0,u=d){case"iframe":case"object":Tn("load",o);break;case"video":case"audio":for(d=0;d<te.length;d++)Tn(te[d],o);break;case"source":Tn("error",o);break;case"img":case"image":case"link":Tn("error",o),Tn("load",o);break;case"form":Tn("reset",o),Tn("submit",o);break;case"details":Tn("toggle",o);break;case"input":wt(o,f),Tn("invalid",o),pr(p,"onChange");break;case"select":o._wrapperState={wasMultiple:!!f.multiple},Tn("invalid",o),pr(p,"onChange");break;case"textarea":Yn(o,f),Tn("invalid",o),pr(p,"onChange")}for(a in dr(u,f),d=null,f)f.hasOwnProperty(a)&&(l=f[a],"children"===a?"string"==typeof l?o.textContent!==l&&(d=["children",l]):"number"==typeof l&&o.textContent!==""+l&&(d=["children",""+l]):v.hasOwnProperty(a)&&null!=l&&pr(p,a));switch(u){case"input":ze(o),_t(o,f,!0);break;case"textarea":ze(o),Xn(o);break;case"select":case"option":break;default:"function"==typeof f.onClick&&(o.onclick=hr)}a=d,c.updateQueue=a,(c=null!==a)&&ss(t)}else{f=t,p=a,o=c,d=9===u.nodeType?u:u.ownerDocument,l===Zn.html&&(l=er(p)),l===Zn.html?"script"===p?((o=d.createElement("div")).innerHTML="<script><\/script>",d=o.removeChild(o.firstChild)):"string"==typeof o.is?d=d.createElement(p,{is:o.is}):(d=d.createElement(p),"select"===p&&(p=d,o.multiple?p.multiple=!0:o.size&&(p.size=o.size))):d=d.createElementNS(l,p),(o=d)[O]=f,o[M]=c,as(o,t,!1,!1),p=o;var h=u,m=fr(d=a,f=c);switch(d){case"iframe":case"object":Tn("load",p),u=f;break;case"video":case"audio":for(u=0;u<te.length;u++)Tn(te[u],p);u=f;break;case"source":Tn("error",p),u=f;break;case"img":case"image":case"link":Tn("error",p),Tn("load",p),u=f;break;case"form":Tn("reset",p),Tn("submit",p),u=f;break;case"details":Tn("toggle",p),u=f;break;case"input":wt(p,f),u=vt(p,f),Tn("invalid",p),pr(h,"onChange");break;case"option":u=Hn(p,f);break;case"select":p._wrapperState={wasMultiple:!!f.multiple},u=i({},f,{value:void 0}),Tn("invalid",p),pr(h,"onChange");break;case"textarea":Yn(p,f),u=Kn(p,f),Tn("invalid",p),pr(h,"onChange");break;default:u=f}dr(d,u),l=void 0;var g=d,b=p,y=u;for(l in y)if(y.hasOwnProperty(l)){var w=y[l];"style"===l?ur(b,w):"dangerouslySetInnerHTML"===l?null!=(w=w?w.__html:void 0)&&ir(b,w):"children"===l?"string"==typeof w?("textarea"!==g||""!==w)&&or(b,w):"number"==typeof w&&or(b,""+w):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(v.hasOwnProperty(l)?null!=w&&pr(h,l):null!=w&&bt(b,l,w,m))}switch(d){case"input":ze(p),_t(p,f,!1);break;case"textarea":ze(p),Xn(p);break;case"option":null!=f.value&&p.setAttribute("value",""+yt(f.value));break;case"select":(u=p).multiple=!!f.multiple,null!=(p=f.value)?Qn(u,!!f.multiple,p,!1):null!=f.defaultValue&&Qn(u,!!f.multiple,f.defaultValue,!0);break;default:"function"==typeof u.onClick&&(p.onclick=hr)}(c=br(a,c))&&ss(t),t.stateNode=o}null!==t.ref&&(t.effectTag|=128)}else null===t.stateNode&&s("166");break;case 6:o&&null!=t.stateNode?ls(o,t,o.memoizedProps,c):("string"!=typeof c&&(null===t.stateNode&&s("166")),o=Si(wi.current),Si(yi.current),vo(t)?(a=(c=t).stateNode,o=c.memoizedProps,a[O]=c,(c=a.nodeValue!==o)&&ss(t)):(a=t,(c=(9===o.nodeType?o:o.ownerDocument).createTextNode(c))[O]=t,a.stateNode=c));break;case 11:break;case 13:if(c=t.memoizedState,0!=(64&t.effectTag)){t.expirationTime=a,Rs=t;break e}c=null!==c,a=null!==o&&null!==o.memoizedState,null!==o&&!c&&a&&(null!==(o=o.child.sibling)&&(null!==(u=t.firstEffect)?(t.firstEffect=o,o.nextEffect=u):(t.firstEffect=t.lastEffect=o,o.nextEffect=null),o.effectTag=8)),(c||a)&&(t.effectTag|=4);break;case 7:case 8:case 12:break;case 4:_i(),cs(t);break;case 10:qo(t);break;case 9:case 14:break;case 17:Mr(t.type)&&Dr();break;case 18:break;default:s("156")}Rs=null}if(t=e,1===As||1!==t.childExpirationTime){for(c=0,a=t.child;null!==a;)(o=a.expirationTime)>c&&(c=o),(u=a.childExpirationTime)>c&&(c=u),a=a.sibling;t.childExpirationTime=c}if(null!==Rs)return Rs;null!==n&&0==(1024&n.effectTag)&&(null===n.firstEffect&&(n.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),1<e.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e))}else{if(null!==(e=_s(e)))return e.effectTag&=1023,e;null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=1024)}if(null!==r)return r;if(null===n)break;e=n}return null}function $s(e){var t=Mo(e.alternate,e,As);return e.memoizedProps=e.pendingProps,null===t&&(t=Gs(e)),Ts.current=null,t}function Hs(e,t){Es&&s("243"),Vs(),Es=!0;var n=Cs.current;Cs.current=co;var r=e.nextExpirationTimeToWorkOn;r===As&&e===Ps&&null!==Rs||(Us(),As=r,Rs=Hr((Ps=e).current,null),e.pendingCommitExpirationTime=0);for(var i=!1;;){try{if(t)for(;null!==Rs&&!ka();)Rs=$s(Rs);else for(;null!==Rs;)Rs=$s(Rs)}catch(t){if(Fo=Lo=No=null,Ji(),null===Rs)i=!0,Ia(t);else{null===Rs&&s("271");var o=Rs,a=o.return;if(null!==a){e:{var c=e,u=a,l=o,d=t;if(a=As,l.effectTag|=1024,l.firstEffect=l.lastEffect=null,null!==d&&"object"==typeof d&&"function"==typeof d.then){var f=d;d=u;var p=-1,h=-1;do{if(13===d.tag){var m=d.alternate;if(null!==m&&null!==(m=m.memoizedState)){h=10*(1073741822-m.timedOutAt);break}"number"==typeof(m=d.pendingProps.maxDuration)&&(0>=m?p=0:(-1===p||m<p)&&(p=m))}d=d.return}while(null!==d);d=u;do{if((m=13===d.tag)&&(m=void 0!==d.memoizedProps.fallback&&null===d.memoizedState),m){if(null===(u=d.updateQueue)?((u=new Set).add(f),d.updateQueue=u):u.add(f),0==(1&d.mode)){d.effectTag|=64,l.effectTag&=-1957,1===l.tag&&(null===l.alternate?l.tag=17:((a=Yo(1073741823)).tag=Go,Xo(l,a))),l.expirationTime=1073741823;break e}u=a;var g=(l=c).pingCache;null===g?(g=l.pingCache=new ws,m=new Set,g.set(f,m)):void 0===(m=g.get(f))&&(m=new Set,g.set(f,m)),m.has(u)||(m.add(u),l=Ys.bind(null,l,f,u),f.then(l,l)),-1===p?c=1073741823:(-1===h&&(h=10*(1073741822-ti(c,a))-5e3),c=h+p),0<=c&&js<c&&(js=c),d.effectTag|=2048,d.expirationTime=a;break e}d=d.return}while(null!==d);d=Error((at(l.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+ct(l))}Is=!0,d=os(d,l),c=u;do{switch(c.tag){case 3:c.effectTag|=2048,c.expirationTime=a,Zo(c,a=Ss(c,d,a));break e;case 1:if(p=d,h=c.type,l=c.stateNode,0==(64&c.effectTag)&&("function"==typeof h.getDerivedStateFromError||null!==l&&"function"==typeof l.componentDidCatch&&(null===Fs||!Fs.has(l)))){c.effectTag|=2048,c.expirationTime=a,Zo(c,a=xs(c,p,a));break e}}c=c.return}while(null!==c)}Rs=Gs(o);continue}i=!0,Ia(t)}}break}if(Es=!1,Cs.current=n,Fo=Lo=No=null,Ji(),i)Ps=null,e.finishedWork=null;else if(null!==Rs)e.finishedWork=null;else{if(null===(n=e.current.alternate)&&s("281"),Ps=null,Is){if(i=e.latestPendingTime,o=e.latestSuspendedTime,a=e.latestPingedTime,0!==i&&i<r||0!==o&&o<r||0!==a&&a<r)return ei(e,r),void Sa(e,n,r,e.expirationTime,-1);if(!e.didError&&t)return e.didError=!0,r=e.nextExpirationTimeToWorkOn=r,t=e.expirationTime=1073741823,void Sa(e,n,r,t,-1)}t&&-1!==js?(ei(e,r),(t=10*(1073741822-ti(e,r)))<js&&(js=t),t=10*(1073741822-xa()),t=js-t,Sa(e,n,r,e.expirationTime,0>t?0:t)):(e.pendingCommitExpirationTime=r,e.finishedWork=n)}}function Qs(e,t){for(var n=e.return;null!==n;){switch(n.tag){case 1:var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Fs||!Fs.has(r)))return Xo(n,e=xs(n,e=os(t,e),1073741823)),void Xs(n,1073741823);break;case 3:return Xo(n,e=Ss(n,e=os(t,e),1073741823)),void Xs(n,1073741823)}n=n.return}3===e.tag&&(Xo(e,n=Ss(e,n=os(t,e),1073741823)),Xs(e,1073741823))}function Ks(e,t){var n=o.unstable_getCurrentPriorityLevel(),r=void 0;if(0==(1&t.mode))r=1073741823;else if(Es&&!Ms)r=As;else{switch(n){case o.unstable_ImmediatePriority:r=1073741823;break;case o.unstable_UserBlockingPriority:r=1073741822-10*(1+((1073741822-e+15)/10|0));break;case o.unstable_NormalPriority:r=1073741822-25*(1+((1073741822-e+500)/25|0));break;case o.unstable_LowPriority:case o.unstable_IdlePriority:r=1;break;default:s("313")}null!==Ps&&r===As&&--r}return n===o.unstable_UserBlockingPriority&&(0===aa||r<aa)&&(aa=r),r}function Ys(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),null!==Ps&&As===n?Ps=null:(t=e.earliestSuspendedTime,r=e.latestSuspendedTime,0!==t&&n<=t&&n>=r&&(e.didError=!1,(0===(t=e.latestPingedTime)||t>n)&&(e.latestPingedTime=n),ni(n,e),0!==(n=e.expirationTime)&&_a(e,n)))}function Js(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return i}function Xs(e,t){null!==(e=Js(e,t))&&(!Es&&0!==As&&t>As&&Us(),Zr(e,t),Es&&!Ms&&Ps===e||_a(e,e.expirationTime),ba>ga&&(ba=0,s("185")))}function Zs(e,t,n,r,i){return o.unstable_runWithPriority(o.unstable_ImmediatePriority,function(){return e(t,n,r,i)})}var ea=null,ta=null,na=0,ra=void 0,ia=!1,oa=null,sa=0,aa=0,ca=!1,ua=null,la=!1,da=!1,fa=null,pa=o.unstable_now(),ha=1073741822-(pa/10|0),ma=ha,ga=50,ba=0,ya=null;function va(){ha=1073741822-((o.unstable_now()-pa)/10|0)}function wa(e,t){if(0!==na){if(t<na)return;null!==ra&&o.unstable_cancelCallback(ra)}na=t,e=o.unstable_now()-pa,ra=o.unstable_scheduleCallback(Ea,{timeout:10*(1073741822-t)-e})}function Sa(e,t,n,r,i){e.expirationTime=r,0!==i||ka()?0<i&&(e.timeoutHandle=vr(function(e,t,n){e.pendingCommitExpirationTime=n,e.finishedWork=t,va(),ma=ha,Pa(e,n)}.bind(null,e,t,n),i)):(e.pendingCommitExpirationTime=n,e.finishedWork=t)}function xa(){return ia?ma:(Ca(),0!==sa&&1!==sa||(va(),ma=ha),ma)}function _a(e,t){null===e.nextScheduledRoot?(e.expirationTime=t,null===ta?(ea=ta=e,e.nextScheduledRoot=e):(ta=ta.nextScheduledRoot=e).nextScheduledRoot=ea):t>e.expirationTime&&(e.expirationTime=t),ia||(la?da&&(oa=e,sa=1073741823,Aa(e,1073741823,!1)):1073741823===t?Ra(1073741823,!1):wa(e,t))}function Ca(){var e=0,t=null;if(null!==ta)for(var n=ta,r=ea;null!==r;){var i=r.expirationTime;if(0===i){if((null===n||null===ta)&&s("244"),r===r.nextScheduledRoot){ea=ta=r.nextScheduledRoot=null;break}if(r===ea)ea=i=r.nextScheduledRoot,ta.nextScheduledRoot=i,r.nextScheduledRoot=null;else{if(r===ta){(ta=n).nextScheduledRoot=ea,r.nextScheduledRoot=null;break}n.nextScheduledRoot=r.nextScheduledRoot,r.nextScheduledRoot=null}r=n.nextScheduledRoot}else{if(i>e&&(e=i,t=r),r===ta)break;if(1073741823===e)break;n=r,r=r.nextScheduledRoot}}oa=t,sa=e}var Ta=!1;function ka(){return!!Ta||!!o.unstable_shouldYield()&&(Ta=!0)}function Ea(){try{if(!ka()&&null!==ea){va();var e=ea;do{var t=e.expirationTime;0!==t&&ha<=t&&(e.nextExpirationTimeToWorkOn=ha),e=e.nextScheduledRoot}while(e!==ea)}Ra(0,!0)}finally{Ta=!1}}function Ra(e,t){if(Ca(),t)for(va(),ma=ha;null!==oa&&0!==sa&&e<=sa&&!(Ta&&ha>sa);)Aa(oa,sa,ha>sa),Ca(),va(),ma=ha;else for(;null!==oa&&0!==sa&&e<=sa;)Aa(oa,sa,!1),Ca();if(t&&(na=0,ra=null),0!==sa&&wa(oa,sa),ba=0,ya=null,null!==fa)for(e=fa,fa=null,t=0;t<e.length;t++){var n=e[t];try{n._onComplete()}catch(e){ca||(ca=!0,ua=e)}}if(ca)throw e=ua,ua=null,ca=!1,e}function Pa(e,t){ia&&s("253"),oa=e,sa=t,Aa(e,t,!1),Ra(1073741823,!1)}function Aa(e,t,n){if(ia&&s("245"),ia=!0,n){var r=e.finishedWork;null!==r?ja(e,r,t):(e.finishedWork=null,-1!==(r=e.timeoutHandle)&&(e.timeoutHandle=-1,wr(r)),Hs(e,n),null!==(r=e.finishedWork)&&(ka()?e.finishedWork=r:ja(e,r,t)))}else null!==(r=e.finishedWork)?ja(e,r,t):(e.finishedWork=null,-1!==(r=e.timeoutHandle)&&(e.timeoutHandle=-1,wr(r)),Hs(e,n),null!==(r=e.finishedWork)&&ja(e,r,t));ia=!1}function ja(e,t,n){var r=e.firstBatch;if(null!==r&&r._expirationTime>=n&&(null===fa?fa=[r]:fa.push(r),r._defer))return e.finishedWork=t,void(e.expirationTime=0);e.finishedWork=null,e===ya?ba++:(ya=e,ba=0),o.unstable_runWithPriority(o.unstable_ImmediatePriority,function(){Ws(e,t)})}function Ia(e){null===oa&&s("246"),oa.expirationTime=0,ca||(ca=!0,ua=e)}function Oa(e,t){var n=la;la=!0;try{return e(t)}finally{(la=n)||ia||Ra(1073741823,!1)}}function Ma(e,t){if(la&&!da){da=!0;try{return e(t)}finally{da=!1}}return e(t)}function Da(e,t,n){la||ia||0===aa||(Ra(aa,!1),aa=0);var r=la;la=!0;try{return o.unstable_runWithPriority(o.unstable_UserBlockingPriority,function(){return e(t,n)})}finally{(la=r)||ia||Ra(1073741823,!1)}}function Na(e,t,n,r,i){var o=t.current;e:if(n){t:{2===tn(n=n._reactInternalFiber)&&1===n.tag||s("170");var a=n;do{switch(a.tag){case 3:a=a.stateNode.context;break t;case 1:if(Mr(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break t}}a=a.return}while(null!==a);s("171"),a=void 0}if(1===n.tag){var c=n.type;if(Mr(c)){n=Fr(n,c,a);break e}}n=a}else n=Pr;return null===t.context?t.context=n:t.pendingContext=n,t=i,(i=Yo(r)).payload={element:e},null!==(t=void 0===t?null:t)&&(i.callback=t),Vs(),Xo(o,i),Xs(o,r),r}function La(e,t,n,r){var i=t.current;return Na(e,t,n,i=Ks(xa(),i),r)}function Fa(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Ua(e){var t=1073741822-25*(1+((1073741822-xa()+500)/25|0));t>=ks&&(t=ks-1),this._expirationTime=ks=t,this._root=e,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function qa(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function Ba(e,t,n){e={current:t=Gr(3,null,null,t?3:0),containerInfo:e,pendingChildren:null,pingCache:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,didError:!1,pendingCommitExpirationTime:0,finishedWork:null,timeoutHandle:-1,context:null,pendingContext:null,hydrate:n,nextExpirationTimeToWorkOn:0,expirationTime:0,firstBatch:null,nextScheduledRoot:null},this._internalRoot=t.stateNode=e}function za(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Va(e,t,n,r,i){var o=n._reactRootContainer;if(o){if("function"==typeof i){var s=i;i=function(){var e=Fa(o._internalRoot);s.call(e)}}null!=e?o.legacy_renderSubtreeIntoContainer(e,t,i):o.render(t,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Ba(e,!1,t)}(n,r),"function"==typeof i){var a=i;i=function(){var e=Fa(o._internalRoot);a.call(e)}}Ma(function(){null!=e?o.legacy_renderSubtreeIntoContainer(e,t,i):o.render(t,i)})}return Fa(o._internalRoot)}function Wa(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return za(t)||s("200"),function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Qe,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}ke=function(e,t,n){switch(t){case"input":if(xt(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=F(r);i||s("90"),Ve(r),xt(r,i)}}}break;case"textarea":Jn(e,n);break;case"select":null!=(t=n.value)&&Qn(e,!!n.multiple,t,!1)}},Ua.prototype.render=function(e){this._defer||s("250"),this._hasChildren=!0,this._children=e;var t=this._root._internalRoot,n=this._expirationTime,r=new qa;return Na(e,t,null,n,r._onCommit),r},Ua.prototype.then=function(e){if(this._didComplete)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Ua.prototype.commit=function(){var e=this._root._internalRoot,t=e.firstBatch;if(this._defer&&null!==t||s("251"),this._hasChildren){var n=this._expirationTime;if(t!==this){this._hasChildren&&(n=this._expirationTime=t._expirationTime,this.render(this._children));for(var r=null,i=t;i!==this;)r=i,i=i._next;null===r&&s("251"),r._next=i._next,this._next=t,e.firstBatch=this}this._defer=!1,Pa(e,n),t=this._next,this._next=null,null!==(t=e.firstBatch=t)&&t._hasChildren&&t.render(t._children)}else this._next=null,this._defer=!1},Ua.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++)(0,e[t])()}},qa.prototype.then=function(e){if(this._didCommit)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},qa.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++){var n=e[t];"function"!=typeof n&&s("191",n),n()}}},Ba.prototype.render=function(e,t){var n=this._internalRoot,r=new qa;return null!==(t=void 0===t?null:t)&&r.then(t),La(e,n,null,r._onCommit),r},Ba.prototype.unmount=function(e){var t=this._internalRoot,n=new qa;return null!==(e=void 0===e?null:e)&&n.then(e),La(null,t,null,n._onCommit),n},Ba.prototype.legacy_renderSubtreeIntoContainer=function(e,t,n){var r=this._internalRoot,i=new qa;return null!==(n=void 0===n?null:n)&&i.then(n),La(t,r,e,i._onCommit),i},Ba.prototype.createBatch=function(){var e=new Ua(this),t=e._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)n.firstBatch=e,e._next=null;else{for(n=null;null!==r&&r._expirationTime>=t;)n=r,r=r._next;e._next=r,null!==n&&(n._next=e)}return e},Ie=Oa,Oe=Da,Me=function(){ia||0===aa||(Ra(aa,!1),aa=0)};var Ga={createPortal:Wa,findDOMNode:function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;return void 0===t&&("function"==typeof e.render?s("188"):s("268",Object.keys(e))),e=null===(e=rn(t))?null:e.stateNode},hydrate:function(e,t,n){return za(t)||s("200"),Va(null,e,t,!0,n)},render:function(e,t,n){return za(t)||s("200"),Va(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,r){return za(n)||s("200"),(null==e||void 0===e._reactInternalFiber)&&s("38"),Va(e,t,n,!1,r)},unmountComponentAtNode:function(e){return za(e)||s("40"),!!e._reactRootContainer&&(Ma(function(){Va(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return Wa.apply(void 0,arguments)},unstable_batchedUpdates:Oa,unstable_interactiveUpdates:Da,flushSync:function(e,t){ia&&s("187");var n=la;la=!0;try{return Zs(e,t)}finally{la=n,Ra(1073741823,!1)}},unstable_createRoot:function(e,t){return za(e)||s("299","unstable_createRoot"),new Ba(e,!0,null!=t&&!0===t.hydrate)},unstable_flushControlled:function(e){var t=la;la=!0;try{Zs(e)}finally{(la=t)||ia||Ra(1073741823,!1)}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[N,L,F,P.injectEventPluginsByName,y,W,function(e){k(e,V)},Ae,je,Rn,j]}};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Br=Vr(function(e){return t.onCommitFiberRoot(n,e)}),zr=Vr(function(e){return t.onCommitFiberUnmount(n,e)})}catch(e){}})(i({},e,{overrideProps:null,currentDispatcherRef:We.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=rn(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null}}))}({findFiberByHostInstance:D,bundleType:0,version:"16.8.6",rendererPackageName:"react-dom"});var $a={default:Ga},Ha=$a&&Ga||$a;e.exports=Ha.default||Ha},function(e,t,n){"use strict";e.exports=n(43)},function(e,t,n){"use strict";(function(e){
/** @license React v0.13.6
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
Object.defineProperty(t,"__esModule",{value:!0});var n=null,r=!1,i=3,o=-1,s=-1,a=!1,c=!1;function u(){if(!a){var e=n.expirationTime;c?_():c=!0,x(f,e)}}function l(){var e=n,t=n.next;if(n===t)n=null;else{var r=n.previous;n=r.next=t,t.previous=r}e.next=e.previous=null,r=e.callback,t=e.expirationTime,e=e.priorityLevel;var o=i,a=s;i=e,s=t;try{var c=r()}finally{i=o,s=a}if("function"==typeof c)if(c={callback:c,priorityLevel:e,expirationTime:t,next:null,previous:null},null===n)n=c.next=c.previous=c;else{r=null,e=n;do{if(e.expirationTime>=t){r=e;break}e=e.next}while(e!==n);null===r?r=n:r===n&&(n=c,u()),(t=r.previous).next=r.previous=c,c.next=r,c.previous=t}}function d(){if(-1===o&&null!==n&&1===n.priorityLevel){a=!0;try{do{l()}while(null!==n&&1===n.priorityLevel)}finally{a=!1,null!==n?u():c=!1}}}function f(e){a=!0;var i=r;r=e;try{if(e)for(;null!==n;){var o=t.unstable_now();if(!(n.expirationTime<=o))break;do{l()}while(null!==n&&n.expirationTime<=o)}else if(null!==n)do{l()}while(null!==n&&!C())}finally{a=!1,r=i,null!==n?u():c=!1,d()}}var p,h,m=Date,g="function"==typeof setTimeout?setTimeout:void 0,b="function"==typeof clearTimeout?clearTimeout:void 0,y="function"==typeof requestAnimationFrame?requestAnimationFrame:void 0,v="function"==typeof cancelAnimationFrame?cancelAnimationFrame:void 0;function w(e){p=y(function(t){b(h),e(t)}),h=g(function(){v(p),e(t.unstable_now())},100)}if("object"==typeof performance&&"function"==typeof performance.now){var S=performance;t.unstable_now=function(){return S.now()}}else t.unstable_now=function(){return m.now()};var x,_,C,T=null;if("undefined"!=typeof window?T=window:void 0!==e&&(T=e),T&&T._schedMock){var k=T._schedMock;x=k[0],_=k[1],C=k[2],t.unstable_now=k[3]}else if("undefined"==typeof window||"function"!=typeof MessageChannel){var E=null,R=function(e){if(null!==E)try{E(e)}finally{E=null}};x=function(e){null!==E?setTimeout(x,0,e):(E=e,setTimeout(R,0,!1))},_=function(){E=null},C=function(){return!1}}else{"undefined"!=typeof console&&("function"!=typeof y&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof v&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));var P=null,A=!1,j=-1,I=!1,O=!1,M=0,D=33,N=33;C=function(){return M<=t.unstable_now()};var L=new MessageChannel,F=L.port2;L.port1.onmessage=function(){A=!1;var e=P,n=j;P=null,j=-1;var r=t.unstable_now(),i=!1;if(0>=M-r){if(!(-1!==n&&n<=r))return I||(I=!0,w(U)),P=e,void(j=n);i=!0}if(null!==e){O=!0;try{e(i)}finally{O=!1}}};var U=function(e){if(null!==P){w(U);var t=e-M+N;t<N&&D<N?(8>t&&(t=8),N=t<D?D:t):D=t,M=e+N,A||(A=!0,F.postMessage(void 0))}else I=!1};x=function(e,t){P=e,j=t,O||0>t?F.postMessage(void 0):I||(I=!0,w(U))},_=function(){P=null,A=!1,j=-1}}t.unstable_ImmediatePriority=1,t.unstable_UserBlockingPriority=2,t.unstable_NormalPriority=3,t.unstable_IdlePriority=5,t.unstable_LowPriority=4,t.unstable_runWithPriority=function(e,n){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=i,s=o;i=e,o=t.unstable_now();try{return n()}finally{i=r,o=s,d()}},t.unstable_next=function(e){switch(i){case 1:case 2:case 3:var n=3;break;default:n=i}var r=i,s=o;i=n,o=t.unstable_now();try{return e()}finally{i=r,o=s,d()}},t.unstable_scheduleCallback=function(e,r){var s=-1!==o?o:t.unstable_now();if("object"==typeof r&&null!==r&&"number"==typeof r.timeout)r=s+r.timeout;else switch(i){case 1:r=s+-1;break;case 2:r=s+250;break;case 5:r=s+1073741823;break;case 4:r=s+1e4;break;default:r=s+5e3}if(e={callback:e,priorityLevel:i,expirationTime:r,next:null,previous:null},null===n)n=e.next=e.previous=e,u();else{s=null;var a=n;do{if(a.expirationTime>r){s=a;break}a=a.next}while(a!==n);null===s?s=n:s===n&&(n=e,u()),(r=s.previous).next=s.previous=e,e.next=s,e.previous=r}return e},t.unstable_cancelCallback=function(e){var t=e.next;if(null!==t){if(t===e)n=null;else{e===n&&(n=t);var r=e.previous;r.next=t,t.previous=r}e.next=e.previous=null}},t.unstable_wrapCallback=function(e){var n=i;return function(){var r=i,s=o;i=n,o=t.unstable_now();try{return e.apply(this,arguments)}finally{i=r,o=s,d()}}},t.unstable_getCurrentPriorityLevel=function(){return i},t.unstable_shouldYield=function(){return!r&&(null!==n&&n.expirationTime<s||C())},t.unstable_continueExecution=function(){null!==n&&u()},t.unstable_pauseExecution=function(){},t.unstable_getFirstCallbackNode=function(){return n}}).call(this,n(3))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){(function(e,n,r,i){(function(t){"use strict";function o(e,t){t|=0;for(var n=Math.max(e.length-t,0),r=Array(n),i=0;i<n;i++)r[i]=e[t+i];return r}var s=function(e){var t=o(arguments,1);return function(){var n=o(arguments);return e.apply(null,t.concat(n))}},a=function(e){return function(){var t=o(arguments),n=t.pop();e.call(this,t,n)}};function c(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var u="function"==typeof e&&e,l="object"==typeof n&&"function"==typeof n.nextTick;function d(e){setTimeout(e,0)}function f(e){return function(t){var n=o(arguments,1);e(function(){t.apply(null,n)})}}var p=f(u?e:l?n.nextTick:d);function h(e){return a(function(t,n){var r;try{r=e.apply(this,t)}catch(e){return n(e)}c(r)&&"function"==typeof r.then?r.then(function(e){m(n,null,e)},function(e){m(n,e.message?e:new Error(e))}):n(null,r)})}function m(e,t,n){try{e(t,n)}catch(e){p(g,e)}}function g(e){throw e}var b="function"==typeof Symbol;function y(e){return b&&"AsyncFunction"===e[Symbol.toStringTag]}function v(e){return y(e)?h(e):e}function w(e){return function(t){var n=o(arguments,1),r=a(function(n,r){var i=this;return e(t,function(e,t){v(e).apply(i,n.concat(t))},r)});return n.length?r.apply(this,n):r}}var S="object"==typeof r&&r&&r.Object===Object&&r,x="object"==typeof self&&self&&self.Object===Object&&self,_=S||x||Function("return this")(),C=_.Symbol,T=Object.prototype,k=T.hasOwnProperty,E=T.toString,R=C?C.toStringTag:void 0,P=Object.prototype.toString,A="[object Null]",j="[object Undefined]",I=C?C.toStringTag:void 0;function O(e){return null==e?void 0===e?j:A:I&&I in Object(e)?function(e){var t=k.call(e,R),n=e[R];try{e[R]=void 0;var r=!0}catch(e){}var i=E.call(e);return r&&(t?e[R]=n:delete e[R]),i}(e):function(e){return P.call(e)}(e)}var M="[object AsyncFunction]",D="[object Function]",N="[object GeneratorFunction]",L="[object Proxy]",F=9007199254740991;function U(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=F}function q(e){return null!=e&&U(e.length)&&!function(e){if(!c(e))return!1;var t=O(e);return t==D||t==N||t==M||t==L}(e)}var B={};function z(){}function V(e){return function(){if(null!==e){var t=e;e=null,t.apply(this,arguments)}}}var W="function"==typeof Symbol&&Symbol.iterator,G=function(e){return W&&e[W]&&e[W]()};function $(e){return null!=e&&"object"==typeof e}var H="[object Arguments]";function Q(e){return $(e)&&O(e)==H}var K=Object.prototype,Y=K.hasOwnProperty,J=K.propertyIsEnumerable,X=Q(function(){return arguments}())?Q:function(e){return $(e)&&Y.call(e,"callee")&&!J.call(e,"callee")},Z=Array.isArray,ee="object"==typeof t&&t&&!t.nodeType&&t,te=ee&&"object"==typeof i&&i&&!i.nodeType&&i,ne=te&&te.exports===ee?_.Buffer:void 0,re=(ne?ne.isBuffer:void 0)||function(){return!1},ie=9007199254740991,oe=/^(?:0|[1-9]\d*)$/;function se(e,t){var n=typeof e;return!!(t=null==t?ie:t)&&("number"==n||"symbol"!=n&&oe.test(e))&&e>-1&&e%1==0&&e<t}var ae={};ae["[object Float32Array]"]=ae["[object Float64Array]"]=ae["[object Int8Array]"]=ae["[object Int16Array]"]=ae["[object Int32Array]"]=ae["[object Uint8Array]"]=ae["[object Uint8ClampedArray]"]=ae["[object Uint16Array]"]=ae["[object Uint32Array]"]=!0,ae["[object Arguments]"]=ae["[object Array]"]=ae["[object ArrayBuffer]"]=ae["[object Boolean]"]=ae["[object DataView]"]=ae["[object Date]"]=ae["[object Error]"]=ae["[object Function]"]=ae["[object Map]"]=ae["[object Number]"]=ae["[object Object]"]=ae["[object RegExp]"]=ae["[object Set]"]=ae["[object String]"]=ae["[object WeakMap]"]=!1;var ce,ue="object"==typeof t&&t&&!t.nodeType&&t,le=ue&&"object"==typeof i&&i&&!i.nodeType&&i,de=le&&le.exports===ue&&S.process,fe=function(){try{var e=le&&le.require&&le.require("util").types;return e||de&&de.binding&&de.binding("util")}catch(e){}}(),pe=fe&&fe.isTypedArray,he=pe?(ce=pe,function(e){return ce(e)}):function(e){return $(e)&&U(e.length)&&!!ae[O(e)]},me=Object.prototype.hasOwnProperty;function ge(e,t){var n=Z(e),r=!n&&X(e),i=!n&&!r&&re(e),o=!n&&!r&&!i&&he(e),s=n||r||i||o,a=s?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],c=a.length;for(var u in e)!t&&!me.call(e,u)||s&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||se(u,c))||a.push(u);return a}var be=Object.prototype,ye=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object),ve=Object.prototype.hasOwnProperty;function we(e){if(n=(t=e)&&t.constructor,t!==("function"==typeof n&&n.prototype||be))return ye(e);var t,n,r=[];for(var i in Object(e))ve.call(e,i)&&"constructor"!=i&&r.push(i);return r}function Se(e){return q(e)?ge(e):we(e)}function xe(e){if(q(e))return function(e){var t=-1,n=e.length;return function(){return++t<n?{value:e[t],key:t}:null}}(e);var t,n,r,i,o=G(e);return o?function(e){var t=-1;return function(){var n=e.next();return n.done?null:(t++,{value:n.value,key:t})}}(o):(n=Se(t=e),r=-1,i=n.length,function(){var e=n[++r];return r<i?{value:t[e],key:e}:null})}function _e(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}}function Ce(e){return function(t,n,r){if(r=V(r||z),e<=0||!t)return r(null);var i=xe(t),o=!1,s=0,a=!1;function c(e,t){if(s-=1,e)o=!0,r(e);else{if(t===B||o&&s<=0)return o=!0,r(null);a||u()}}function u(){for(a=!0;s<e&&!o;){var t=i();if(null===t)return o=!0,void(s<=0&&r(null));s+=1,n(t.value,t.key,_e(c))}a=!1}u()}}function Te(e,t,n,r){Ce(t)(e,v(n),r)}function ke(e,t){return function(n,r,i){return e(n,t,r,i)}}function Ee(e,t,n){n=V(n||z);var r=0,i=0,o=e.length;function s(e,t){e?n(e):++i!==o&&t!==B||n(null)}for(0===o&&n(null);r<o;r++)t(e[r],r,_e(s))}var Re=ke(Te,1/0),Pe=function(e,t,n){(q(e)?Ee:Re)(e,v(t),n)};function Ae(e){return function(t,n,r){return e(Pe,t,v(n),r)}}function je(e,t,n,r){r=r||z,t=t||[];var i=[],o=0,s=v(n);e(t,function(e,t,n){var r=o++;s(e,function(e,t){i[r]=t,n(e)})},function(e){r(e,i)})}var Ie=Ae(je),Oe=w(Ie);function Me(e){return function(t,n,r,i){return e(Ce(n),t,v(r),i)}}var De=Me(je),Ne=ke(De,1),Le=w(Ne);function Fe(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}var Ue,qe=function(e,t,n){for(var r=-1,i=Object(e),o=n(e),s=o.length;s--;){var a=o[Ue?s:++r];if(!1===t(i[a],a,i))break}return e};function Be(e,t){return e&&qe(e,t,Se)}function ze(e){return e!=e}function Ve(e,t,n){return t==t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):function(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}(e,ze,n)}var We=function(e,t,n){"function"==typeof t&&(n=t,t=null),n=V(n||z);var r=Se(e).length;if(!r)return n(null);t||(t=r);var i={},s=0,a=!1,c=Object.create(null),u=[],l=[],d={};function f(e,t){u.push(function(){!function(e,t){if(a)return;var r=_e(function(t,r){if(s--,arguments.length>2&&(r=o(arguments,1)),t){var u={};Be(i,function(e,t){u[t]=e}),u[e]=r,a=!0,c=Object.create(null),n(t,u)}else i[e]=r,Fe(c[e]||[],function(e){e()}),p()});s++;var u=v(t[t.length-1]);t.length>1?u(i,r):u(r)}(e,t)})}function p(){if(0===u.length&&0===s)return n(null,i);for(;u.length&&s<t;){u.shift()()}}function h(t){var n=[];return Be(e,function(e,r){Z(e)&&Ve(e,t,0)>=0&&n.push(r)}),n}Be(e,function(t,n){if(!Z(t))return f(n,[t]),void l.push(n);var r=t.slice(0,t.length-1),i=r.length;if(0===i)return f(n,t),void l.push(n);d[n]=i,Fe(r,function(o){if(!e[o])throw new Error("async.auto task `"+n+"` has a non-existent dependency `"+o+"` in "+r.join(", "));!function(e,t){var n=c[e];n||(n=c[e]=[]);n.push(t)}(o,function(){0===--i&&f(n,t)})})}),function(){var e,t=0;for(;l.length;)e=l.pop(),t++,Fe(h(e),function(e){0==--d[e]&&l.push(e)});if(t!==r)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}(),p()};function Ge(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var $e="[object Symbol]",He=1/0,Qe=C?C.prototype:void 0,Ke=Qe?Qe.toString:void 0;function Ye(e){if("string"==typeof e)return e;if(Z(e))return Ge(e,Ye)+"";if(function(e){return"symbol"==typeof e||$(e)&&O(e)==$e}(e))return Ke?Ke.call(e):"";var t=e+"";return"0"==t&&1/e==-He?"-0":t}function Je(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}(e,t,n)}var Xe=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),Ze="[\\ud800-\\udfff]",et="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",tt="\\ud83c[\\udffb-\\udfff]",nt="[^\\ud800-\\udfff]",rt="(?:\\ud83c[\\udde6-\\uddff]){2}",it="[\\ud800-\\udbff][\\udc00-\\udfff]",ot="(?:"+et+"|"+tt+")"+"?",st="[\\ufe0e\\ufe0f]?"+ot+("(?:\\u200d(?:"+[nt,rt,it].join("|")+")[\\ufe0e\\ufe0f]?"+ot+")*"),at="(?:"+[nt+et+"?",et,rt,it,Ze].join("|")+")",ct=RegExp(tt+"(?="+tt+")|"+at+st,"g");function ut(e){return function(e){return Xe.test(e)}(e)?function(e){return e.match(ct)||[]}(e):function(e){return e.split("")}(e)}var lt=/^\s+|\s+$/g;function dt(e,t,n){var r;if((e=null==(r=e)?"":Ye(r))&&(n||void 0===t))return e.replace(lt,"");if(!e||!(t=Ye(t)))return e;var i=ut(e),o=ut(t);return Je(i,function(e,t){for(var n=-1,r=e.length;++n<r&&Ve(t,e[n],0)>-1;);return n}(i,o),function(e,t){for(var n=e.length;n--&&Ve(t,e[n],0)>-1;);return n}(i,o)+1).join("")}var ft=/^(?:async\s+)?(function)?\s*[^\(]*\(\s*([^\)]*)\)/m,pt=/,/,ht=/(=.+)?(\s*)$/,mt=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm;function gt(e,t){var n={};Be(e,function(e,t){var r,i,o=y(e),s=!o&&1===e.length||o&&0===e.length;if(Z(e))r=e.slice(0,-1),e=e[e.length-1],n[t]=r.concat(r.length>0?a:e);else if(s)n[t]=e;else{if(r=i=(i=(i=(i=(i=e).toString().replace(mt,"")).match(ft)[2].replace(" ",""))?i.split(pt):[]).map(function(e){return dt(e.replace(ht,""))}),0===e.length&&!o&&0===r.length)throw new Error("autoInject task functions require explicit parameters.");o||r.pop(),n[t]=r.concat(a)}function a(t,n){var i=Ge(r,function(e){return t[e]});i.push(n),v(e).apply(null,i)}}),We(n,t)}function bt(){this.head=this.tail=null,this.length=0}function yt(e,t){e.length=1,e.head=e.tail=t}function vt(e,t,n){if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var r=v(e),i=0,o=[],s=!1;function a(e,t,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");if(l.started=!0,Z(e)||(e=[e]),0===e.length&&l.idle())return p(function(){l.drain()});for(var r=0,i=e.length;r<i;r++){var o={data:e[r],callback:n||z};t?l._tasks.unshift(o):l._tasks.push(o)}s||(s=!0,p(function(){s=!1,l.process()}))}function c(e){return function(t){i-=1;for(var n=0,r=e.length;n<r;n++){var s=e[n],a=Ve(o,s,0);0===a?o.shift():a>0&&o.splice(a,1),s.callback.apply(s,arguments),null!=t&&l.error(t,s.data)}i<=l.concurrency-l.buffer&&l.unsaturated(),l.idle()&&l.drain(),l.process()}}var u=!1,l={_tasks:new bt,concurrency:t,payload:n,saturated:z,unsaturated:z,buffer:t/4,empty:z,drain:z,error:z,started:!1,paused:!1,push:function(e,t){a(e,!1,t)},kill:function(){l.drain=z,l._tasks.empty()},unshift:function(e,t){a(e,!0,t)},remove:function(e){l._tasks.remove(e)},process:function(){if(!u){for(u=!0;!l.paused&&i<l.concurrency&&l._tasks.length;){var e=[],t=[],n=l._tasks.length;l.payload&&(n=Math.min(n,l.payload));for(var s=0;s<n;s++){var a=l._tasks.shift();e.push(a),o.push(a),t.push(a.data)}i+=1,0===l._tasks.length&&l.empty(),i===l.concurrency&&l.saturated();var d=_e(c(e));r(t,d)}u=!1}},length:function(){return l._tasks.length},running:function(){return i},workersList:function(){return o},idle:function(){return l._tasks.length+i===0},pause:function(){l.paused=!0},resume:function(){!1!==l.paused&&(l.paused=!1,p(l.process))}};return l}function wt(e,t){return vt(e,1,t)}bt.prototype.removeLink=function(e){return e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev,e.prev=e.next=null,this.length-=1,e},bt.prototype.empty=function(){for(;this.head;)this.shift();return this},bt.prototype.insertAfter=function(e,t){t.prev=e,t.next=e.next,e.next?e.next.prev=t:this.tail=t,e.next=t,this.length+=1},bt.prototype.insertBefore=function(e,t){t.prev=e.prev,t.next=e,e.prev?e.prev.next=t:this.head=t,e.prev=t,this.length+=1},bt.prototype.unshift=function(e){this.head?this.insertBefore(this.head,e):yt(this,e)},bt.prototype.push=function(e){this.tail?this.insertAfter(this.tail,e):yt(this,e)},bt.prototype.shift=function(){return this.head&&this.removeLink(this.head)},bt.prototype.pop=function(){return this.tail&&this.removeLink(this.tail)},bt.prototype.toArray=function(){for(var e=Array(this.length),t=this.head,n=0;n<this.length;n++)e[n]=t.data,t=t.next;return e},bt.prototype.remove=function(e){for(var t=this.head;t;){var n=t.next;e(t)&&this.removeLink(t),t=n}return this};var St=ke(Te,1);function xt(e,t,n,r){r=V(r||z);var i=v(n);St(e,function(e,n,r){i(t,e,function(e,n){t=n,r(e)})},function(e){r(e,t)})}function _t(){var e=Ge(arguments,v);return function(){var t=o(arguments),n=this,r=t[t.length-1];"function"==typeof r?t.pop():r=z,xt(e,t,function(e,t,r){t.apply(n,e.concat(function(e){var t=o(arguments,1);r(e,t)}))},function(e,t){r.apply(n,[e].concat(t))})}}var Ct=function(){return _t.apply(null,o(arguments).reverse())},Tt=Array.prototype.concat,kt=function(e,t,n,r){r=r||z;var i=v(n);De(e,t,function(e,t){i(e,function(e){return e?t(e):t(null,o(arguments,1))})},function(e,t){for(var n=[],i=0;i<t.length;i++)t[i]&&(n=Tt.apply(n,t[i]));return r(e,n)})},Et=ke(kt,1/0),Rt=ke(kt,1),Pt=function(){var e=o(arguments),t=[null].concat(e);return function(){return arguments[arguments.length-1].apply(this,t)}};function At(e){return e}function jt(e,t){return function(n,r,i,o){o=o||z;var s,a=!1;n(r,function(n,r,o){i(n,function(r,i){r?o(r):e(i)&&!s?(a=!0,s=t(!0,n),o(null,B)):o()})},function(e){e?o(e):o(null,a?s:t(!1))})}}function It(e,t){return t}var Ot=Ae(jt(At,It)),Mt=Me(jt(At,It)),Dt=ke(Mt,1);function Nt(e){return function(t){var n=o(arguments,1);n.push(function(t){var n=o(arguments,1);"object"==typeof console&&(t?console.error&&console.error(t):console[e]&&Fe(n,function(t){console[e](t)}))}),v(t).apply(null,n)}}var Lt=Nt("dir");function Ft(e,t,n){n=_e(n||z);var r=v(e),i=v(t);function s(e){if(e)return n(e);var t=o(arguments,1);t.push(a),i.apply(this,t)}function a(e,t){return e?n(e):t?void r(s):n(null)}a(null,!0)}function Ut(e,t,n){n=_e(n||z);var r=v(e),i=function(e){if(e)return n(e);var s=o(arguments,1);if(t.apply(this,s))return r(i);n.apply(null,[null].concat(s))};r(i)}function qt(e,t,n){Ut(e,function(){return!t.apply(this,arguments)},n)}function Bt(e,t,n){n=_e(n||z);var r=v(t),i=v(e);function o(e){if(e)return n(e);i(s)}function s(e,t){return e?n(e):t?void r(o):n(null)}i(s)}function zt(e){return function(t,n,r){return e(t,r)}}function Vt(e,t,n){Pe(e,zt(v(t)),n)}function Wt(e,t,n,r){Ce(t)(e,zt(v(n)),r)}var Gt=ke(Wt,1);function $t(e){return y(e)?e:a(function(t,n){var r=!0;t.push(function(){var e=arguments;r?p(function(){n.apply(null,e)}):n.apply(null,e)}),e.apply(this,t),r=!1})}function Ht(e){return!e}var Qt=Ae(jt(Ht,Ht)),Kt=Me(jt(Ht,Ht)),Yt=ke(Kt,1);function Jt(e){return function(t){return null==t?void 0:t[e]}}function Xt(e,t,n,r){var i=new Array(t.length);e(t,function(e,t,r){n(e,function(e,n){i[t]=!!n,r(e)})},function(e){if(e)return r(e);for(var n=[],o=0;o<t.length;o++)i[o]&&n.push(t[o]);r(null,n)})}function Zt(e,t,n,r){var i=[];e(t,function(e,t,r){n(e,function(n,o){n?r(n):(o&&i.push({index:t,value:e}),r())})},function(e){e?r(e):r(null,Ge(i.sort(function(e,t){return e.index-t.index}),Jt("value")))})}function en(e,t,n,r){(q(t)?Xt:Zt)(e,t,v(n),r||z)}var tn=Ae(en),nn=Me(en),rn=ke(nn,1);function on(e,t){var n=_e(t||z),r=v($t(e));!function e(t){if(t)return n(t);r(e)}()}var sn=function(e,t,n,r){r=r||z;var i=v(n);De(e,t,function(e,t){i(e,function(n,r){return n?t(n):t(null,{key:r,val:e})})},function(e,t){for(var n={},i=Object.prototype.hasOwnProperty,o=0;o<t.length;o++)if(t[o]){var s=t[o].key,a=t[o].val;i.call(n,s)?n[s].push(a):n[s]=[a]}return r(e,n)})},an=ke(sn,1/0),cn=ke(sn,1),un=Nt("log");function ln(e,t,n,r){r=V(r||z);var i={},o=v(n);Te(e,t,function(e,t,n){o(e,t,function(e,r){if(e)return n(e);i[t]=r,n()})},function(e){r(e,i)})}var dn=ke(ln,1/0),fn=ke(ln,1);function pn(e,t){return t in e}function hn(e,t){var n=Object.create(null),r=Object.create(null);t=t||At;var i=v(e),s=a(function(e,s){var a=t.apply(null,e);pn(n,a)?p(function(){s.apply(null,n[a])}):pn(r,a)?r[a].push(s):(r[a]=[s],i.apply(null,e.concat(function(){var e=o(arguments);n[a]=e;var t=r[a];delete r[a];for(var i=0,s=t.length;i<s;i++)t[i].apply(null,e)})))});return s.memo=n,s.unmemoized=e,s}var mn=f(l?n.nextTick:u?e:d);function gn(e,t,n){n=n||z;var r=q(t)?[]:{};e(t,function(e,t,n){v(e)(function(e,i){arguments.length>2&&(i=o(arguments,1)),r[t]=i,n(e)})},function(e){n(e,r)})}function bn(e,t){gn(Pe,e,t)}function yn(e,t,n){gn(Ce(t),e,n)}var vn=function(e,t){var n=v(e);return vt(function(e,t){n(e[0],t)},t,1)},wn=function(e,t){var n=vn(e,t);return n.push=function(e,t,r){if(null==r&&(r=z),"function"!=typeof r)throw new Error("task callback must be a function");if(n.started=!0,Z(e)||(e=[e]),0===e.length)return p(function(){n.drain()});t=t||0;for(var i=n._tasks.head;i&&t>=i.priority;)i=i.next;for(var o=0,s=e.length;o<s;o++){var a={data:e[o],priority:t,callback:r};i?n._tasks.insertBefore(i,a):n._tasks.push(a)}p(n.process)},delete n.unshift,n};function Sn(e,t){if(t=V(t||z),!Z(e))return t(new TypeError("First argument to race must be an array of functions"));if(!e.length)return t();for(var n=0,r=e.length;n<r;n++)v(e[n])(t)}function xn(e,t,n,r){xt(o(e).reverse(),t,n,r)}function _n(e){var t=v(e);return a(function(e,n){return e.push(function(e,t){var r;e?n(null,{error:e}):(r=arguments.length<=2?t:o(arguments,1),n(null,{value:r}))}),t.apply(this,e)})}function Cn(e){var t;return Z(e)?t=Ge(e,_n):(t={},Be(e,function(e,n){t[n]=_n.call(this,e)})),t}function Tn(e,t,n,r){en(e,t,function(e,t){n(e,function(e,n){t(e,!n)})},r)}var kn=Ae(Tn),En=Me(Tn),Rn=ke(En,1);function Pn(e){return function(){return e}}function An(e,t,n){var r=5,i=0,o={times:r,intervalFunc:Pn(i)};if(arguments.length<3&&"function"==typeof e?(n=t||z,t=e):(!function(e,t){if("object"==typeof t)e.times=+t.times||r,e.intervalFunc="function"==typeof t.interval?t.interval:Pn(+t.interval||i),e.errorFilter=t.errorFilter;else{if("number"!=typeof t&&"string"!=typeof t)throw new Error("Invalid arguments for async.retry");e.times=+t||r}}(o,e),n=n||z),"function"!=typeof t)throw new Error("Invalid arguments for async.retry");var s=v(t),a=1;!function e(){s(function(t){t&&a++<o.times&&("function"!=typeof o.errorFilter||o.errorFilter(t))?setTimeout(e,o.intervalFunc(a)):n.apply(null,arguments)})}()}var jn=function(e,t){t||(t=e,e=null);var n=v(t);return a(function(t,r){function i(e){n.apply(null,t.concat(e))}e?An(e,i,r):An(i,r)})};function In(e,t){gn(St,e,t)}var On=Ae(jt(Boolean,At)),Mn=Me(jt(Boolean,At)),Dn=ke(Mn,1);function Nn(e,t,n){var r=v(t);function i(e,t){var n=e.criteria,r=t.criteria;return n<r?-1:n>r?1:0}Ie(e,function(e,t){r(e,function(n,r){if(n)return t(n);t(null,{value:e,criteria:r})})},function(e,t){if(e)return n(e);n(null,Ge(t.sort(i),Jt("value")))})}function Ln(e,t,n){var r=v(e);return a(function(i,o){var s,a=!1;i.push(function(){a||(o.apply(null,arguments),clearTimeout(s))}),s=setTimeout(function(){var t=e.name||"anonymous",r=new Error('Callback function "'+t+'" timed out.');r.code="ETIMEDOUT",n&&(r.info=n),a=!0,o(r)},t),r.apply(null,i)})}var Fn=Math.ceil,Un=Math.max;function qn(e,t,n,r){var i=v(n);De(function(e,t,n,r){for(var i=-1,o=Un(Fn((t-e)/(n||1)),0),s=Array(o);o--;)s[r?o:++i]=e,e+=n;return s}(0,e,1),t,i,r)}var Bn=ke(qn,1/0),zn=ke(qn,1);function Vn(e,t,n,r){arguments.length<=3&&(r=n,n=t,t=Z(e)?[]:{}),r=V(r||z);var i=v(n);Pe(e,function(e,n,r){i(t,e,n,r)},function(e){r(e,t)})}function Wn(e,t){var n,r=null;t=t||z,Gt(e,function(e,t){v(e)(function(e,i){n=arguments.length>2?o(arguments,1):i,r=e,t(!e)})},function(){t(r,n)})}function Gn(e){return function(){return(e.unmemoized||e).apply(null,arguments)}}function $n(e,t,n){n=_e(n||z);var r=v(t);if(!e())return n(null);var i=function(t){if(t)return n(t);if(e())return r(i);var s=o(arguments,1);n.apply(null,[null].concat(s))};r(i)}function Hn(e,t,n){$n(function(){return!e.apply(this,arguments)},t,n)}var Qn=function(e,t){if(t=V(t||z),!Z(e))return t(new Error("First argument to waterfall must be an array of functions"));if(!e.length)return t();var n=0;function r(t){var r=v(e[n++]);t.push(_e(i)),r.apply(null,t)}function i(i){if(i||n===e.length)return t.apply(null,arguments);r(o(arguments,1))}r([])},Kn={apply:s,applyEach:Oe,applyEachSeries:Le,asyncify:h,auto:We,autoInject:gt,cargo:wt,compose:Ct,concat:Et,concatLimit:kt,concatSeries:Rt,constant:Pt,detect:Ot,detectLimit:Mt,detectSeries:Dt,dir:Lt,doDuring:Ft,doUntil:qt,doWhilst:Ut,during:Bt,each:Vt,eachLimit:Wt,eachOf:Pe,eachOfLimit:Te,eachOfSeries:St,eachSeries:Gt,ensureAsync:$t,every:Qt,everyLimit:Kt,everySeries:Yt,filter:tn,filterLimit:nn,filterSeries:rn,forever:on,groupBy:an,groupByLimit:sn,groupBySeries:cn,log:un,map:Ie,mapLimit:De,mapSeries:Ne,mapValues:dn,mapValuesLimit:ln,mapValuesSeries:fn,memoize:hn,nextTick:mn,parallel:bn,parallelLimit:yn,priorityQueue:wn,queue:vn,race:Sn,reduce:xt,reduceRight:xn,reflect:_n,reflectAll:Cn,reject:kn,rejectLimit:En,rejectSeries:Rn,retry:An,retryable:jn,seq:_t,series:In,setImmediate:p,some:On,someLimit:Mn,someSeries:Dn,sortBy:Nn,timeout:Ln,times:Bn,timesLimit:qn,timesSeries:zn,transform:Vn,tryEach:Wn,unmemoize:Gn,until:Hn,waterfall:Qn,whilst:$n,all:Qt,allLimit:Kt,allSeries:Yt,any:On,anyLimit:Mn,anySeries:Dn,find:Ot,findLimit:Mt,findSeries:Dt,forEach:Vt,forEachSeries:Gt,forEachLimit:Wt,forEachOf:Pe,forEachOfSeries:St,forEachOfLimit:Te,inject:xt,foldl:xt,foldr:xn,select:tn,selectLimit:nn,selectSeries:rn,wrapSync:h};t.default=Kn,t.apply=s,t.applyEach=Oe,t.applyEachSeries=Le,t.asyncify=h,t.auto=We,t.autoInject=gt,t.cargo=wt,t.compose=Ct,t.concat=Et,t.concatLimit=kt,t.concatSeries=Rt,t.constant=Pt,t.detect=Ot,t.detectLimit=Mt,t.detectSeries=Dt,t.dir=Lt,t.doDuring=Ft,t.doUntil=qt,t.doWhilst=Ut,t.during=Bt,t.each=Vt,t.eachLimit=Wt,t.eachOf=Pe,t.eachOfLimit=Te,t.eachOfSeries=St,t.eachSeries=Gt,t.ensureAsync=$t,t.every=Qt,t.everyLimit=Kt,t.everySeries=Yt,t.filter=tn,t.filterLimit=nn,t.filterSeries=rn,t.forever=on,t.groupBy=an,t.groupByLimit=sn,t.groupBySeries=cn,t.log=un,t.map=Ie,t.mapLimit=De,t.mapSeries=Ne,t.mapValues=dn,t.mapValuesLimit=ln,t.mapValuesSeries=fn,t.memoize=hn,t.nextTick=mn,t.parallel=bn,t.parallelLimit=yn,t.priorityQueue=wn,t.queue=vn,t.race=Sn,t.reduce=xt,t.reduceRight=xn,t.reflect=_n,t.reflectAll=Cn,t.reject=kn,t.rejectLimit=En,t.rejectSeries=Rn,t.retry=An,t.retryable=jn,t.seq=_t,t.series=In,t.setImmediate=p,t.some=On,t.someLimit=Mn,t.someSeries=Dn,t.sortBy=Nn,t.timeout=Ln,t.times=Bn,t.timesLimit=qn,t.timesSeries=zn,t.transform=Vn,t.tryEach=Wn,t.unmemoize=Gn,t.until=Hn,t.waterfall=Qn,t.whilst=$n,t.all=Qt,t.allLimit=Kt,t.allSeries=Yt,t.any=On,t.anyLimit=Mn,t.anySeries=Dn,t.find=Ot,t.findLimit=Mt,t.findSeries=Dt,t.forEach=Vt,t.forEachSeries=Gt,t.forEachLimit=Wt,t.forEachOf=Pe,t.forEachOfSeries=St,t.forEachOfLimit=Te,t.inject=xt,t.foldl=xt,t.foldr=xn,t.select=tn,t.selectLimit=nn,t.selectSeries=rn,t.wrapSync=h,Object.defineProperty(t,"__esModule",{value:!0})})(t)}).call(this,n(46).setImmediate,n(6),n(3),n(23)(e))},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(47),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(3))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i,o,s,a,c=1,u={},l=!1,d=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick(function(){h(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){h(e.data)},r=function(e){o.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(i=d.documentElement,r=function(e){var t=d.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(h,0,e)}:(s="setImmediate$"+Math.random()+"$",a=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&h(+t.data.slice(s.length))},e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),r=function(t){e.postMessage(s+t,"*")}),f.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return u[c]=i,r(c),c++},f.clearImmediate=p}function p(e){delete u[e]}function h(e){if(l)setTimeout(h,0,e);else{var t=u[e];if(t){l=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{p(e),l=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(3),n(6))},function(e,t,n){var r,i,o=n(25),s=n(26),a=0,c=0;e.exports=function(e,t,n){var u=t&&n||0,l=t||[],d=(e=e||{}).node||r,f=void 0!==e.clockseq?e.clockseq:i;if(null==d||null==f){var p=o();null==d&&(d=r=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==f&&(f=i=16383&(p[6]<<8|p[7]))}var h=void 0!==e.msecs?e.msecs:(new Date).getTime(),m=void 0!==e.nsecs?e.nsecs:c+1,g=h-a+(m-c)/1e4;if(g<0&&void 0===e.clockseq&&(f=f+1&16383),(g<0||h>a)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=h,c=m,i=f;var b=(1e4*(268435455&(h+=122192928e5))+m)%4294967296;l[u++]=b>>>24&255,l[u++]=b>>>16&255,l[u++]=b>>>8&255,l[u++]=255&b;var y=h/4294967296*1e4&268435455;l[u++]=y>>>8&255,l[u++]=255&y,l[u++]=y>>>24&15|16,l[u++]=y>>>16&255,l[u++]=f>>>8|128,l[u++]=255&f;for(var v=0;v<6;++v)l[u+v]=d[v];return t||s(l)}},function(e,t,n){var r=n(25),i=n(26);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[o+a]=s[a];return t||i(s)}},function(e,t,n){"use strict";var r=n(51);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";
/** @license React v16.8.6
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,s=r?Symbol.for("react.fragment"):60107,a=r?Symbol.for("react.strict_mode"):60108,c=r?Symbol.for("react.profiler"):60114,u=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,d=r?Symbol.for("react.async_mode"):60111,f=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,h=r?Symbol.for("react.suspense"):60113,m=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116;function b(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case d:case f:case s:case c:case a:case h:return e;default:switch(e=e&&e.$$typeof){case l:case p:case u:return e;default:return t}}case g:case m:case o:return t}}}function y(e){return b(e)===f}t.typeOf=b,t.AsyncMode=d,t.ConcurrentMode=f,t.ContextConsumer=l,t.ContextProvider=u,t.Element=i,t.ForwardRef=p,t.Fragment=s,t.Lazy=g,t.Memo=m,t.Portal=o,t.Profiler=c,t.StrictMode=a,t.Suspense=h,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===f||e===c||e===a||e===h||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===u||e.$$typeof===l||e.$$typeof===p)},t.isAsyncMode=function(e){return y(e)||b(e)===d},t.isConcurrentMode=y,t.isContextConsumer=function(e){return b(e)===l},t.isContextProvider=function(e){return b(e)===u},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return b(e)===p},t.isFragment=function(e){return b(e)===s},t.isLazy=function(e){return b(e)===g},t.isMemo=function(e){return b(e)===m},t.isPortal=function(e){return b(e)===o},t.isProfiler=function(e){return b(e)===c},t.isStrictMode=function(e){return b(e)===a},t.isSuspense=function(e){return b(e)===h}},function(e,t,n){"use strict";t.byteLength=function(e){var t=u(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){for(var t,n=u(e),r=n[0],s=n[1],a=new o(function(e,t,n){return 3*(t+n)/4-n}(0,r,s)),c=0,l=s>0?r-4:r,d=0;d<l;d+=4)t=i[e.charCodeAt(d)]<<18|i[e.charCodeAt(d+1)]<<12|i[e.charCodeAt(d+2)]<<6|i[e.charCodeAt(d+3)],a[c++]=t>>16&255,a[c++]=t>>8&255,a[c++]=255&t;2===s&&(t=i[e.charCodeAt(d)]<<2|i[e.charCodeAt(d+1)]>>4,a[c++]=255&t);1===s&&(t=i[e.charCodeAt(d)]<<10|i[e.charCodeAt(d+1)]<<4|i[e.charCodeAt(d+2)]>>2,a[c++]=t>>8&255,a[c++]=255&t);return a},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(l(e,s,s+16383>a?a:s+16383));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=s.length;a<c;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var i,o,s=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,c=(1<<a)-1,u=c>>1,l=-7,d=n?i-1:0,f=n?-1:1,p=e[t+d];for(d+=f,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+e[t+d],d+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+e[t+d],d+=f,l-=8);if(0===o)o=1-u;else{if(o===c)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),o-=u}return(p?-1:1)*s*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var s,a,c,u=8*o-i-1,l=(1<<u)-1,d=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,h=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+d>=1?f/c:f*Math.pow(2,1-d))*c>=2&&(s++,c/=2),s+d>=l?(a=0,s=l):s+d>=1?(a=(t*c-1)*Math.pow(2,i),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;e[n+p]=255&a,p+=h,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;e[n+p]=255&s,p+=h,s/=256,u-=8);e[n+p-h]|=128*m}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});const r=n(1).__importStar(n(13)),i=r.find,o=r.createElement,s=t.field=function(e,t){return function(){const n=Array.prototype.slice.call(arguments);return{get:function(){return e.apply(null,[this.xml].concat(n))},set:function(e){t.apply(null,[this.xml].concat(n).concat([e]))}}}};t.boolAttribute=s(r.getBoolAttribute,r.setBoolAttribute),t.subAttribute=s(r.getSubAttribute,r.setSubAttribute),t.boolSubAttribute=s(r.getSubBoolAttribute,r.setSubBoolAttribute),t.text=s(r.getText,r.setText),t.subText=s(r.getSubText,r.setSubText),t.textSub=t.subText,t.multiTextSub=t.multiSubText=s(r.getMultiSubText,r.setMultiSubText),t.multiSubAttribute=s(r.getMultiSubAttribute,r.setMultiSubAttribute),t.subLangText=s(r.getSubLangText,r.setSubLangText),t.langTextSub=t.subLangText,t.boolSub=s(r.getBoolSub,r.setBoolSub),t.langAttribute=s(function(e){return e.getAttributeNS(r.XML_NS,"lang")||""},function(e,t){e.setAttributeNS(r.XML_NS,"lang",t)}),t.b64Text=s(function(t){return t.textContent&&"="!==t.textContent?e.from(t.textContent,"base64"):""},function(t,n){if("string"==typeof n){const r=e.from(n).toString("base64");t.textContent=r||"="}else t.textContent=""}),t.dateAttribute=function(e,t){return{get:function(){const n=r.getAttribute(this.xml,e);return n?new Date(n):t?new Date(Date.now()):void 0},set:function(t){t&&("string"!=typeof t&&(t=t.toISOString()),r.setAttribute(this.xml,e,t))}}},t.dateSub=function(e,t,n){return{get:function(){const i=r.getSubText(this.xml,e,t);return i?new Date(i):n?new Date(Date.now()):void 0},set:function(n){n&&("string"!=typeof n&&(n=n.toISOString()),r.setSubText(this.xml,e,t,n))}}},t.dateSubAttribute=function(e,t,n,i){return{get:function(){const o=r.getSubAttribute(this.xml,e,t,n);return o?new Date(o):i?new Date(Date.now()):void 0},set:function(i){i&&("string"!=typeof i&&(i=i.toISOString()),r.setSubAttribute(this.xml,e,t,n,i))}}},t.numberAttribute=function(e,t,n){return{get:function(){const i=t?parseFloat:parseInt,o=r.getAttribute(this.xml,e,"");if(!o)return n;const s=i(o,10);return isNaN(s)?n:s},set:function(t){r.setAttribute(this.xml,e,t.toString())}}},t.numberSub=function(e,t,n,i){return{get:function(){const o=n?parseFloat:parseInt,s=r.getSubText(this.xml,e,t,"");if(!s)return i;const a=o(s,10);return isNaN(a)?i:a},set:function(n){r.setSubText(this.xml,e,t,n.toString())}}},t.numberSubAttribute=function(e,t,n,i,o){return{get:function(){const s=i?parseFloat:parseInt,a=r.getSubAttribute(this.xml,e,t,n,"");if(!a)return o;const c=s(a,10);return isNaN(c)?o:c},set:function(i){r.setSubAttribute(this.xml,e,t,n,i.toString())}}},t.attribute=function(e,t){return{get:function(){return r.getAttribute(this.xml,e,t)},set:function(t){r.setAttribute(this.xml,e,t)}}},t.attributeNS=function(e,t,n){return{get:function(){return r.getAttributeNS(this.xml,e,t,n)},set:function(n){r.setAttributeNS(this.xml,e,t,n)}}},t.extension=function(e){return{get:function(){const t=this,n=e.prototype._name;if(!this._extensions[n]){const r=i(this.xml,e.prototype._NS,e.prototype._EL);r.length?this._extensions[n]=new e(null,r[0],t):(this._extensions[n]=new e({},null,t),this.xml.appendChild(this._extensions[n].xml)),this._extensions[n].parent=this}return this._extensions[n]},set:function(t){if(t){const n=this[e.prototype._name];!0===t&&(t={}),Object.assign(n,t)}}}},t.multiExtension=function(e){return{get:function(){const t=this,n=i(this.xml,e.prototype._NS,e.prototype._EL),r=[];for(let i=0,o=n.length;i<o;i++)r.push(new e({},n[i],t));return r},set:function(t){t=t||[];const n=this,r=i(this.xml,e.prototype._NS,e.prototype._EL);let o,s;for(o=0,s=r.length;o<s;o++)n.xml.removeChild(r[o]);for(o=0,s=t.length;o<s;o++){const r=new e(t[o],null,n);n.xml.appendChild(r.xml)}}}},t.enumSub=function(e,t){return{get:function(){const n=this,r=[];return t.forEach(function(t){const o=i(n.xml,e,t);o.length&&r.push(o[0].nodeName)}),r[0]||""},set:function(n){const r=this;let s=!1;if(t.forEach(function(t){const o=i(r.xml,e,t);o.length&&(t===n?s=!0:r.xml.removeChild(o[0]))}),n&&!s){const t=o(e,n);this.xml.appendChild(t)}}}},t.subExtension=function(e,t,n,r){return{get:function(){if(!this._extensions[e]){let s=i(this.xml,t,n);s.length?s=s[0]:(s=o(t,n,this._NS),this.xml.appendChild(s));const a=i(s,r.prototype._NS,r.prototype._EL);a.length?this._extensions[e]=new r(null,a[0],{xml:s}):(this._extensions[e]=new r({},null,{xml:s}),s.appendChild(this._extensions[e].xml)),this._extensions[e].parent=this}return this._extensions[e]},set:function(r){const o=i(this.xml,t,n);if(o.length&&!r&&this.xml.removeChild(o[0]),r){const t=this[e];!0===r&&(r={}),Object.assign(t,r)}}}},t.subMultiExtension=function(e,t,n){return{get:function(){const r=this,o=[];let s=i(this.xml,e,t);return s.length?(s=s[0],i(s,n.prototype._NS,n.prototype._EL).forEach(function(e){o.push(new n({},e,r))}),o):o},set:function(r){const s=this;let a=i(this.xml,e,t);a.length&&s.xml.removeChild(a[0]),r.length&&(a=o(e,t,this._NS),r.forEach(function(t){const r=new n(t,null,{xml:{namespaceURI:e}});a.appendChild(r.xml)}),s.xml.appendChild(a))}}}}).call(this,n(9).Buffer)},function(e,t,n){"use strict";var r=n(58);e.exports=function(e,t){var n;n="function"==typeof t?new t:new r(t);var i=null,o=null;if(n.on("tree",function(e){i=e}),n.on("error",function(e){o=e}),n.write(e),n.end(),o)throw o;return i}},function(e,t,n){"use strict";var r=n(4).EventEmitter,i=n(7),o=n(27),s=n(61),a=function(e){r.call(this);var t,n=this.Parser=e&&e.Parser||this.DefaultParser,i=this.Element=e&&e.Element||this.DefaultElement;this.parser=new n;var o=this;this.parser.on("startElement",function(e,n){var r=new i(e,n);t=t?t.cnode(r):r}),this.parser.on("endElement",function(e){t&&e===t.name&&(t.parent?t=t.parent:o.tree||(o.tree=t,t=void 0))}),this.parser.on("text",function(e){t&&t.t(e)}),this.parser.on("error",function(e){o.error=e,o.emit("error",e)})};i(a,r),a.prototype.DefaultParser=s,a.prototype.DefaultElement=o,a.prototype.write=function(e){this.parser.write(e)},a.prototype.end=function(e){this.parser.end(e),this.error||(this.tree?this.emit("tree",this.tree):this.emit("error",new Error("Incomplete document")))},e.exports=a},function(e,t,n){"use strict";function r(e,t){return e.name===t.name}function i(e,t){var n=e.attrs,r=Object.keys(n),i=r.length;if(i!==Object.keys(t.attrs).length)return!1;for(var o=0,s=i;o<s;o++){var a=r[o],c=n[a];if(null==c||null==t.attrs[a]){if(c!==t.attrs[a])return!1}else if(c.toString()!==t.attrs[a].toString())return!1}return!0}function o(e,t){var n=e.children,r=n.length;if(r!==t.children.length)return!1;for(var i=0,o=r;i<o;i++){var s=n[i];if("string"==typeof s){if(s!==t.children[i])return!1}else if(!s.equals(t.children[i]))return!1}return!0}e.exports.name=r,e.exports.attrs=i,e.exports.children=o,e.exports.equal=function(e,t){return!!r(e,t)&&!!i(e,t)&&!!o(e,t)}},function(e,t,n){"use strict";e.exports=function(e){for(var t=new e.constructor(e.name,e.attrs),n=0;n<e.children.length;n++){var r=e.children[n];t.cnode(r.clone?r.clone():r)}return t}},function(e,t,n){"use strict";var r=n(7),i=n(4).EventEmitter,o=n(28).unescapeXML,s=e.exports=function(){i.call(this);var e,t,n,r,s,a,c,u,l=0,d=0;this._handleTagOpening=function(e,t,n){e?this.emit("endElement",t):(this.emit("startElement",t,n),s&&this.emit("endElement",t))},this.write=function(i){"string"!=typeof i&&(i=i.toString());var f=0;function p(){if("number"==typeof d){var e=i.substring(d,f);return d=void 0,e}}for(e&&(i=e+i,f+=e.length,e=null);f<i.length;f++){if(0===l){var h=i.indexOf("<",f);-1!==h&&f!==h&&(f=h)}else if(8===l){var m=i.indexOf(c,f);-1!==m&&(f=m)}else if(1===l){var g=i.indexOf("--\x3e",f);-1!==g&&(f=g+2)}var b=i.charCodeAt(f);switch(l){case 0:if(60===b){var y=p();y&&this.emit("text",o(y)),l=3,d=f+1,n={}}break;case 9:if(93===b&&"]>"===i.substr(f+1,2)){var v=p();v&&this.emit("text",v),l=1}break;case 3:47===b&&d===f?(d=f+1,r=!0):33===b?"[CDATA["===i.substr(f+1,7)?(d=f+8,l=9):(d=void 0,l=1):63===b?(d=void 0,l=2):(b<=32||47===b||62===b)&&(t=p(),f--,l=4);break;case 1:if(62===b){var w=i.charCodeAt(f-1),S=i.charCodeAt(f-2);(45===w&&45===S||93===w&&93===S)&&(l=0)}break;case 2:if(62===b)63===i.charCodeAt(f-1)&&(l=0);break;case 4:62===b?(this._handleTagOpening(r,t,n),t=void 0,n=void 0,r=void 0,s=void 0,l=0,d=f+1):47===b?s=!0:b>32&&(d=f,l=5);break;case 5:(b<=32||61===b)&&(u=p(),f--,l=6);break;case 6:61===b&&(l=7);break;case 7:34!==b&&39!==b||(a=b,c=34===b?'"':"'",l=8,d=f+1);break;case 8:if(b===a){var x=o(p());n[u]=x,u=void 0,l=4}}}"number"==typeof d&&d<=i.length&&(e=i.slice(d),d=0)}};r(s,i),s.prototype.end=function(e){e&&this.write(e),this.write=function(){}}},function(e,t,n){"use strict";var r=n(7),i=n(27);function o(e,t){i.call(this,e,t),this.nodeType=1,this.nodeName=this.localName}r(o,i),o.prototype._getElement=function(e,t){return new o(e,t)},Object.defineProperty(o.prototype,"localName",{get:function(){return this.getName()}}),Object.defineProperty(o.prototype,"namespaceURI",{get:function(){return this.getNS()}}),Object.defineProperty(o.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(o.prototype,"childNodes",{get:function(){return this.children}}),Object.defineProperty(o.prototype,"textContent",{get:function(){return this.getText()},set:function(e){this.children.push(e)}}),o.prototype.getElementsByTagName=function(e){return this.getChildren(e)},o.prototype.getAttribute=function(e){return this.getAttr(e)},o.prototype.setAttribute=function(e,t){this.attr(e,t)},o.prototype.getAttributeNS=function(e,t){return"http://www.w3.org/XML/1998/namespace"===e?this.getAttr(["xml",t].join(":")):this.getAttr(t,e)},o.prototype.setAttributeNS=function(e,t,n){var r;"http://www.w3.org/XML/1998/namespace"===e?r="xml":r=this.getXmlns()[e]||"";r&&this.attr([r,t].join(":"),n)},o.prototype.removeAttribute=function(e){this.attr(e,null)},o.prototype.removeAttributeNS=function(e,t){var n;"http://www.w3.org/XML/1998/namespace"===e?n="xml":n=this.getXmlns()[e]||"";n&&this.attr([n,t].join(":"),null)},o.prototype.appendChild=function(e){this.cnode(e)},o.prototype.removeChild=function(e){this.remove(e)},o.createElement=function(e,t){var n=new o(e,t);return Array.prototype.slice.call(arguments,2).forEach(function(e){n.appendChild(e)}),n},e.exports=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1).__importStar(n(13)),i={constructor:!0,parent:!0,prototype:!0,toJSON:!0,toString:!0,xml:!0};t.default=function(e,t){class n{constructor(n,i,o){const s=this,a=((i||{}).parentNode||(o||{}).xml||{}).namespaceURI;s.xml=i||r.createElement(s._NS,s._EL,a),Object.keys(s._PREFIXES).forEach(function(e){const t=s._PREFIXES[e];s.xml.setAttribute("xmlns:"+e,t)}),s._extensions={};for(let t=0,n=s.xml.childNodes.length;t<n;t++){const n=s.xml.childNodes[t],r=e.getDefinition(n.localName,n.namespaceURI);if(void 0!==r){const e=r.prototype._name;s._extensions[e]=new r(null,n),s._extensions[e].parent=s}}const c=Object.getPrototypeOf(s);for(const e of Object.keys(n||{})){const t=Object.getOwnPropertyDescriptor(c,e);t.set&&t.set.call(s,n[e])}return t.init&&t.init.apply(s,[n]),s}toString(){return this.xml.toString()}toJSON(){let t;const n={};for(t of Object.keys(this._extensions))this._extensions[t].toJSON&&"_"!==t[0]&&(n[t]=this._extensions[t].toJSON());for(t in this){const r=!i[t]&&"_"!==t[0],o=e.getExtensions(this._EL,this._NS)[t];if(r&&!o){const e=this[t];if("function"==typeof e)continue;const r=Object.prototype.toString.call(e);if(r.indexOf("Object")>=0)Object.keys(e).length>0&&(e._isJXT?n[t]=e.toJSON():n[t]=e);else if(r.indexOf("Array")>=0){if(e.length>0){const r=[],i=e.length;for(let t=0;t<i;t++){const n=e[t];void 0!==n&&(n._isJXT?r.push(n.toJSON()):r.push(n))}n[t]=r}}else void 0!==e&&!1!==e&&""!==e&&(n[t]=e)}}return n}}return n.prototype._isJXT=!0,n.prototype._name=t.name,n.prototype._eventname=t.eventName,n.prototype._NS=t.namespace,n.prototype._EL=t.element||t.name,n.prototype._PREFIXES=t.prefixes||{},n.prototype._TAGS=t.tags||[],n}},function(e,t){},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(9).Buffer,o=n(66).inspect,s=o&&o.custom||"inspect";e.exports=function(){function e(){this.head=null,this.tail=null,this.length=0}var t=e.prototype;return t.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},t.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},t.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},t.clear=function(){this.head=this.tail=null,this.length=0},t.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},t.concat=function(e){if(0===this.length)return i.alloc(0);for(var t,n,r,o=i.allocUnsafe(e>>>0),s=this.head,a=0;s;)t=s.data,n=o,r=a,i.prototype.copy.call(t,n,r),a+=s.data.length,s=s.next;return o},t.consume=function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n},t.first=function(){return this.head.data},t._getString=function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?r+=i:r+=i.slice(0,e),0===(e-=o)){o===i.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++n}return this.length-=n,r},t._getBuffer=function(e){var t=i.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var o=n.data,s=e>o.length?o.length:e;if(o.copy(t,t.length-e,0,s),0===(e-=s)){s===o.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(s));break}++r}return this.length-=r,t},t[s]=function(e,t){return o(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){r(e,t,n[t])})}return e}({},t,{depth:0,customInspect:!1}))},e}()},function(e,t){},function(e,t,n){"use strict";(function(t){var n=new Set;e.exports.emitExperimentalWarning=t.emitWarning?function(e){if(!n.has(e)){var r=e+" is an experimental feature. This feature could change at any time";n.add(e),t.emitWarning(r,"ExperimentalWarning")}}:function(){}}).call(this,n(6))},function(e,t,n){(function(t){function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}}).call(this,n(3))},function(e,t,n){var r=n(9),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=s),o(i,s),s.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},s.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},function(e,t,n){"use strict";(function(t){var r;function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(14),s=Symbol("lastResolve"),a=Symbol("lastReject"),c=Symbol("error"),u=Symbol("ended"),l=Symbol("lastPromise"),d=Symbol("handlePromise"),f=Symbol("stream");function p(e,t){return{value:e,done:t}}function h(e){var t=e[s];if(null!==t){var n=e[f].read();null!==n&&(e[l]=null,e[s]=null,e[a]=null,t(p(n,!1)))}}var m=Object.getPrototypeOf(function(){}),g=Object.setPrototypeOf((i(r={get stream(){return this[f]},next:function(){var e=this,n=this[c];if(null!==n)return Promise.reject(n);if(this[u])return Promise.resolve(p(void 0,!0));if(this[f].destroyed)return new Promise(function(n,r){t.nextTick(function(){e[c]?r(e[c]):n(p(void 0,!0))})});var r,i=this[l];if(i)r=new Promise(function(e,t){return function(n,r){e.then(function(){t[u]?n(p(void 0,!0)):t[d](n,r)},r)}}(i,this));else{var o=this[f].read();if(null!==o)return Promise.resolve(p(o,!1));r=new Promise(this[d])}return this[l]=r,r}},Symbol.asyncIterator,function(){return this}),i(r,"return",function(){var e=this;return new Promise(function(t,n){e[f].destroy(null,function(e){e?n(e):t(p(void 0,!0))})})}),r),m);e.exports=function(e){var n,r=Object.create(g,(i(n={},f,{value:e,writable:!0}),i(n,s,{value:null,writable:!0}),i(n,a,{value:null,writable:!0}),i(n,c,{value:null,writable:!0}),i(n,u,{value:e._readableState.endEmitted,writable:!0}),i(n,d,{value:function(e,t){var n=r[f].read();n?(r[l]=null,r[s]=null,r[a]=null,e(p(n,!1))):(r[s]=e,r[a]=t)},writable:!0}),n));return r[l]=null,o(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[a];return null!==t&&(r[l]=null,r[s]=null,r[a]=null,t(e)),void(r[c]=e)}var n=r[s];null!==n&&(r[l]=null,r[s]=null,r[a]=null,n(p(void 0,!0))),r[u]=!0}),e.on("readable",function(e){t.nextTick(h,e)}.bind(null,r)),r}}).call(this,n(6))},function(e,t,n){"use strict";e.exports=i;var r=n(35);function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}n(7)(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){"use strict";var r;var i=n(10).codes,o=i.ERR_MISSING_ARGS,s=i.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function c(e){e()}function u(e,t){return e.pipe(t)}e.exports=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var l,d=function(e){return e.length?"function"!=typeof e[e.length-1]?a:e.pop():a}(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new o("streams");var f=t.map(function(e,i){var o=i<t.length-1;return function(e,t,i,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var a=!1;e.on("close",function(){a=!0}),void 0===r&&(r=n(14)),r(e,{readable:t,writable:i},function(e){if(e)return o(e);a=!0,o()});var c=!1;return function(t){if(!a&&!c)return c=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void o(t||new s("pipe"))}}(e,o,i>0,function(e){l||(l=e),e&&f.forEach(c),o||(f.forEach(c),d(l))})});return t.reduce(u)}},function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"shimGetUserMedia",function(){return D}),n.d(r,"shimGetDisplayMedia",function(){return N}),n.d(r,"shimMediaStream",function(){return L}),n.d(r,"shimOnTrack",function(){return F}),n.d(r,"shimGetSendersWithDtmf",function(){return U}),n.d(r,"shimGetStats",function(){return q}),n.d(r,"shimSenderReceiverGetStats",function(){return B}),n.d(r,"shimAddTrackRemoveTrackWithNative",function(){return z}),n.d(r,"shimAddTrackRemoveTrack",function(){return V}),n.d(r,"shimPeerConnection",function(){return W}),n.d(r,"fixNegotiationNeeded",function(){return G});var i={};n.r(i),n.d(i,"shimGetUserMedia",function(){return Q}),n.d(i,"shimGetDisplayMedia",function(){return K}),n.d(i,"shimPeerConnection",function(){return Y}),n.d(i,"shimReplaceTrack",function(){return J});var o={};n.r(o),n.d(o,"shimGetUserMedia",function(){return X}),n.d(o,"shimGetDisplayMedia",function(){return Z}),n.d(o,"shimOnTrack",function(){return ee}),n.d(o,"shimPeerConnection",function(){return te}),n.d(o,"shimSenderGetStats",function(){return ne}),n.d(o,"shimReceiverGetStats",function(){return re}),n.d(o,"shimRemoveStream",function(){return ie}),n.d(o,"shimRTCDataChannel",function(){return oe});var s={};n.r(s),n.d(s,"shimLocalStreamsAPI",function(){return se}),n.d(s,"shimRemoteStreamsAPI",function(){return ae}),n.d(s,"shimCallbacksAPI",function(){return ce}),n.d(s,"shimGetUserMedia",function(){return ue}),n.d(s,"shimConstraints",function(){return le}),n.d(s,"shimRTCIceServerUrls",function(){return de}),n.d(s,"shimTrackEventTransceiver",function(){return fe}),n.d(s,"shimCreateOfferLegacy",function(){return pe});var a={};n.r(a),n.d(a,"shimRTCIceCandidate",function(){return ge}),n.d(a,"shimMaxMessageSize",function(){return be}),n.d(a,"shimSendThrowTypeError",function(){return ye}),n.d(a,"shimConnectionState",function(){return ve}),n.d(a,"removeAllowExtmapMixed",function(){return we});var c=n(16),u=function(){return Math.random().toString(36).substring(7).split("").join(".")},l={INIT:"@@redux/INIT"+u(),REPLACE:"@@redux/REPLACE"+u(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+u()}};function d(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function f(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function");if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(f)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var i=e,o=t,s=[],a=s,u=!1;function p(){a===s&&(a=s.slice())}function h(){if(u)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return o}function m(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(u)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");var t=!0;return p(),a.push(e),function(){if(t){if(u)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");t=!1,p();var n=a.indexOf(e);a.splice(n,1)}}}function g(e){if(!d(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(u)throw new Error("Reducers may not dispatch actions.");try{u=!0,o=i(o,e)}finally{u=!1}for(var t=s=a,n=0;n<t.length;n++){(0,t[n])()}return e}return g({type:l.INIT}),(r={dispatch:g,subscribe:m,getState:h,replaceReducer:function(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");i=e,g({type:l.REPLACE})}})[c.a]=function(){var e,t=m;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(h())}return n(),{unsubscribe:t(n)}}})[c.a]=function(){return this},e},r}function p(e,t){var n=t&&t.type;return"Given "+(n&&'action "'+String(n)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function h(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"==typeof e[i]&&(n[i]=e[i])}var o,s=Object.keys(n);try{!function(e){Object.keys(e).forEach(function(t){var n=e[t];if(void 0===n(void 0,{type:l.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:l.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+l.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}(n)}catch(e){o=e}return function(e,t){if(void 0===e&&(e={}),o)throw o;for(var r=!1,i={},a=0;a<s.length;a++){var c=s[a],u=n[c],l=e[c],d=u(l,t);if(void 0===d){var f=p(c,t);throw new Error(f)}i[c]=d,r=r||d!==l}return r?i:e}}function m(e,t){return function(){return t(e.apply(this,arguments))}}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}function y(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},o=t.map(function(e){return e(i)});return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){g(e,t,n[t])})}return e}({},n,{dispatch:r=b.apply(void 0,o)(n.dispatch)})}}}function v(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"==typeof i?i(n,r,e):t(i)}}}}var w=v();w.withExtraArgument=v;var S=w;let x=!0,_=!0;function C(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function T(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);const o=e=>{const t=n(e);t&&r(t)};return this._eventMap=this._eventMap||{},this._eventMap[r]=o,i.apply(this,[e,o])};const o=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[n])return o.apply(this,arguments);const r=this._eventMap[n];return delete this._eventMap[n],o.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function k(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(x=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function E(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(_=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function R(){if("object"==typeof window){if(x)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function P(e,t){_&&console.warn(e+" is deprecated, please use "+t+" instead.")}function A(e){const{navigator:t}=e,n={browser:null,version:null};if(void 0===e||!e.navigator)return n.browser="Not a browser.",n;if(t.mozGetUserMedia)n.browser="firefox",n.version=C(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)n.browser="chrome",n.version=C(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.mediaDevices&&t.userAgent.match(/Edge\/(\d+).(\d+)$/))n.browser="edge",n.version=C(t.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!t.userAgent.match(/AppleWebKit\/(\d+)\./))return n.browser="Not a supported browser.",n;n.browser="safari",n.version=C(t.userAgent,/AppleWebKit\/(\d+)\./,1),n.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return n}function j(e){return"[object Object]"===Object.prototype.toString.call(e)}function I(e){return j(e)?Object.keys(e).reduce(function(t,n){const r=j(e[n]),i=r?I(e[n]):e[n],o=r&&!Object.keys(i).length;return void 0===i||o?t:Object.assign(t,{[n]:i})},{}):e}function O(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;const o=[];return e.forEach(e=>{"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)}),o.forEach(t=>{e.forEach(n=>{n.type===r&&n.trackId===t.id&&function e(t,n,r){n&&!r.has(n.id)&&(r.set(n.id,n),Object.keys(n).forEach(i=>{i.endsWith("Id")?e(t,t.get(n[i]),r):i.endsWith("Ids")&&n[i].forEach(n=>{e(t,t.get(n),r)})}))}(e,n,i)})}),i}const M=R;function D(e){const t=e&&e.navigator;if(!t.mediaDevices)return;const n=A(e),r=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach(n=>{if("require"===n||"advanced"===n||"mediaSource"===n)return;const r="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);const i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];let e={};"number"==typeof r.ideal?(e[i("min",n)]=r.ideal,t.optional.push(e),(e={})[i("max",n)]=r.ideal,t.optional.push(e)):(e[i("",n)]=r.ideal,t.optional.push(e))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach(e=>{void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])})}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},i=function(e,i){if(n.version>=61)return i(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){const t=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"==typeof e.video){let o=e.video.facingMode;o=o&&("object"==typeof o?o:{ideal:o});const s=n.version<66;if(o&&("user"===o.exact||"environment"===o.exact||"user"===o.ideal||"environment"===o.ideal)&&(!t.mediaDevices.getSupportedConstraints||!t.mediaDevices.getSupportedConstraints().facingMode||s)){let n;if(delete e.video.facingMode,"environment"===o.exact||"environment"===o.ideal?n=["back","rear"]:"user"!==o.exact&&"user"!==o.ideal||(n=["front"]),n)return t.mediaDevices.enumerateDevices().then(t=>{let s=(t=t.filter(e=>"videoinput"===e.kind)).find(e=>n.some(t=>e.label.toLowerCase().includes(t)));return!s&&t.length&&n.includes("back")&&(s=t[t.length-1]),s&&(e.video.deviceId=o.exact?{exact:s.deviceId}:{ideal:s.deviceId}),e.video=r(e.video),M("chrome: "+JSON.stringify(e)),i(e)})}e.video=r(e.video)}return M("chrome: "+JSON.stringify(e)),i(e)},o=function(e){return n.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(t.getUserMedia=function(e,n,r){i(e,e=>{t.webkitGetUserMedia(e,n,e=>{r&&r(o(e))})})}.bind(t),t.mediaDevices.getUserMedia){const e=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(t){return i(t,t=>e(t).then(e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach(e=>{e.stop()}),new DOMException("","NotFoundError");return e},e=>Promise.reject(o(e))))}}}function N(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then(t=>{const r=n.video&&n.video.width,i=n.video&&n.video.height,o=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(n)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}function L(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function F(e){if("object"!=typeof e||!e.RTCPeerConnection||"ontrack"in e.RTCPeerConnection.prototype)T(e,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e));else{Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=(t=>{t.stream.addEventListener("addtrack",n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(e=>e.track&&e.track.id===n.track.id):{track:n.track};const i=new Event("track");i.track=n.track,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)}),t.stream.getTracks().forEach(n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(e=>e.track&&e.track.id===n.id):{track:n};const i=new Event("track");i.track=n,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)})}),this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}}function U(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){let i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach(e=>{this._senders.push(t(this,e))})};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],r.apply(this,[e]),e.getTracks().forEach(e=>{const t=this._senders.find(t=>t.track===e);t&&this._senders.splice(this._senders.indexOf(t),1)})}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function q(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(e,n,r){const i=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof arguments[0]))return t.apply(this,[]);const o=function(e){const t={};return e.result().forEach(e=>{const n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach(t=>{n[t]=e.stat(t)}),t[n.id]=n}),t},s=function(e){return new Map(Object.keys(e).map(t=>[t,e[t]]))};if(arguments.length>=2){const e=function(e){i[1](s(o(e)))};return t.apply(this,[e,arguments[0]])}return new Promise((e,n)=>{t.apply(this,[function(t){e(s(o(t)))},n])}).then(n,r)}}function B(e){if(!("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then(t=>O(t,e.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e}),T(e,"track",e=>(e.receiver._pc=e.srcElement,e)),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then(t=>O(t,e.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,n,r;return this.getSenders().forEach(n=>{n.track===e&&(t?r=!0:t=n)}),this.getReceivers().forEach(t=>(t.track===e&&(n?r=!0:n=t),t.track===e)),r||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function z(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(e=>this._shimmedLocalStreams[e][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach(e=>{if(this.getSenders().find(t=>t.track===e))throw new DOMException("Track already exists.","InvalidAccessError")});const t=this.getSenders();n.apply(this,arguments);const r=this.getSenders().filter(e=>-1===t.indexOf(e));this._shimmedLocalStreams[e.id]=[e].concat(r)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach(t=>{const n=this._shimmedLocalStreams[t].indexOf(e);-1!==n&&this._shimmedLocalStreams[t].splice(n,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]}),i.apply(this,arguments)}}function V(e){if(!e.RTCPeerConnection)return;const t=A(e);if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return z(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=n.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map(e=>this._reverseStreams[e.id])};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach(e=>{if(this.getSenders().find(t=>t.track===e))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[t.id]){const n=new e.MediaStream(t.getTracks());this._streams[t.id]=n,this._reverseStreams[n.id]=t,t=n}r.apply(this,[t])};const i=e.RTCPeerConnection.prototype.removeStream;function o(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(t=>{const r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(i.id,"g"),r.id)}),new RTCSessionDescription({type:t.type,sdp:n})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const r=[].slice.call(arguments,1);if(1!==r.length||!r[0].getTracks().find(e=>e===t))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(e=>e.track===t))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const i=this._streams[n.id];if(i)i.addTrack(t),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const r=new e.MediaStream([t]);this._streams[n.id]=r,this._reverseStreams[r.id]=n,this.addStream(r)}return this.getSenders().find(e=>e.track===t)},["createOffer","createAnswer"].forEach(function(t){const n=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){const e=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[t=>{const n=o(this,t);e[0].apply(null,[n])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):n.apply(this,arguments).then(e=>o(this,e))}});const s=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(t=>{const r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),i.id)}),new RTCSessionDescription({type:t.type,sdp:n})}(this,arguments[0]),s.apply(this,arguments)):s.apply(this,arguments)};const a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=a.get.apply(this);return""===e.type?e:o(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach(n=>{this._streams[n].getTracks().find(t=>e.track===t)&&(t=this._streams[n])}),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function W(e){const t=A(e);if(!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),!e.RTCPeerConnection)return;t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){const n=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}});const n=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}function G(e){T(e,"negotiationneeded",e=>{if("stable"===e.target.signalingState)return e})}var $=n(37),H=n.n($);function Q(e){const t=e&&e.navigator,n=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return n(e).catch(e=>Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString(){return this.name}}}(e)))}}function K(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}function Y(e){const t=A(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){const t=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set(e){t.set.call(this,e);const n=new Event("enabled");n.enabled=e,this.dispatchEvent(n)}})}!e.RTCRtpSender||"dtmf"in e.RTCRtpSender.prototype||Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);const n=H()(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=function(e,t){let n=!1;return(e=JSON.parse(JSON.stringify(e))).filter(e=>{if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&P("RTCIceServer.url","RTCIceServer.urls");const r="string"==typeof t;return r&&(t=[t]),t=t.filter(e=>{if(0===e.indexOf("stun:"))return!1;const t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return t&&!n?(n=!0,!0):t&&!n}),delete e.url,e.urls=r?t[0]:t,!!t.length}})}(e.iceServers,t.version),R("ICE servers after filtering:",e.iceServers)),new n(e)},e.RTCPeerConnection.prototype=n.prototype}function J(e){!e.RTCRtpSender||"replaceTrack"in e.RTCRtpSender.prototype||(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}function X(e){const t=A(e),n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){P("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const e=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},t=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(n){return"object"==typeof n&&"object"==typeof n.audio&&(n=JSON.parse(JSON.stringify(n)),e(n.audio,"autoGainControl","mozAutoGainControl"),e(n.audio,"noiseSuppression","mozNoiseSuppression")),t(n)},r&&r.prototype.getSettings){const t=r.prototype.getSettings;r.prototype.getSettings=function(){const n=t.apply(this,arguments);return e(n,"mozAutoGainControl","autoGainControl"),e(n,"mozNoiseSuppression","noiseSuppression"),n}}if(r&&r.prototype.applyConstraints){const t=r.prototype.applyConstraints;r.prototype.applyConstraints=function(n){return"audio"===this.kind&&"object"==typeof n&&(n=JSON.parse(JSON.stringify(n)),e(n,"autoGainControl","mozAutoGainControl"),e(n,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[n])}}}}function Z(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,Promise.reject(e)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}function ee(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function te(e){const t=A(e);if("object"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){const n=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}});const n=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())};const r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(e,n,o){return i.apply(this,[e||null]).then(e=>{if(t.version<53&&!n)try{e.forEach(e=>{e.type=r[e.type]||e.type})}catch(t){if("TypeError"!==t.name)throw t;e.forEach((t,n)=>{e.set(n,Object.assign({},t,{type:r[t.type]||t.type}))})}return e}).then(n,o)}}function ne(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function re(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e}),T(e,"track",e=>(e.receiver._pc=e.srcElement,e)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function ie(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){P("removeStream","removeTrack"),this.getSenders().forEach(t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)})})}function oe(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function se(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach(n=>t.call(this,n,e)),e.getVideoTracks().forEach(n=>t.call(this,n,e))},e.RTCPeerConnection.prototype.addTrack=function(e,n){return n&&(this._localStreams?this._localStreams.includes(n)||this._localStreams.push(n):this._localStreams=[n]),t.call(this,e,n)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const n=e.getTracks();this.getSenders().forEach(e=>{n.includes(e.track)&&this.removeTrack(e)})})}}function ae(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=(e=>{e.streams.forEach(e=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(e))return;this._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,this.dispatchEvent(t)})}))}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach(t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const n=new Event("addstream");n.stream=t,e.dispatchEvent(n)})}),t.apply(e,arguments)}}}function ce(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(e,t){const r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),Promise.resolve()):i},t.createAnswer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),Promise.resolve()):i};let a=function(e,t,n){const r=i.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r};t.setLocalDescription=a,a=function(e,t,n){const r=o.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setRemoteDescription=a,a=function(e,t,n){const r=s.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=a}function ue(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,n=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=(e=>n(le(e)))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function le(e){return e&&void 0!==e.video?Object.assign({},e,{video:I(e.video)}):e}function de(e){const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){const t=[];for(let n=0;n<e.iceServers.length;n++){let r=e.iceServers[n];!r.hasOwnProperty("urls")&&r.hasOwnProperty("url")?(P("RTCIceServer.url","RTCIceServer.urls"),(r=JSON.parse(JSON.stringify(r))).urls=r.url,delete r.url,t.push(r)):t.push(e.iceServers[n])}e.iceServers=t}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in e.RTCPeerConnection&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function fe(e){"object"==typeof e&&e.RTCPeerConnection&&"receiver"in e.RTCTrackEvent.prototype&&!e.RTCTransceiver&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function pe(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find(e=>"audio"===e.receiver.track.kind);!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const n=this.getTransceivers().find(e=>"video"===e.receiver.track.kind);!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video")}return t.apply(this,arguments)}}var he=n(2),me=n.n(he);function ge(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){const n=new t(e),r=me.a.parseCandidate(e.candidate),i=Object.assign(n,r);return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,T(e,"icecandidate",t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t))}function be(e){if(e.RTCSctpTransport||!e.RTCPeerConnection)return;const t=A(e);"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,function(e){if(!e||!e.sdp)return!1;const t=me.a.splitSections(e.sdp);return t.shift(),t.some(e=>{const t=me.a.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")})}(arguments[0])){const e=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const n=parseInt(t[1],10);return n!=n?-1:n}(arguments[0]),n=function(e){let n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n}(e),r=function(e,n){let r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);const i=me.a.matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r}(arguments[0],e);let i;i=0===n&&0===r?Number.POSITIVE_INFINITY:0===n||0===r?Math.max(n,r):Math.min(n,r);const o={};Object.defineProperty(o,"maxMessageSize",{get:()=>i}),this._sctp=o}return n.apply(this,arguments)}}function ye(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const n=e.send;e.send=function(){const r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=n.apply(this,arguments);return t(e,this),e},T(e,"datachannel",e=>(t(e.channel,e.target),e))}function ve(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(e=>{const n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=(e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e}),this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}function we(e){if(!e.RTCPeerConnection)return;const t=A(e);if("chrome"===t.browser&&t.version>=71)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(e){return e&&e.sdp&&-1!==e.sdp.indexOf("\na=extmap-allow-mixed")&&(e.sdp=e.sdp.split("\n").filter(e=>"a=extmap-allow-mixed"!==e.trim()).join("\n")),n.apply(this,arguments)}}var Se=function({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const n=R,c=A(e),u={browserDetails:c,commonShim:a,extractVersion:C,disableLog:k,disableWarnings:E};switch(c.browser){case"chrome":if(!r||!W||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),u;n("adapter.js shimming chrome."),u.browserShim=r,D(e),L(e),W(e),F(e),V(e),U(e),q(e),B(e),G(e),ge(e),ve(e),be(e),ye(e),we(e);break;case"firefox":if(!o||!te||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),u;n("adapter.js shimming firefox."),u.browserShim=o,X(e),te(e),ee(e),ie(e),ne(e),re(e),oe(e),ge(e),ve(e),be(e),ye(e);break;case"edge":if(!i||!Y||!t.shimEdge)return n("MS edge shim is not included in this adapter release."),u;n("adapter.js shimming edge."),u.browserShim=i,Q(e),K(e),Y(e),J(e),be(e),ye(e);break;case"safari":if(!s||!t.shimSafari)return n("Safari shim is not included in this adapter release."),u;n("adapter.js shimming safari."),u.browserShim=s,de(e),pe(e),ce(e),se(e),ae(e),fe(e),ue(e),ge(e),be(e),ye(e),we(e);break;default:n("Unsupported browser!")}return u}({window:window}),xe=n(17),_e=n(19),Ce=n(4),Te=n(38),ke=n(0),Ee=n.n(ke);var Re=n(8),Pe=n.n(Re),Ae=Ee.a.createContext(null);var je=function(e){e()},Ie=function(){return je},Oe=null,Me={notify:function(){}};var De=function(){function e(e,t){this.store=e,this.parentSub=t,this.unsubscribe=null,this.listeners=Me,this.handleChangeWrapper=this.handleChangeWrapper.bind(this)}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.handleChangeWrapper=function(){this.onStateChange&&this.onStateChange()},t.isSubscribed=function(){return Boolean(this.unsubscribe)},t.trySubscribe=function(){var e,t,n;this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.handleChangeWrapper):this.store.subscribe(this.handleChangeWrapper),this.listeners=(e=Ie(),t=[],n=[],{clear:function(){n=Oe,t=Oe},notify:function(){var r=t=n;e(function(){for(var e=0;e<r.length;e++)r[e]()})},get:function(){return n},subscribe:function(e){var r=!0;return n===t&&(n=t.slice()),n.push(e),function(){r&&t!==Oe&&(r=!1,n===t&&(n=t.slice()),n.splice(n.indexOf(e),1))}}}))},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=Me)},e}(),Ne=function(e){var t,n;function r(t){var n;n=e.call(this,t)||this;var r=t.store;n.notifySubscribers=n.notifySubscribers.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n));var i=new De(r);return i.onStateChange=n.notifySubscribers,n.state={store:r,subscription:i},n.previousState=r.getState(),n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.componentDidMount=function(){this._isMounted=!0,this.state.subscription.trySubscribe(),this.previousState!==this.props.store.getState()&&this.state.subscription.notifyNestedSubs()},i.componentWillUnmount=function(){this.unsubscribe&&this.unsubscribe(),this.state.subscription.tryUnsubscribe(),this._isMounted=!1},i.componentDidUpdate=function(e){if(this.props.store!==e.store){this.state.subscription.tryUnsubscribe();var t=new De(this.props.store);t.onStateChange=this.notifySubscribers,this.setState({store:this.props.store,subscription:t})}},i.notifySubscribers=function(){this.state.subscription.notifyNestedSubs()},i.render=function(){var e=this.props.context||Ae;return Ee.a.createElement(e.Provider,{value:this.state},this.props.children)},r}(ke.Component);Ne.propTypes={store:Pe.a.shape({subscribe:Pe.a.func.isRequired,dispatch:Pe.a.func.isRequired,getState:Pe.a.func.isRequired}),context:Pe.a.object,children:Pe.a.any};function Le(){return(Le=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Fe(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var Ue=n(18),qe=n.n(Ue),Be=n(5),ze=n.n(Be),Ve=n(15),We=[],Ge=[null,null];function $e(e,t){var n=e[1];return[t.payload,n+1]}var He=function(){return[null,0]},Qe="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?ke.useLayoutEffect:ke.useEffect;function Ke(e,t){void 0===t&&(t={});var n=t,r=n.getDisplayName,i=void 0===r?function(e){return"ConnectAdvanced("+e+")"}:r,o=n.methodName,s=void 0===o?"connectAdvanced":o,a=n.renderCountProp,c=void 0===a?void 0:a,u=n.shouldHandleStateChanges,l=void 0===u||u,d=n.storeKey,f=void 0===d?"store":d,p=n.withRef,h=void 0!==p&&p,m=n.forwardRef,g=void 0!==m&&m,b=n.context,y=void 0===b?Ae:b,v=Fe(n,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"]);ze()(void 0===c,"renderCountProp is removed. render counting is built into the latest React Dev Tools profiling extension"),ze()(!h,"withRef is removed. To access the wrapped instance, use a ref on the connected component");ze()("store"===f,"storeKey has been removed and does not do anything. To use a custom Redux store for specific components, create a custom React context with React.createContext(), and pass the context object to React Redux's Provider and specific components like: <Provider context={MyContext}><ConnectedComponent context={MyContext} /></Provider>. You may also pass a {context : MyContext} option to connect");var w=y;return function(t){var n=t.displayName||t.name||"Component",r=i(n),o=Le({},v,{getDisplayName:i,methodName:s,renderCountProp:c,shouldHandleStateChanges:l,storeKey:f,displayName:r,wrappedComponentName:n,WrappedComponent:t}),a=v.pure;var u=a?ke.useMemo:function(e){return e()};function d(n){var i=Object(ke.useMemo)(function(){var e=n.forwardedRef,t=Fe(n,["forwardedRef"]);return[n.context,e,t]},[n]),s=i[0],a=i[1],c=i[2],d=Object(ke.useMemo)(function(){return s&&s.Consumer&&Object(Ve.isContextConsumer)(Ee.a.createElement(s.Consumer,null))?s:w},[s,w]),f=Object(ke.useContext)(d),p=Boolean(n.store),h=Boolean(f)&&Boolean(f.store);ze()(p||h,'Could not find "store" in the context of "'+r+'". Either wrap the root component in a <Provider>, or pass a custom React context provider to <Provider> and the corresponding React context consumer to '+r+" in connect options.");var m=n.store||f.store,g=Object(ke.useMemo)(function(){return function(t){return e(t.dispatch,o)}(m)},[m]),b=Object(ke.useMemo)(function(){if(!l)return Ge;var e=new De(m,p?null:f.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]},[m,p,f]),y=b[0],v=b[1],S=Object(ke.useMemo)(function(){return p?f:Le({},f,{subscription:y})},[p,f,y]),x=Object(ke.useReducer)($e,We,He),_=x[0][0],C=x[1];if(_&&_.error)throw _.error;var T=Object(ke.useRef)(),k=Object(ke.useRef)(c),E=Object(ke.useRef)(),R=Object(ke.useRef)(!1),P=u(function(){return E.current&&c===k.current?E.current:g(m.getState(),c)},[m,_,c]);Qe(function(){k.current=c,T.current=P,R.current=!1,E.current&&(E.current=null,v())}),Qe(function(){if(l){var e=!1,t=null,n=function(){if(!e){var n,r,i=m.getState();try{n=g(i,k.current)}catch(e){r=e,t=e}r||(t=null),n===T.current?R.current||v():(T.current=n,E.current=n,R.current=!0,C({type:"STORE_UPDATED",payload:{latestStoreState:i,error:r}}))}};y.onStateChange=n,y.trySubscribe(),n();return function(){if(e=!0,y.tryUnsubscribe(),t)throw t}}},[m,y,g]);var A=Object(ke.useMemo)(function(){return Ee.a.createElement(t,Le({},P,{ref:a}))},[a,t,P]);return Object(ke.useMemo)(function(){return l?Ee.a.createElement(d.Provider,{value:S},A):A},[d,A,S])}var p=a?Ee.a.memo(d):d;if(p.WrappedComponent=t,p.displayName=r,g){var h=Ee.a.forwardRef(function(e,t){return Ee.a.createElement(p,Le({},e,{forwardedRef:t}))});return h.displayName=r,h.WrappedComponent=t,qe()(h,t)}return qe()(p,t)}}var Ye=Object.prototype.hasOwnProperty;function Je(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function Xe(e,t){if(Je(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Ye.call(t,n[i])||!Je(e[n[i]],t[n[i]]))return!1;return!0}function Ze(e){return function(t,n){var r=e(t,n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function et(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function tt(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=et(e);var i=r(t,n);return"function"==typeof i&&(r.mapToProps=i,r.dependsOnOwnProps=et(i),i=r(t,n)),i},r}}var nt=[function(e){return"function"==typeof e?tt(e):void 0},function(e){return e?void 0:Ze(function(e){return{dispatch:e}})},function(e){return e&&"object"==typeof e?Ze(function(t){return function(e,t){if("function"==typeof e)return m(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(e),r={},i=0;i<n.length;i++){var o=n[i],s=e[o];"function"==typeof s&&(r[o]=m(s,t))}return r}(e,t)}):void 0}];var rt=[function(e){return"function"==typeof e?tt(e):void 0},function(e){return e?void 0:Ze(function(){return{}})}];function it(e,t,n){return Le({},n,e,t)}var ot=[function(e){return"function"==typeof e?function(e){return function(t,n){n.displayName;var r,i=n.pure,o=n.areMergedPropsEqual,s=!1;return function(t,n,a){var c=e(t,n,a);return s?i&&o(c,r)||(r=c):(s=!0,r=c),r}}}(e):void 0},function(e){return e?void 0:function(){return it}}];function st(e,t,n,r){return function(i,o){return n(e(i,o),t(r,o),o)}}function at(e,t,n,r,i){var o,s,a,c,u,l=i.areStatesEqual,d=i.areOwnPropsEqual,f=i.areStatePropsEqual,p=!1;function h(i,p){var h,m,g=!d(p,s),b=!l(i,o);return o=i,s=p,g&&b?(a=e(o,s),t.dependsOnOwnProps&&(c=t(r,s)),u=n(a,c,s)):g?(e.dependsOnOwnProps&&(a=e(o,s)),t.dependsOnOwnProps&&(c=t(r,s)),u=n(a,c,s)):b?(h=e(o,s),m=!f(h,a),a=h,m&&(u=n(a,c,s)),u):u}return function(i,l){return p?h(i,l):(a=e(o=i,s=l),c=t(r,s),u=n(a,c,s),p=!0,u)}}function ct(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,o=Fe(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),s=n(e,o),a=r(e,o),c=i(e,o);return(o.pure?at:st)(s,a,c,e,o)}function ut(e,t,n){for(var r=t.length-1;r>=0;r--){var i=t[r](e);if(i)return i}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function lt(e,t){return e===t}var dt,ft,pt,ht,mt,gt,bt,yt,vt,wt,St,xt,_t=(pt=(ft=void 0===dt?{}:dt).connectHOC,ht=void 0===pt?Ke:pt,mt=ft.mapStateToPropsFactories,gt=void 0===mt?rt:mt,bt=ft.mapDispatchToPropsFactories,yt=void 0===bt?nt:bt,vt=ft.mergePropsFactories,wt=void 0===vt?ot:vt,St=ft.selectorFactory,xt=void 0===St?ct:St,function(e,t,n,r){void 0===r&&(r={});var i=r,o=i.pure,s=void 0===o||o,a=i.areStatesEqual,c=void 0===a?lt:a,u=i.areOwnPropsEqual,l=void 0===u?Xe:u,d=i.areStatePropsEqual,f=void 0===d?Xe:d,p=i.areMergedPropsEqual,h=void 0===p?Xe:p,m=Fe(i,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),g=ut(e,gt,"mapStateToProps"),b=ut(t,yt,"mapDispatchToProps"),y=ut(n,wt,"mergeProps");return ht(xt,Le({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:g,initMapDispatchToProps:b,initMergeProps:y,pure:s,areStatesEqual:c,areOwnPropsEqual:l,areStatePropsEqual:f,areMergedPropsEqual:h},m))});"undefined"!=typeof window?ke.useLayoutEffect:ke.useEffect;var Ct,Tt=n(12),kt=n.n(Tt);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function Et(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}c((r=r.apply(e,t||[])).next())})}Ct=Tt.unstable_batchedUpdates,je=Ct;const Rt="@andyet/SET_USER_PREFERENCE",Pt="@andyet/JOIN_ROOM",At="@andyet/LEAVE_ROOM",jt="@andyet/LOCK_ROOM",It="@andyet/UNLOCK_ROOM",Ot="@andyet/DESTROY_ROOM",Mt="@andyet/SELF_UPDATED",Dt="@andyet/JOIN_ROOM_FAILED",Nt="@andyet/JOIN_ROOM_SUCCESS",Lt="@andyet/ROOM_LOCKED",Ft="@andyet/ROOM_UNLOCKED",Ut="@andyet/KICK_PEER",qt="@andyet/PEER_ONLINE",Bt="@andyet/PEER_OFFLINE",zt="@andyet/PEER_UPDATED",Vt="@andyet/CHAT_INCOMING",Wt="@andyet/CHAT_OUTGOING",Gt="@andyet/CHAT_STATE_OUTGOING",$t="@andyet/RTT_OUTGOING",Ht="@andyet/ADD_MEDIA",Qt="@andyet/REMOVE_MEDIA",Kt="@andyet/MEDIA_UPDATED",Yt="@andyet/SIGNALING_CLIENT",Jt="@andyet/SIGNALING_CLIENT_SHUTDOWN",Xt="@andyet/CONNECTION_STATE_CHANGE",Zt="@andyet/RECEIVED_CONFIG",en="@andyet/RECEIVED_CONFIG_ERROR",tn="@andyet/QUEUE_TELEMETRY",nn="@andyet/TELEMETRY_SUCCESS",rn="@andyet/JOIN_CALL",on="@andyet/LEAVE_CALL",sn="@andyt/SET_CALL_PREFERENCE",an="@andyet/PEER_CONNECTION_UPDATED",cn="@andyet/PEER_CONNECTION_ADDED",un="@andyet/PEER_CONNECTION_REMOVED",ln="@andyet/DEVICES",dn="@andyet/CAMERA_PERMISSION_DENIED",fn="@andyet/MICROPHONE_PERMISSION_DENIED",pn="@andyet/DEVICE_CAPTURE",hn="@andyet/SET_VIDEO_RESOLUTION_TIERS",mn="1.14.4",gn="incoming",bn="outgoing";function yn(e){return e.simplewebrtc.api.config}function vn(e){return e.simplewebrtc.api.token}function wn(e){return e.simplewebrtc.user}function Sn(e){return yn(e).customerData}function xn(e){return e.simplewebrtc.api.configUrl}function _n(e){return e.simplewebrtc.api.signalingClient}function Cn(e){return e.simplewebrtc.api.queuedTelemetry}function Tn(e){return e.simplewebrtc.api.connectionState}function kn(e){return e.simplewebrtc.user.displayName}function En(e,t){const n=yn(e),r=jn(e,t),i=Nn(e,t),o=zn(e,"audio").filter(e=>e.lastSpokeAt).sort((e,t)=>{return(e.lastSpokeAt?e.lastSpokeAt.valueOf():0)-(t.lastSpokeAt?t.lastSpokeAt.valueOf():0)});return{address:r.selfAddress,affiliation:r.selfAffiliation,chatState:"active",customerData:yn(e).customerData,displayName:kn(e),id:n.id,joinedCall:i.joined,joinedCallAt:i.joinedAt,joinedRoomAt:r.joinedAt,lastSpokeAt:o.length?o[0].lastSpokeAt:void 0,muted:!1,requestingAttention:!1,requestingMedia:Rn(e,t),role:r.selfRole,roomAddress:t,rtt:"",speaking:Zn(e,!0),volume:0,volumeLimit:.8}}function Rn(e,t){const n=e.simplewebrtc.user.requestingMedia;if(t){const r=Nn(e,t);if(r)return r.requestingMedia||n}return n}function Pn(e,t){return e.simplewebrtc.peers[t]}function An(e){return e.simplewebrtc.rooms}function jn(e,t){return e.simplewebrtc.rooms[t]}function In(e,t){for(const n of Object.keys(e.simplewebrtc.rooms))if(e.simplewebrtc.rooms[n].providedName===t)return e.simplewebrtc.rooms[n]}function On(e,t){const n=[];for(const r of Object.keys(e.simplewebrtc.peers))e.simplewebrtc.peers[r].roomAddress===t&&n.push(e.simplewebrtc.peers[r]);return n}function Mn(e,t){const n=[];for(const r of Object.keys(e.simplewebrtc.chats)){const i=e.simplewebrtc.chats[r];i.roomAddress===t&&n.push(i)}return n.sort((e,t)=>e.time<t.time?-1:e.time>t.time?1:0)}function Dn(e,t,n=300){const r=[],i=Mn(e,t);let o;for(const s of i){const i=!o||s.senderAddress!==o.senderAddress,a=o?o.chats[o.chats.length-1]:void 0,c=!o||a&&s.displayName&&s.displayName!==a.displayName;let u=!1;if(n&&(u=!o||Number(s.time)>Number(o.chats[0].time)+1e3*n),i||c||u){let n=Pn(e,s.senderAddress)||{};"outgoing"===s.direction&&(n=En(e,t)),o={chats:[s],direction:s.direction,displayName:n.displayName||s.displayName,endTime:s.time,peer:n,senderAddress:s.senderAddress,startTime:s.time},r.push(o)}else o&&(o.chats.push(s),o.endTime=s.time)}return r}function Nn(e,t){return e.simplewebrtc.calls[t]}function Ln(e){return e.simplewebrtc.media}function Fn(e,t){return e.simplewebrtc.media[t]}function Un(e,t){const n=e.simplewebrtc.devices.devices;return t?n.filter(e=>e.kind===t):n}function qn(e){const t=e.simplewebrtc.devices;return{cameraPermissionDenied:t.cameraPermissionDenied,cameraPermissionGranted:t.cameraPermissionGranted,hasAudioOutput:t.hasAudioOutput,hasCamera:t.hasCamera,hasMicrophone:t.hasMicrophone,microphonePermissionDenied:t.microphonePermissionDenied,microphonePermissionGranted:t.microphonePermissionGranted,requestingCameraCapture:t.requestingCameraCapture,requestingCapture:t.requestingCapture,requestingMicrophoneCapture:t.requestingMicrophoneCapture}}function Bn(e,t,n){const r=[];for(const i of Object.keys(e.simplewebrtc.media)){const o=e.simplewebrtc.media[i];o.owner===t&&(n&&n!==o.kind||r.push(o))}return r}function zn(e,t){const n=[];for(const r of Object.keys(e.simplewebrtc.media)){const i=e.simplewebrtc.media[r];"local"===i.source&&(t&&t!==i.kind||n.push(i))}return n.sort((e,t)=>e.createdAt-t.createdAt)}function Vn(e,t){const n=[];for(const r of Object.keys(e.simplewebrtc.media)){const i=e.simplewebrtc.media[r];"remote"===i.source&&(t&&t!==i.kind||n.push(i))}return n}function Wn(e,t){const n=[];for(const r of Object.keys(e.simplewebrtc.media)){const i=e.simplewebrtc.media[r];"local"===i.source&&i.shared&&(t&&t!==i.kind||n.push(i))}return n}function Gn(e){return e.simplewebrtc.user.audioOutputDeviceId}function $n(e){return e.simplewebrtc.user.globalVolumeLimit}function Hn(e){const t=[];for(const n of Object.keys(e.simplewebrtc.calls)){const r=e.simplewebrtc.calls[n],i=jn(e,r.roomAddress);r.joined&&i&&i.joined&&t.push(r)}return t}function Qn(e,t){const n=[];for(const r of Object.keys(e.simplewebrtc.peers)){const i=e.simplewebrtc.peers[r];i.roomAddress===t&&i.joinedCall&&n.push(i)}return n}function Kn(e){return e.simplewebrtc.connections}function Yn(e,t){const n=[],r=Kn(e);for(const e of Object.keys(r)){const i=r[e];i.peerAddress===t&&n.push(i)}return n}function Jn(e){let t=0;for(const n of Object.keys(e.simplewebrtc.peers)){"video"===e.simplewebrtc.peers[n].requestingMedia&&(t+=1)}return t}function Xn(e){return!!("RTCPeerConnection"in window)&&!!("mediaDevices"in navigator)}function Zn(e,t=!0){return zn(e,"audio").filter(e=>!e.localDisabled&&!e.externalDisabled&&e.speaking&&(!t||e.shared)).length>0}function er(e,t=!0){return zn(e,"audio").filter(e=>(e.localDisabled||e.externalDisabled)&&e.speaking&&(!t||e.shared)).length>0}function tr(e){return e.simplewebrtc.api.videoResolutionTiers||[]}var nr=Object.freeze({getAPIConfig:yn,getUserToken:vn,getUser:wn,getUserCustomerData:Sn,getConfigURL:xn,getClient:_n,getQueuedTelemetry:Cn,getConnectionState:Tn,getUserDisplayName:kn,getUserDataForRoom:En,getDesiredMediaTypes:Rn,getPushToTalkEnabled:function(e){return e.simplewebrtc.user.pushToTalk},getPeerByAddress:Pn,getRooms:An,getRoomByAddress:jn,getRoomByProvidedName:In,getPeersForRoom:On,getChatsForRoom:Mn,getGroupedChatsForRoom:Dn,getLastSentChat:function(e,t){return Mn(e,t).filter(e=>e.direction===bn).slice(-1)[0]},getChatComposers:function(e,t){const n=[];for(const r of Object.keys(e.simplewebrtc.peers)){const i=e.simplewebrtc.peers[r];i.roomAddress===t&&"composing"===i.chatState&&n.push(i)}return n},getCallForRoom:Nn,getMedia:Ln,getMediaTrack:Fn,getDeviceForMediaTrack:function(e,t){const n=Fn(e,t);if(!n)return;let r;const i=n.track.label,o=`${n.kind}input`;n.track.getSettings&&(r=n.track.getSettings().deviceId);const s=e.simplewebrtc.devices.devices;if(r)for(const e of s)if(e.deviceId===r)return e;for(const e of s)if(i===e.label&&o===e.kind)return e},getDevices:Un,getDevicePermissions:qn,getMediaForPeer:Bn,getLocalMedia:zn,getRemoteMedia:Vn,getSharedMedia:Wn,getAudioOutputDevice:Gn,getGlobalVolumeLimit:$n,getJoinedCalls:Hn,getPeersForCall:Qn,getActiveSpeakersForCall:function(e,t){const n=[];for(const r of Object.keys(e.simplewebrtc.peers)){const i=e.simplewebrtc.peers[r];i.roomAddress===t&&i.joinedCall&&i.speaking&&n.push(i)}return n},getConnections:Kn,getConnectionsForPeer:Yn,countPeersWantingVideo:Jn,isSupportedBrowser:Xn,userIsSpeaking:Zn,userIsSpeakingWhileMuted:er,getVideoResolutionTiers:tr});function rr(e){let t=e.host;t.indexOf(":")>=0&&(t=`[${t}]`);let n=`${e.type}:${t}`;return e.port&&(n+=`:${e.port}`),e.transport&&(n+=`?transport=${e.transport}`),"turn"===e.type||"turns"===e.type?{credential:e.password,urls:[n],username:e.username}:{urls:[n]}}class ir{constructor(e){this.jingle=e.jingle,this.dispatch=e.dispatch,this.getState=e.getState,this.updateICEServers(),this.jingle.config.peerConnectionConfig.sdpSemantics="plan-b"}updateICEServers(){this.jingle.resetICEServers();const e=yn(this.getState());for(const t of e.iceServers)this.jingle.addICEServer(rr(t))}updateConnections(){if(!RTCPeerConnection)return;const e=this.getState(),t=Jn(e),n=Hn(e),r=Ln(e),i=Wn(e),o=i.filter(e=>"video"===e.kind).length,s=new Set;for(const e of n)e.joined&&s.add(e.roomAddress);const a=tr(e);let c=a[0];for(let e=0;e<a.length;e++){const n=a[e],r=a[e+1];if(n[0]===t||!r){c=n;break}if(r[0]>t){c=n;break}}if(c){const{width:e,height:t,frameRate:n}=c[1];this.dispatch(Lr(e,t,n))}const u=18e5/(t*o),l=Kn(e);for(const e of Object.keys(l)){const t=l[e],n=this.jingle.sessions[t.id];n&&!s.has(t.roomAddress)&&n.end()}for(const t of n){const n=Qn(e,t.roomAddress);for(const t of n){const n=new Set,o=new Set,s="video"===t.requestingMedia,a="video"===t.requestingMedia||"audio"===t.requestingMedia,c=new Map,l=new Set,d=Yn(e,t.address);for(const e of d)if(e.sendingAudioMediaId&&(c.set(e.sendingAudioMediaId,"audio"),a&&r[e.sendingAudioMediaId]&&r[e.sendingAudioMediaId].shared||(l.add(e.id),e.sendingVideoMediaId&&s&&n.add(e.sendingVideoMediaId))),e.sendingVideoMediaId){const t=this.jingle.sessions[e.id];t&&t.setMaximumBitrate(u),c.set(e.sendingVideoMediaId,"video");const n=r[e.sendingVideoMediaId];(s||n.screenCapture)&&n&&n.shared||(l.add(e.id),e.sendingAudioMediaId&&a&&o.add(e.sendingAudioMediaId))}for(const e of i)c.has(e.id)||("audio"===e.kind&&a&&o.add(e.id),"video"===e.kind&&s&&n.add(e.id),"video"===e.kind&&e.screenCapture&&a&&n.add(e.id));for(const e of l){const t=this.jingle.sessions[e];t&&t.end()}const f=new Map;for(const e of[...o,...n]){const t=r[e];if(t){const e=f.get(t.stream.id)||{};e[t.kind]=t,f.set(t.stream.id,e)}}for(const e of f.values()){const n=this.jingle.createMediaSession(t.address);e.audio&&(n.addTrack(e.audio.track,e.audio.stream),this.dispatch(ti(t.address,n.sid,{sendingAudioMediaId:e.audio.id}))),e.video&&(n.addTrack(e.video.track,e.video.stream),this.dispatch(ti(t.address,n.sid,{sendingVideoMediaId:e.video.id}))),n.start({offerToReceiveAudio:!1,offerToReceiveVideo:!1},()=>{e.video&&n.setMaximumBitrate(u),e.audio&&e.audio.localDisabled&&n.mute(n.role,"audio"),e.video&&e.video.localDisabled&&n.mute(n.role,"video"),e.video&&e.video.screenCapture&&n.send("description-info",{contents:[{application:{applicationType:"rtp",screenCaptures:[{id:e.video.id}]},name:"video"}]})})}}}}plugin(){return()=>{this.jingle.on("incoming",e=>{const t=Nn(this.getState(),e.peerID.split("/")[0]);t&&t.joined?e.accept():e.end(),e.onDescriptionInfo=((t,n)=>{const r=Kn(this.getState());for(const n of t.contents||[])n.application&&n.application.screenCaptures&&n.application.screenCaptures.length&&this.dispatch(Ir(r[e.sid].receivingVideoMediaId,{screenCapture:!0}));n()})}),this.jingle.on("terminated",(e,t)=>{this.dispatch(ei(e.peerID,e.sid)),t.condition&&"success"!==t.condition&&"gone"!==t.condition&&(console.error("Session terminated with error:",e.sid,t),this.dispatch(Ri(e.peerID,{sessionFailed:!0}))),setTimeout(()=>{this.updateConnections()},1e3)}),this.jingle.on("createdSession",e=>{this.dispatch(Zr(e.peerID,e.sid)),e.on("peerTrackAdded",(t,n,r)=>{const i=`${e.sid}#${n.id}`;this.dispatch(Ar(e.peerID.split("/")[0],e.peerID,i,n,r,!1)),"audio"===n.kind&&this.dispatch(ti(e.peerID,e.sid,{receivingAudioMediaId:i})),"video"===n.kind&&this.dispatch(ti(e.peerID,e.sid,{receivingVideoMediaId:i}))}),e.on("peerTrackRemoved",(t,n)=>{const r=`${e.sid}#${n.id}`;this.dispatch(jr(r))}),e.on("connectionState",()=>{this.dispatch(ti(e.peerID,e.sid,{connectionState:e.connectionState,restarting:e.restartingIce,sessionState:e.state})),"connected"===e.connectionState&&this.dispatch(Ri(e.peerID,{sessionFailed:!1})),("responder"===e.role&&"disconnected"===e.connectionState||"interrupted"===e.connectionState)&&setTimeout(()=>{"disconnected"!==e.connectionState&&"interrupted"!==e.connectionState||e.end("failed-transport")},5e3)}),e.on("sessionState",()=>{this.dispatch(ti(e.peerID,e.sid,{connectionState:e.connectionState,restarting:e.restartingIce,sessionState:e.state}))})}),this.jingle.on("mute",(e,t)=>{const n=Kn(this.getState());if("audio"===t.name)this.dispatch(Ir(n[e.sid].receivingAudioMediaId,{remoteDisabled:!0}));else{if("video"!==t.name)throw new Error("Invalid mute property");this.dispatch(Ir(n[e.sid].receivingVideoMediaId,{remoteDisabled:!0}))}}),this.jingle.on("unmute",(e,t)=>{const n=Kn(this.getState());if("audio"===t.name)this.dispatch(Ir(n[e.sid].receivingAudioMediaId,{remoteDisabled:!1}));else{if("video"!==t.name)throw new Error("Invalid mute property");this.dispatch(Ir(n[e.sid].receivingVideoMediaId,{remoteDisabled:!1}))}})}}notifyPeers(e,t){const n=this.getState(),r=Kn(n);Object.values(_n(n).jingle.sessions).forEach(n=>{const i=r[n.sid];!i||i.sendingAudioMediaId!==e.id&&i.sendingVideoMediaId!==e.id||n[t](n.role,e.kind)})}}const or="http://andyet.net/xmlns/mmuc",sr="https://talky.io/ns/core",ar="https://talky.io/ns/datachannel";function cr(e,t){const n=t.utils,r=t.define({element:"user",fields:{customerData:{get(){const e=n.getText(this.xml);return e?JSON.parse(e):{}}},roomId:n.attribute("rid"),sessionId:n.attribute("sid"),type:n.attribute("type")},name:"talkyUserInfo",namespace:sr}),i=t.define({element:"mediastream",fields:{audio:n.attribute("audio"),msid:n.attribute("msid"),video:n.attribute("video")},name:"_mediaStream",namespace:or}),o=t.define({element:"screen",fields:{id:n.attribute("id")},name:"_screenCapture",namespace:sr}),s=t.define({element:"description",fields:{applicationType:{value:"datachannel"}},name:"_datachannel",namespace:ar,tags:["jingle-application"]}),a=t.define({element:"conf",fields:{bridged:n.boolAttribute("bridged"),lastN:n.numberAttribute("last-n"),media:n.attribute("media")},name:"mmuc",namespace:or}),c=t.define({element:"status",fields:{active:n.boolAttribute("active"),media:n.attribute("media"),mode:n.attribute("mode"),ready:n.boolAttribute("ready"),recordable:n.boolAttribute("recordable"),stamp:n.dateAttribute("stamp")},name:"mmucStatus",namespace:or}),u=t.define({element:"recording",fields:{active:n.boolAttribute("active"),stamp:n.dateAttribute("stamp"),state:n.attribute("state"),uri:n.attribute("uri")},name:"recording",namespace:or}),l=t.define({element:"state",fields:{speaking:n.boolAttribute("speaking")},name:"mmuc",namespace:or}),d=t.define({element:"query",fields:{endMedia:n.boolSub(or,"end-media"),startRecord:n.boolSub(or,"start-recording")},name:"mmuc",namespace:or}),f=t.define({element:"start-media",fields:{media:n.attribute("media")},name:"startMedia",namespace:or}),p=t.define({element:"end-recording",fields:{uri:n.attribute("uri")},name:"endRecord",namespace:or});t.extend(c,u),t.extend(d,f),t.extend(d,p),t.withPresence(e=>{t.extend(e,a),t.extend(e,i,"mediaStreams"),t.extend(e,r)}),t.withMessage(e=>{t.extend(e,c),t.extend(e,l)}),t.withIQ(e=>{t.extend(e,d)}),t.withDefinition("content","urn:xmpp:jingle:1",e=>{t.extend(e,s)}),t.withDefinition("description","urn:xmpp:jingle:apps:rtp:1",e=>{t.extend(e,o,"screenCaptures")}),t.withDefinition("jingle","urn:xmpp:jingle:1",e=>{t.extend(e,i,"mediaStreams")})}class ur{constructor(e,t,n){this.logToConsole=localStorage.logxmpp||!1,this.terminating=!1,this.dispatch=e,this.getState=t,this.rttBuffers=new Map,this.xmpp=Object(_e.a)(Object.assign({transport:"websocket"},n)),this.xmpp.useStreamManagement=!1,this.xmpp.sm.allowResume=!1,this.jingle=this.xmpp.jingle,this.xmpp.use(cr),this.mesh=new ir(this),this.xmpp.use(this.mesh.plugin()),this.xmpp.on("raw:*",(e,t)=>{this.logToConsole&&console.log(e,t)}),this.xmpp.on("session:started",()=>{this.xmpp.sendPresence(),this.xmpp.enableKeepAlive({interval:90}),this.dispatch(wr("connected"))}),this.xmpp.on("disconnected",()=>{this.terminating||(this.dispatch(wr("disconnected")),setTimeout(()=>{const e=this.getState(),t=xn(e),n=vn(e);this.dispatch(pr(t,n))},1e3+2e3*Math.random()))}),this.xmpp.on("muc:join",e=>Et(this,void 0,void 0,function*(){const t=e.from.bare,n=this.getState();let r=jn(n,t);r&&(yield this.checkLockStatus(t,r.providedPassword),this.dispatch(pi(t,e.from.full,e.talkyUserInfo.roomId,e.muc.role,e.muc.affiliation)),(r=jn(n,t))&&r.autoJoinCall&&this.dispatch($r(t,Rn(n,t))))})),this.xmpp.on("muc:failed",e=>{const t=e.from.bare,n=jn(this.getState(),t);n&&n.providedPassword&&!n.passwordRequired?this.joinRoom(t,void 0,n.autoJoinCall):this.dispatch(fi(t,"not-authorized"===e.error.condition))}),this.xmpp.on("muc:error",e=>{this.dispatch(fi(e.from.bare,"not-authorized"===e.error.condition))}),this.xmpp.on("muc:available",e=>{const t=e.from.bare,n=e.from.full,r=jn(this.getState(),t);if(!r)return;if(e.muc.codes&&e.muc.codes.indexOf("110")>=0)return void this.dispatch(hi(t,n,r.id,e.muc.role,e.muc.affiliation));if(!this.rttBuffers.has(n)){const e=new xe.DisplayBuffer(({text:e})=>{this.dispatch(Ri(n,{rtt:e}))});this.rttBuffers.set(n,e)}const i=e.talkyUserInfo.customerData||{};this.dispatch(ki(t,n,{affiliation:e.muc.affiliation,customerData:i,displayName:i.displayName||e.nick,id:e.talkyUserInfo.sessionId,joinedCall:!!e.mmuc,requestingMedia:(e.mmuc||{}).media,role:e.muc.role}))}),this.xmpp.on("muc:unavailable",e=>{e.muc.codes&&e.muc.codes.indexOf("110")>=0?this.dispatch(mi(e.from.bare)):(this.rttBuffers.delete(e.from.full),this.dispatch(Ei(e.from.bare,e.from.full)))}),this.xmpp.on("muc:destroyed",e=>{this.dispatch(mi(e.from.bare))}),this.xmpp.on("chat:state",e=>{this.dispatch(Ri(e.from.full,{chatState:e.chatState}))}),this.xmpp.on("attention",e=>{this.dispatch(Ri(e.from.full,{requestingAttention:!0})),setTimeout(()=>{this.dispatch(Ri(e.from.full,{requestingAttention:!1}))},5e3)}),this.xmpp.on("message",e=>{if("groupchat"===e.type){if(e.rtt){const t=this.rttBuffers.get(e.from.full);t&&t.process(e.rtt)}if(e.body){const t=this.rttBuffers.get(e.from.full);t&&t.commit(),this.dispatch(Jr(e.from.bare,e.from.full,{body:e.body,displayName:e.nick,id:e.id,replace:e.replace,time:e.delay?e.delay.stamp:new Date}))}}}),this.xmpp.on("message",e=>this.processMessage(e))}connect(){this.xmpp.connect()}disconnect(){this.terminating=!0,this.dispatch(wr("disconnected")),this.xmpp.disconnect()}joinRoom(e,t,n){const r=this.getState(),i=yn(r),o={joinMuc:{password:t},nick:kn(r)};this.xmpp.joinRoom(e,i.id,o),!1!==n&&this.dispatch($r(e,Rn(r,e)))}destroyRoom(e){return Et(this,void 0,void 0,function*(){yield this.xmpp.destroyRoom(e)})}sendRoomPresence(e,t={}){const n=this.getState(),r=kn(n),i=jn(n,e),o=Nn(n,e),s=Rn(n,e);i&&i.joined&&this.xmpp.sendPresence(Object.assign({mmuc:o&&o.joined?{media:s}:void 0,nick:r||!0,to:e},t))}sendAllRoomsPresence(e={}){const t=this.getState(),n=Object.keys(An(t));for(const t of n)this.sendRoomPresence(t,e)}sendAllCallsSpeakingUpdate(e){const t=Hn(this.getState());for(const n of t)this.xmpp.sendMessage({mmuc:{speaking:e},to:n.roomAddress,type:"groupchat"})}lockRoom(e,t){return Et(this,void 0,void 0,function*(){const n=jn(this.getState(),e);if(n&&n.joined&&"owner"===n.selfAffiliation)try{yield this.xmpp.configureRoom(e,{fields:[{name:"FORM_TYPE",value:"http://jabber.org/protocol/muc#roomconfig"},{name:"muc#roomconfig_whois",type:"text-single",value:"moderators"},{name:"muc#roomconfig_roomsecret",type:"text-single",value:t},{name:"muc#roomconfig_passwordprotectedroom",type:"boolean",value:"1"}]}),this.dispatch(vi(e,t))}catch(e){console.error(e)}})}unlockRoom(e){return Et(this,void 0,void 0,function*(){const t=jn(this.getState(),e);if(t&&t.joined&&"owner"===t.selfAffiliation)try{yield this.xmpp.configureRoom(e,{fields:[{name:"FORM_TYPE",value:"http://jabber.org/protocol/muc#roomconfig"},{name:"muc#roomconfig_whois",type:"text-single",value:"moderators"},{name:"muc#roomconfig_roomsecret",type:"text-single",value:""},{name:"muc#roomconfig_passwordprotectedroom",type:"boolean",value:"1"}]}),this.dispatch(wi(e))}catch(e){console.error(e)}})}fetchRoomConfig(e,t=!1){return Et(this,void 0,void 0,function*(){const n={},r=jn(this.getState(),e);if(!(t||r&&r.joined))throw new Error("Room not joined");const i=(yield this.xmpp.getRoomConfig(e)).mucOwner.form;for(const e of i.fields)"muc#roomconfig_roomsecret"===e.name&&(e.value?n.password=e.value:n.password=void 0);return n})}checkLockStatus(e,t,n){return Et(this,void 0,void 0,function*(){const r=jn(this.getState(),e);if(r)if("owner"!==r.selfAffiliation||n)try{(yield this.xmpp.getDiscoInfo(e)).discoInfo.features.indexOf("muc_passwordprotected")>=0?this.dispatch(vi(e)):this.dispatch(wi(e))}catch(e){console.error(e)}else try{const n=yield this.fetchRoomConfig(e,!0);n.password?this.dispatch(vi(e,n.password)):t?this.dispatch(gi(e,t)):this.dispatch(wi(e))}catch(n){return console.error(n),this.checkLockStatus(e,t,!0)}})}processMessage(e){return Et(this,void 0,void 0,function*(){const t=e.from.bare,n=jn(this.getState(),t);"groupchat"===e.type&&e.mmuc&&n&&n.selfAddress!==e.from.full&&e.mmuc&&this.dispatch(Ri(e.from.full,{speaking:e.mmuc.speaking||!1})),e.muc&&e.muc.codes&&e.muc.codes.indexOf("104")>=0&&(yield this.checkLockStatus(t))})}}let lr;function dr(e,t=!1){return Et(this,void 0,void 0,function*(){return new Promise((n,r)=>{setTimeout(()=>t?r():n(),e)})})}function fr(e,t,n=10,r=1e3,i=1e4){return Et(this,void 0,void 0,function*(){let o,s=0;for(;s<=n;)try{const n=yield Promise.race([fetch(e,{body:JSON.stringify({clientVersion:mn,token:t}),headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"}),dr(i,!0)]);if(!n.ok)throw new Error("SimpleWebRTC configuration request failed: "+n.status);const a=yield n.json();return t&&!a.customerData&&console.error("ESWRTC_003. View more information at https://docs.simplewebrtc.com"),a}catch(e){o=e,s+=1,yield dr(r)}if(o)throw console.error("ESWRTC_001. View more information at https://docs.simplewebrtc.com"),o})}function pr(e,t){return(n,r)=>Et(this,void 0,void 0,function*(){let i;n(wr("connecting"));try{i=yield fr(e,t),n(mr(e,i,t))}catch(e){return n(gr()),void n(wr("failed"))}const o=new ur(n,r,{jid:i.userId,password:i.credential,resource:i.id,wsURL:i.signalingUrl});n({payload:o,type:Yt}),o.connect()})}function hr(){return(e,t)=>{const n=_n(t());n&&n.disconnect(),e({type:Jt})}}function mr(e,t,n){return{payload:{config:t,configUrl:e,token:n},type:Zt}}function gr(e){return{type:en}}function br(){return(e,t)=>{const n=t(),r=yn(n),i=r.telemetryUrl,o=Cn(n),s=Math.min(o.length,10);if(0===s)return;const a=o.slice(0,s);if(!i)return;const c={body:JSON.stringify({batch:a}),headers:{authorization:`Bearer ${r.credential}`},method:"POST"};fetch(i,c).then(()=>{e(yr(s))})}}function yr(e){return{payload:e,type:nn}}function vr(){clearInterval(lr)}function wr(e){return{payload:e,type:Xt}}const Sr=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),xr=window.AudioContext||window.webkitAudioContext;const _r={threshold:-65};class Cr extends Ce.EventEmitter{constructor(e,t={}){if(super(),this.running=!1,this.smoothing=.1,this.interval=50,this.history=10,this.speakingHistory=[],this.frequencyRange=[85,300],this.fftSize=512,this.speaking=!1,this.previousVolume=-1/0,this.stoppedReceivingVolume=Date.now(),xr){if(!Cr.audioContext){Cr.audioContext=new xr;const e=()=>{this.running&&Cr.audioContext&&"suspended"===Cr.audioContext.state&&(setTimeout(e,1e3),Cr.audioContext.resume())};setTimeout(e,1e3)}this.smoothing=t.smoothing||.1,this.interval=t.interval||50,this.threshold=t.threshold,this.history=t.history||10,this.frequencyRange=t.frequencyRange||[85,300],this.fftSize=t.fftSize||512,Sr&&(this.threshold=-20),this.analyser=Cr.audioContext.createAnalyser(),this.analyser.fftSize=this.fftSize,this.analyser.smoothingTimeConstant=this.smoothing,this.fftBins=new Float32Array(this.analyser.frequencyBinCount),this.frequencySpread=Cr.audioContext.sampleRate/this.analyser.fftSize,this.sourceNode=Cr.audioContext.createMediaStreamSource(e),this.sourceNode.connect(this.analyser),this.start()}}stop(){this.running=!1,this.emit("volume",-100,this.threshold||_r.threshold),this.speaking&&(this.speaking=!1,this.emit("stopped-speaking")),clearInterval(this.intervalTimer),this.analyser.disconnect(),this.sourceNode.disconnect()}start(){this.running=!0,this.speakingHistory=new Array(this.history).fill(0),this.intervalTimer=setInterval(()=>{if(!this.running)return;const e=this.threshold||_r.threshold,t=function(e,t,n,r){e.getFloatFrequencyData(r);const i=t[0],o=t[1],s=Math.round(i/n),a=Math.round(o/n),c=r.slice(s,a);return c.reduce((e,t)=>e+t,0)/c.length}(this.analyser,this.frequencyRange,this.frequencySpread,this.fftBins),n=t>e?1:0;let r;(!isFinite(t)||t<=-100)&&(r=isFinite(this.previousVolume)&&this.previousVolume>-100?Date.now():this.stoppedReceivingVolume),this.emit("volume",t,e),r!==this.stoppedReceivingVolume&&(r?this.emit("stopped-receiving-volume",r):this.emit("started-receiving-volume")),this.previousVolume=t,this.stoppedReceivingVolume=r;let i=0;for(const e of this.speakingHistory)i+=e;n&&!this.speaking?i>=5&&(this.speaking=!0,this.emit("speaking")):!n&&this.speaking&&0===i&&(this.speaking=!1,this.emit("stopped-speaking")),this.speakingHistory.shift(),this.speakingHistory.push(n)},this.interval)}}function Tr(e,t,n=500){return"audio"===e.kind?function(e){return Et(this,void 0,void 0,function*(){return new Promise(t=>{let n=document.createElement("audio");const r=()=>{n&&(n.pause(),n.removeEventListener("oncanplay",r),n.srcObject=null,n=void 0,t({loaded:!0}))};n.muted=!0,n.autoplay=!0,n.oncanplay=r,n.srcObject=e})})}(t):"video"===e.kind?function(e,t){return Et(this,void 0,void 0,function*(){return new Promise(n=>{let r=document.createElement("video");const i=()=>{if(r){const e=r.videoHeight,t=r.videoWidth;r.pause(),r.removeEventListener("oncanplay",i),r.srcObject=null,r=void 0,n({height:e,loaded:!0,width:t})}};r.setAttribute("playsinline","playsinline"),r.muted=!0,r.autoplay=!0,r.oncanplay=i,r.srcObject=e,setTimeout(i,t)})})}(t,n):Promise.resolve({loaded:!1})}function kr(e){return(t,n)=>{let r=e.replaces;if(e.replaces){const i=Fn(n(),e.replaces);i&&(i.shared||(t(jr(i.id)),r=i.replaces))}e.track.onmute=(()=>{t(Ir(e.id,{externalDisabled:!0}))}),e.track.onunmute=(()=>{t(Ir(e.id,{externalDisabled:!1}))}),t({payload:Object.assign({},e,{replaces:r}),type:Ht})}}function Er(e,t,n){if("audio"!==e.kind)throw new Error("Incorrect media type. Expected audio, got: "+e.kind);return(r,i)=>{let o,s;{const n=e.clone();(s=new MediaStream).addTrack(n),o=function(e,t,n){const r=new Cr(t);return r.on("stopped-receiving-volume",t=>{n(Ir(e,{inputLost:t}))}),r.on("started-receiving-volume",()=>{n(Ir(e,{inputDetected:!0,inputLost:void 0}))}),r.on("speaking",()=>{n(Ir(e,{speaking:!0}))}),r.on("stopped-speaking",()=>{n(Ir(e,{lastSpokeAt:new Date(Date.now()),speaking:!1}))}),r}(e.id,s,r),e.onended=(()=>{o&&(o.stop(),n.stop()),r(Nr(e.id)),r(jr(e.id))}),Tr(e,t).then(t=>{r(Ir(e.id,t))})}r(kr({createdAt:Date.now(),externalDisabled:e.muted,hark:o,id:e.id,inputDetected:!1,inputLost:Date.now(),kind:"audio",localDisabled:!e.enabled,remoteDisabled:!1,renderMirrored:!1,replaces:n,screenCapture:!1,shared:!1,source:"local",speaking:!1,stream:t,track:e,utilityStream:s,volume:-1/0}))}}function Rr(e,t,n=!0,r){if("video"!==e.kind)throw new Error("Incorrect media type. Expected video, got: "+e.kind);return(i,o)=>{e.onended=(()=>{i(Nr(e.id)),i(jr(e.id))}),Tr(e,t).then(t=>{i(Ir(e.id,t))}),i(kr({createdAt:Date.now(),externalDisabled:e.muted,id:e.id,kind:"video",localDisabled:!e.enabled,remoteDisabled:!1,renderMirrored:n,replaces:r,screenCapture:!1,shared:!1,source:"local",speaking:!1,stream:t,track:e,volume:-1/0}))}}function Pr(e,t,n){if("video"!==e.kind)throw new Error("Incorrect media type. Expected video, got: "+e.kind);return(r,i)=>{e.onended=(()=>{r(Nr(e.id)),r(jr(e.id))}),Tr(e,t).then(t=>{r(Ir(e.id,t))}),"contentHint"in e&&(e.contentHint="detail"),r(kr({createdAt:Date.now(),externalDisabled:e.muted,id:e.id,kind:"video",localDisabled:!e.enabled,remoteDisabled:!1,renderMirrored:!1,replaces:n,screenCapture:!0,shared:!1,source:"local",speaking:!1,stream:t,track:e,volume:-1/0}))}}function Ar(e,t,n,r,i,o){return(s,a)=>{const c=Pn(a(),t);r.onended=(()=>{s(jr(n))}),Tr(r,i,500).then(e=>{s(Ir(n,e))}),setTimeout(()=>{Tr(r,i,500).then(e=>{s(Ir(n,e))})},500);const u={createdAt:Date.now(),externalDisabled:r.muted,id:n,kind:r.kind,localDisabled:!!c&&c.muted,owner:t,remoteDisabled:!1,renderMirrored:!1,roomAddress:e,screenCapture:"video"===r.kind&&o,source:"remote",speaking:!1,stream:i,track:r,volume:-1/0};s({payload:u,type:Ht})}}function jr(e,t=!0){return(n,r)=>{const i=Fn(r(),e);if(!i)return;i.shared&&n(Nr(e)),n({payload:{id:e},type:Qt});const o=_n(r());if(o&&o.mesh.updateConnections(),t&&(i.track&&i.track.stop(),i.utilityStream))for(const e of i.utilityStream.getTracks())e.stop()}}function Ir(e,t){return(n,r)=>{const i=r(),o=_n(i),s=Zn(i);n({payload:{id:e,updated:t},type:Kt});const a=r(),c=Zn(a);o&&(s!==c&&o.sendAllCallsSpeakingUpdate(c),void 0!==t.shared&&o.mesh.updateConnections());const u=Fn(i,e),l=Fn(a,e);if(l&&(l.track.enabled=!l.localDisabled,u&&"local"===l.source&&l.localDisabled!==u.localDisabled&&o&&o.mesh.notifyPeers(l,!0===l.localDisabled?"mute":"unmute"),"remote"===l.source&&l.owner)){const e=Pn(a,l.owner);e&&e.muted&&!l.localDisabled&&n({payload:{peerAddress:l.owner,updated:{muted:!1}},type:zt})}}}function Or(e){return Ir(e,{localDisabled:!1})}function Mr(e){return Ir(e,{localDisabled:!0})}function Dr(e){return(t,n)=>{const r=Fn(n(),e);r&&(r.replaces&&t(jr(r.replaces)),t(Ir(e,{replaces:void 0,shared:!0})))}}function Nr(e){return(t,n)=>{const r=zn(n()).filter(t=>t.replaces===e);t(Ir(e,{shared:!1})),r.length&&t(jr(e))}}function Lr(e,t,n=30){return(r,i)=>{const o=zn(i(),"video"),s=navigator.mediaDevices.getSupportedConstraints(),a={};let c=!1;if(s.frameRate&&(a.frameRate=n,c=!0),s.height&&(a.height={ideal:t},c=!0),s.width&&(a.width={ideal:e},c=!0),c)for(const e of o)e.screenCapture||e.track.applyConstraints(a).catch(e=>{console.error("Could not adjust video capture resolution:",e.message)})}}function Fr(e){return(t,n)=>{t({payload:{videoResolutionTiers:e},type:hn});const r=_n(n());r&&r.mesh.updateConnections()}}function Ur(e){return(t,n)=>{const r=Bn(n(),e,"audio");for(const e of r)t(Mr(e.id));t({payload:{peerAddress:e,updated:{muted:!0}},type:zt})}}function qr(e){return(t,n)=>{const r=Bn(n(),e,"audio");for(const e of r)t(Or(e.id));t({payload:{peerAddress:e,updated:{muted:!1}},type:zt})}}function Br(){return(e,t)=>{const n=zn(t(),"audio");for(const t of n)e(Mr(t.id))}}function zr(){return(e,t)=>{const n=zn(t(),"audio");for(const t of n)e(Or(t.id))}}function Vr(){return(e,t)=>{const n=zn(t(),"video");for(const t of n)e(Mr(t.id))}}function Wr(){return(e,t)=>{const n=zn(t(),"video");for(const t of n)e(Or(t.id))}}function Gr(e){return(t,n)=>{const r=zn(n(),e);for(const e of r)t(jr(e.id))}}function $r(e,t){return(n,r)=>{n({payload:{desiredMedia:t,roomAddress:e},type:rn});const i=_n(r());i&&(i.sendRoomPresence(e),i.mesh.updateConnections())}}function Hr(e){return(t,n)=>{const r=n(),i=Hn(r);t({payload:{roomAddress:e},type:on});const o=Hn(n()),s=_n(r);if(s){s.sendRoomPresence(e),s.mesh.updateConnections(),Zn(r)&&s.sendAllCallsSpeakingUpdate(!0)}i.length>0&&0===o.length&&t(Gr())}}function Qr(e,t){return(n,r)=>{n({payload:{desiredMedia:t,roomAddress:e},type:sn});const i=_n(r());i&&(i.sendRoomPresence(e),i.mesh.updateConnections())}}function Kr(e,t){return(n,r)=>{const i=r(),o=_n(i),s=t.id||Object(Te.v4)(),a=t.displayName||kn(i);o.xmpp.sendMessage({body:t.body,chatState:"active",id:s,nick:a,replace:t.replace,to:e,type:"groupchat"}),n({payload:{acked:!1,body:t.body,direction:bn,displayName:a,id:s,replace:t.replace,roomAddress:e,time:new Date},type:Wt})}}function Yr(e,t){return(n,r)=>{_n(r()).xmpp.sendMessage({chatState:t,to:e,type:"groupchat"}),n({payload:{chatState:t,roomAddress:e},type:Gt})}}function Jr(e,t,n){return{payload:{acked:!0,body:n.body,direction:gn,displayName:n.displayName,id:n.id,replace:n.replace,roomAddress:e,senderAddress:t,time:n.time||new Date},type:Vt}}function Xr(e,t){return(n,r)=>{const i=_n(r());let o;"init"!==t.event&&"cancel"!==t.event&&(o="composing"),i.xmpp.sendMessage({chatState:o,rtt:t,to:e,type:"groupchat"}),n({payload:{roomAddress:e,rtt:t},type:$t})}}function Zr(e,t){return{payload:{id:t,peerAddress:e,roomAddress:_e.b.parse(e).bare},type:cn}}function ei(e,t){return{payload:{id:t,peerAddress:e},type:un}}function ti(e,t,n){return{payload:{id:t,peerAddress:e,updated:n},type:an}}let ni,ri;function ii(){return(e,t)=>{navigator.mediaDevices&&(ni||(ni=(()=>{e(oi())})),ni(),navigator.mediaDevices.addEventListener("devicechange",ni),window.safari&&(ri=setInterval(()=>{ni&&ni()},1e3)))}}function oi(){return e=>Et(this,void 0,void 0,function*(){if(!navigator.mediaDevices)return;const t=yield navigator.mediaDevices.enumerateDevices();return e(si(t))})}function si(e){return{payload:e=e.filter(e=>"audioinput"!==e.kind||"MacBook Pro Speakers"!==e.label),type:ln}}function ai(e){return{payload:{error:e},type:dn}}function ci(e){return{payload:{error:e},type:fn}}function ui(e,t){return{payload:{camera:e,microphone:t},type:pn}}function li(e,t,n,r=5,i=1e3){return Et(this,void 0,void 0,function*(){let o,s=0;for(;s<=r;)try{const r=yield fetch(e,{body:JSON.stringify({name:t}),headers:{authorization:`Bearer ${n}`},method:"POST"});if(!r.ok)throw new Error("SimpleWebRTC room configuration request failed: "+r.status);return yield r.json()}catch(e){o=e,s+=1,yield dr(i)}throw console.error("ESWRTC_002. View more information at https://docs.simplewebrtc.com"),o||new Error("Could not fetch room config")})}function di(e,t={}){return(n,r)=>Et(this,void 0,void 0,function*(){const i=r(),o=_n(i),s=yn(i);try{const r=yield li(s.roomConfigUrl,e,s.credential),a=jn(i,r.roomAddress);(!a||a&&!a.joined)&&(n({payload:{autoJoinCall:Xn()&&(void 0===t.autoJoinCall||t.autoJoinCall),providedPassword:t.password,providedRoomName:e,roomAddress:r.roomAddress},type:Pt}),o&&o.joinRoom(r.roomAddress,t.password,t.autoJoinCall))}catch(e){n(fi("",!1))}})}function fi(e,t){return{payload:{passwordRequired:t,roomAddress:e},type:Dt}}function pi(e,t,n,r,i){return(o,s)=>{o({payload:{affiliation:i,id:n,role:r,roomAddress:e,selfAddress:t},type:Nt});const a=_n(s());a&&a.mesh.updateConnections()}}function hi(e,t,n,r,i){return(o,s)=>{o({payload:{affiliation:i,id:n,role:r,roomAddress:e,selfAddress:t},type:Mt})}}function mi(e){return(t,n)=>{const r=_n(n());t(Hr(e)),r&&r.sendRoomPresence(e,{type:"unavailable"}),t({payload:{roomAddress:e},type:At}),r&&r.mesh.updateConnections()}}function gi(e,t){return(n,r)=>{const i=_n(r());i&&i.lockRoom(e,t),n({payload:{password:t,roomAddress:e},type:jt})}}function bi(e){return(t,n)=>{const r=_n(n());r&&r.unlockRoom(e),t({payload:{roomAddress:e},type:It})}}function yi(e){return(t,n)=>Et(this,void 0,void 0,function*(){const r=_n(n());try{r&&(yield r.destroyRoom(e)),t({payload:{roomAddress:e},type:Ot})}catch(e){console.error(e)}})}function vi(e,t){return{payload:{password:t,roomAddress:e},type:Lt}}function wi(e){return{payload:{roomAddress:e},type:Ft}}function Si(e){return(t,n)=>{const r=_n(n());t({payload:{displayName:e},type:Rt}),r&&r.sendAllRoomsPresence()}}function xi(e){return(t,n)=>{const r=n(),i=_n(r);t({payload:{requestingMedia:e},type:Rt});const o=Hn(r);for(const n of o)t(Qr(n.roomAddress,e));i&&i.sendAllRoomsPresence()}}function _i(e=-65){return function(e){_r.threshold=e}(e),{payload:{voiceActivityThreshold:e},type:Rt}}function Ci(e){return{payload:{audioOutputDeviceId:e},type:Rt}}function Ti(e=1){return{payload:{globalVolumeLimit:e},type:Rt}}function ki(e,t,n){return(r,i)=>{r({payload:{affiliation:n.affiliation,customerData:n.customerData,displayName:n.displayName,id:n.id,joinedCall:n.joinedCall||!1,peerAddress:t,requestingMedia:n.requestingMedia||"none",role:n.role,roomAddress:e},type:qt});const o=_n(i());o&&o.mesh.updateConnections()}}function Ei(e,t){return(n,r)=>{n({payload:{peerAddress:t,roomAddress:e},type:Bt})}}function Ri(e,t){return(n,r)=>{n({payload:{peerAddress:e,updated:t},type:zt});const i=_n(r());i&&i.mesh.updateConnections()}}function Pi(e,t){return{payload:{peerAddress:t,roomAddress:e},type:Ut}}function Ai(e,t){return{payload:{peerAddress:e,updated:{volumeLimit:t}},type:zt}}var ji=Object.freeze({sleep:dr,fetchConfig:fr,connect:pr,disconnect:hr,receivedConfig:mr,receivedConfigError:gr,queueTelemetry:function(e,{roomId:t,peerId:n,data:r}){return{payload:{data:JSON.stringify(r),peerId:n,roomId:t},type:tn}},sendQueuedTelemetry:br,telemetrySucess:yr,enableTelemetry:function(e=5e3){return t=>{vr(),lr=setInterval(()=>{t(br())},e)}},disableTelemetry:vr,connectionStateChanged:wr,startCall:function(){},endCall:function(){},joinCall:$r,leaveCall:Hr,changeCallMode:function(){},pauseCall:function(){},resumeCall:function(){},startRecording:function(){},endRecording:function(){},pauseRecording:function(){},resumeRecording:function(){},setDesiredMediaForCall:Qr,updateCallState:function(){},sendChat:Kr,sendChatState:Yr,receiveChat:Jr,sendRTT:Xr,addConnection:Zr,removeConnection:ei,updateConnection:ti,listenForDevices:ii,fetchDevices:oi,stopListeningForDevices:function(){ni&&(navigator.mediaDevices.removeEventListener("devicechange",ni),ni=void 0),ri&&(clearInterval(ri),ri=void 0)},deviceList:si,cameraPermissionDenied:ai,microphonePermissionDenied:ci,deviceCaptureRequest:ui,fetchRoomConfig:li,joinRoom:di,joinRoomFailed:fi,joinRoomSuccess:pi,selfUpdated:hi,leaveRoom:mi,lockRoom:gi,unlockRoom:bi,destroyRoom:yi,roomLocked:vi,roomUnlocked:wi,setDisplayName:Si,setDesiredMedia:xi,setVoiceActivityThreshold:_i,setPushToTalk:function(e){return{payload:{pushToTalk:e},type:Rt}},setAudioOutputDevice:Ci,setGlobalVolumeLimit:Ti,peerOnline:ki,peerOffline:Ei,peerUpdated:Ri,kickPeer:Pi,limitPeerVolume:Ai,addLocalMedia:kr,addLocalAudio:Er,addLocalVideo:Rr,addLocalScreen:Pr,addRemoteMedia:Ar,removeMedia:jr,updateMedia:Ir,enableMedia:Or,disableMedia:Mr,shareLocalMedia:Dr,stopSharingLocalMedia:Nr,adjustVideoCaptureResolution:Lr,setVideoResolutionTiers:Fr,mutePeer:Ur,unmutePeer:qr,muteSelf:Br,unmuteSelf:zr,pauseSelfVideo:Vr,resumeSelfVideo:Wr,removeAllMedia:Gr});const Ii="getScreenMediaJSExtensionId";function Oi(){return!!window.chrome||(!!window.InstallTrigger||"getDisplayMedia"in window.navigator.mediaDevices)}function Mi(){return!!(window.chrome&&Se.browserDetails.version<72)}function Di(e){const t=window.chrome.runtime;return new Promise((n,r)=>{t.sendMessage(e,{type:"isInstalled"},null,e=>{e&&e.installed&&e.extensionId?(sessionStorage.setItem(Ii,e.extensionId),n(!0)):n(!1)})})}function Ni(e){return sessionStorage[Ii]===e}"chrome"===Se.browserDetails.browser?Se.browserShim.shimGetDisplayMedia(window,()=>new Promise((e,t)=>{window.chrome.runtime.sendMessage(sessionStorage[Ii],{type:"getScreen",id:1},null,n=>{if(n&&""!==n.sourceId)e(n.sourceId);else{const e=new Error("NavigatorUserMediaError");e.name="NotAllowedError",t(e)}})})):"firefox"===Se.browserDetails.browser&&Se.browserShim.shimGetDisplayMedia(window,"screen");const Li={config:{apiVersion:"",credential:"",customerData:{},iceServers:[],id:"",orgId:"",roomConfigUrl:"",screensharingExtensions:{chrome:""},signalingUrl:"",telemetryUrl:"",userId:""},configUrl:"",connectionAttempts:0,connectionState:"disconnected",queuedTelemetry:[],signalingClient:void 0,token:"",videoResolutionTiers:[[0,{width:800,height:600,frameRate:30}],[1,{width:800,height:600,frameRate:30}],[2,{width:640,height:480,frameRate:30}],[3,{width:320,height:240,frameRate:15}],[5,{width:320,height:240,frameRate:10}]]};const Fi={};function Ui(e,t){return e[t.payload.roomAddress]||(e=function(e,t){return Object.assign({},e,{[t.payload.roomAddress]:{allowedAudioRoles:["moderator","participant"],allowedMedia:"video",allowedVideoRoles:["moderator","participant"],joined:!1,joinedAt:void 0,recordable:!1,recordingState:"offline",requestingMedia:void 0,roomAddress:t.payload.roomAddress,state:"active"}})}(e,t)),t.type===rn?Object.assign({},e,{[t.payload.roomAddress]:Object.assign({},e[t.payload.roomAddress],{joined:!0,joinedAt:new Date(Date.now()),requestingMedia:t.payload.desiredMedia})}):t.type===on?Object.assign({},e,{[t.payload.roomAddress]:Object.assign({},e[t.payload.roomAddress],{joined:!1,joinedAt:void 0,requestingMedia:void 0})}):t.type===sn?Object.assign({},e,{[t.payload.roomAddress]:Object.assign({},e[t.payload.roomAddress],{requestingMedia:t.payload.desiredMedia})}):e}const qi={};function Bi(e,t){if(t.type===Vt){const n=t.payload,r=e[n.id];if(n.replace){const t=e[n.replace];if(t&&t.direction===bn)return Object.assign({},e,{[n.id]:Object.assign({},r,{acked:!0,body:n.body})})}if(!r)return Object.assign({},e,{[n.id]:n});if(r.direction===bn)return Object.assign({},e,{[n.id]:Object.assign({},r,{acked:!0,body:n.body,time:n.time})})}if(t.type===Wt){const n=t.payload,r=e[n.id];return Object.assign({},e,{[n.id]:zi(r,n)})}return e}function zi(e,t){return e?Object.assign({},t,{editedTime:t.time,time:e.time}):t}const Vi={};const Wi={cameraPermissionDenied:!1,cameraPermissionGranted:!1,devices:[],hasAudioOutput:!1,hasCamera:!1,hasMicrophone:!1,microphonePermissionDenied:!1,microphonePermissionGranted:!1,requestingCameraCapture:!1,requestingCapture:!1,requestingMicrophoneCapture:!1};const Gi={};const $i={};function Hi(e,t){const n=e[t.payload.peerAddress];if(!n)return e;const r=new Date(Date.now());let i=n.lastSpokeAt;n.speaking&&!1===t.payload.updated.speaking&&(i=r);let o=!1;return n.joinedCall&&!1===t.payload.updated.joinedCall&&(o=!0),Object.assign({},e,{[t.payload.peerAddress]:Object.assign({},n,t.payload.updated,{joinedCallAt:o?void 0:n.joinedCallAt||r,lastSpokeAt:i})})}const Qi={};function Ki(e,t){const n=e[t.payload.roomAddress];return n?t.type===Dt?Object.assign({},e,{[t.payload.roomAddress]:Object.assign({},n,{joined:!1,joinedAt:void 0,password:"",passwordRequired:!!t.payload.passwordRequired,roomState:t.payload.passwordRequired?"password-required":"failed"})}):Object.assign({},e,{[t.payload.roomAddress]:Object.assign({},n,{id:t.payload.id,joined:!0,joinedAt:n.joinedAt||new Date(Date.now()),roomState:"joined",selfAddress:t.payload.selfAddress,selfAffiliation:t.payload.affiliation,selfRole:t.payload.role})}):e}const Yi={displayName:"",globalVolumeLimit:1,mediaEnabled:!0,pushToTalk:!1,requestingMedia:"video",voiceActivityThreshold:-65};function Ji(e,t){return Object.assign({},e,t.payload)}const Xi=h({api:function(e=Li,t){switch(t.type){case Yt:return Object.assign({},e,{signalingClient:t.payload});case Jt:return Object.assign({},e,{connectionState:"disconnected",signalingClient:void 0});case Xt:return Object.assign({},e,{connectionState:t.payload});case Zt:{const n=t.payload.config,r=t.payload.configUrl,i=t.payload.token||"";return Object.assign({},e,{config:Object.assign({},e.config,n),configUrl:r,token:i})}case tn:return Object.assign({},e,{queuedTelemetry:[...e.queuedTelemetry,t.payload]});case nn:return Object.assign({},e,{queuedTelemetry:e.queuedTelemetry.slice(t.payload)});case hn:return Object.assign({},e,{videoResolutionTiers:t.payload.videoResolutionTiers})}return e},calls:function(e=Fi,t){switch(t.type){case rn:case on:return Ui(e,t);case At:return function(e,t){const n=Object.assign({},e);return delete n[t.payload.roomAddress],n}(e,t);case Nt:case sn:return Ui(e,t)}return e},chats:function(e=qi,t){switch(t.type){case Vt:case Wt:return Bi(e,t)}return e},connections:function(e=Vi,t){switch(t.type){case cn:return function(e,t){return Object.assign({},e,{[t.payload.id]:{connectionState:"",id:t.payload.id,peerAddress:t.payload.peerAddress,receivingAudioMediaId:"",receivingVideoMediaId:"",restarting:!1,roomAddress:t.payload.roomAddress,sendingAudioMediaId:"",sendingVideoMediaId:"",sessionState:""}})}(e,t);case an:return function(e,t){return e[t.payload.id]?Object.assign({},e,{[t.payload.id]:Object.assign({},e[t.payload.id]||{},{peerAddress:t.payload.peerAddress},t.payload.updated)}):e}(e,t);case un:return function(e,t){const n=Object.assign({},e);return delete n[t.payload.id],n}(e,t)}return e},devices:function(e=Wi,t){if(t.type===ln){const n=t.payload,r=n.filter(e=>"audioinput"===e.kind),i=n.filter(e=>"videoinput"===e.kind),o=n.filter(e=>"audiooutput"===e.kind);return Object.assign({},e,{cameraPermissionGranted:i.filter(e=>!!e.label).length>0,devices:n.filter(e=>!!e.label),hasAudioOutput:o.length>0,hasCamera:i.length>0,hasMicrophone:r.length>0,microphonePermissionGranted:r.filter(e=>!!e.label).length>0})}return t.type===dn?Object.assign({},e,{cameraPermissionDenied:!0}):t.type===fn?Object.assign({},e,{microphonePermissionDenied:!0}):t.type===pn?Object.assign({},e,{requestingCameraCapture:t.payload.camera,requestingCapture:t.payload.camera||t.payload.microphone,requestingMicrophoneCapture:t.payload.microphone}):e},media:function(e=Gi,t){switch(t.type){case Ht:return function(e,t){return Object.assign({},e,{[t.payload.id]:t.payload})}(e,t);case Qt:return function(e,t){const n=Object.assign({},e);return delete n[t.payload.id],n}(e,t);case Kt:return function(e,t){const n=e[t.payload.id];return n?Object.assign({},e,{[t.payload.id]:Object.assign({},n,t.payload.updated)}):e}(e,t);case on:return function(e,t){const n=Object.assign({},e);for(const r of Object.keys(e)){const i=e[r];"remote"===i.source&&i.roomAddress===t.payload.roomAddress&&delete n[r]}return n||{}}(e,t)}return e},peers:function(e=$i,t){switch(t.type){case qt:return function(e,t){if(e[t.payload.peerAddress])return Hi(e,{payload:{peerAddress:t.payload.peerAddress,updated:t.payload},type:zt});const n=new Date(Date.now());return Object.assign({},e,{[t.payload.peerAddress]:{address:t.payload.peerAddress,affiliation:t.payload.affiliation,chatState:"active",customerData:t.payload.customerData||{},displayName:t.payload.displayName||"",id:t.payload.id,joinedCall:t.payload.joinedCall||!1,joinedCallAt:t.payload.joinedCall?n:void 0,joinedRoomAt:n,lastSpokeAt:void 0,muted:!1,requestingAttention:!1,requestingMedia:t.payload.requestingMedia||"none",role:t.payload.role,roomAddress:t.payload.roomAddress,rtt:"",speaking:!1,volume:-1/0,volumeLimit:.8}})}(e,t);case Bt:return function(e,t){const n=Object.assign({},e);return delete n[t.payload.peerAddress],n}(e,t);case zt:return Hi(e,t);case At:return function(e,t){const n=Object.assign({},e);for(const r of Object.keys(e))e[r].roomAddress===t.payload.roomAddress&&delete n[r];return n}(e,t)}return e},rooms:function(e=Qi,t){switch(t.type){case Mt:return Ki(e,t);case Pt:return function(e,t){return Object.assign({},e,{[t.payload.roomAddress]:{address:t.payload.roomAddress,autoJoinCall:!!t.payload.autoJoinCall,id:"",joined:!1,joinedAt:void 0,password:t.payload.password||"",passwordRequired:!1,providedName:t.payload.providedRoomName,providedPassword:t.payload.providedPassword,roomState:"joining",selfAddress:"",selfAffiliation:"none",selfRole:"none",unreadCount:0}})}(e,t);case Dt:case Nt:return Ki(e,t);case At:return function(e,t){const n=Object.assign({},e);return delete n[t.payload.roomAddress],n}(e,t);case jt:case It:case Lt:case Ft:return function(e,t){const n=e[t.payload.roomAddress];if(!n)return e;switch(t.type){case jt:return Object.assign({},e,{[t.payload.roomAddress]:Object.assign({},n,{providedPassword:t.payload.password||""})});case Lt:return Object.assign({},e,{[t.payload.roomAddress]:Object.assign({},n,{password:t.payload.password||"",passwordRequired:!0,providedPassword:void 0})});case Ft:return Object.assign({},e,{[t.payload.roomAddress]:Object.assign({},n,{password:"",passwordRequired:!1,providedPassword:void 0})})}return e}(e,t)}return e},user:function(e=Yi,t){switch(t.type){case Rt:return Ji(e,t);case Zt:return Ji(e,{payload:{displayName:t.payload.config.displayName||e.displayName||"Anonymous"},type:Rt});case ln:{const n=e.audioOutputDeviceId;if(n){for(const r of t.payload)if(r.id===n)return e;return Ji(e,{payload:{audioOutputDeviceId:""},type:Rt})}return e}}return e}});class Zi extends ke.Component{componentDidMount(){this.setup()}componentDidUpdate(e){this.setup()}setup(){this.audio.oncontextmenu=(e=>{e.preventDefault()}),this.audio.srcObject!==this.props.media.stream&&(this.audio.srcObject=this.props.media.stream),(this.props.volume||0===this.props.volume)&&(this.audio.volume=this.props.volume),this.props.media.localDisabled||this.props.media.remoteDisabled||0===this.props.volume?this.audio.muted=!0:this.audio.muted=!1,this.props.outputDevice&&this.audio.sinkId!==this.props.outputDevice&&this.audio.setSinkId?(this.audio.pause(),this.audio.setSinkId(this.props.outputDevice).then(()=>{this.audio.play()}).catch(e=>{this.audio.play(),console.error(e)})):this.audio.autoplay=!0}render(){return Object(ke.createElement)("audio",Object.assign({ref:e=>{this.audio=e}},{playsInline:!0}))}}_t(function(e,t){const n=["joinedCall","speaking","chatState","requestingAttention"],r=On(e,t.room).filter(e=>{for(const r of n)if(void 0!==t[r]&&e[r]!==t[r])return!1;return!0});return Object.assign({},t,{peers:r})})(class extends ke.Component{render(){const e={chatState:this.props.chatState||void 0,joinedCall:this.props.joinedCall||!1,peers:this.props.peers||[],speaking:this.props.speaking||!1};let t=this.props.render;return t||"function"!=typeof this.props.children||(t=this.props.children),t?t(e):this.props.children}});_t(function(e,t){return t},function(e,t){return{onChat:n=>e(Kr(t.room,n)),onChatState:n=>e(Yr(t.room,n)),onRtt:n=>e(Xr(t.room,n))}})(class extends ke.Component{constructor(e){super(e),this.rttBuffer=new xe.InputBuffer,this.state={chatState:"active",message:""}}componentDidUpdate(e){!e.rtt&&this.props.rtt&&(this.props.onRtt(this.rttBuffer.start()),this.rttBuffer.update(this.state.message)),e.rtt&&!this.props.rtt&&(this.props.onRtt(this.rttBuffer.stop()),clearInterval(this.rttInterval),this.rttInterval=null)}startSendingRtt(){!this.rttInterval&&this.props.rtt&&(this.rttInterval=setInterval(this.rttSend.bind(this),700),setTimeout(this.rttSend.bind(this),100))}rttUpdate(e=""){this.rttBuffer.update(e),this.startSendingRtt()}rttSend(){if(!this.props.rtt)return;const e=this.rttBuffer.diff();e&&this.props.onRtt(e)}commitMessage(){if(this.props.disabled||0===this.state.message.length)return;clearTimeout(this.pausedTimeout),this.pausedTimeout=null,clearInterval(this.rttInterval),this.rttInterval=null;const{message:e}=this.state;this.setState({message:"",chatState:"active"}),this.rttBuffer.commit(),this.props.onChat&&this.props.onChat({body:e})}updateChatState(e){this.pausedTimeout&&clearTimeout(this.pausedTimeout),this.pausedTimeout="composing"===e?setTimeout(()=>{this.updateChatState("paused")},1e4):null,e!==this.state.chatState&&this.props.onChatState&&this.props.onChatState(e),this.setState({chatState:e})}render(){return Object(ke.createElement)("textarea",{id:this.props.id,value:this.state.message,placeholder:this.props.placeholder,disabled:this.props.disabled,onInput:e=>{const t=e.target.value;this.rttUpdate(t),""!==t&&this.updateChatState("composing"),""!==this.state.message&&""===t&&this.updateChatState("active"),this.setState({message:t})},onChange:()=>null,onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),this.commitMessage())}})}});function eo(e){e=e||{},this.target=e.target,this.interval=1e3|e.interval,this.max=e.max||0,this.callback=e.callback,this.userScroll=!0,this.spinner=e.spinner,this.spin_img=new Image,this.stickyHeight=e.stickyHeight||10,this.spinner&&(this.spin_img.src=this.spinner);var t=this;if(this.intend_down=!0,this.emit("lock"),document.onmousewheel,window.addEventListener("resize",function(e){t.emit("windowresize"),t.checkdown()}),this.target.addEventListener("scroll",function(e){t.userScroll&&(t.intend_down&&!t.isdown()?(t.intend_down=!1,t.emit("release")):!t.intend_down&&t.isdown()&&(t.intend_down=!0,t.emit("lock"))),t.userScroll=!0}),window.MutationObserver)this.mo=new MutationObserver(function(e){var n,r,i,o,s,a,c,u,l;for(t.userScroll=!1,t.checkdown(),r=0;r<e.length;r++)for(n=e[r],i=0;i<n.addedNodes.length;i++)if(n.addedNodes[i].getElementsByTagName)for(a=0,c=(o=n.addedNodes[i].getElementsByTagName("img")).length;a<c;a++)if(!(s=o[a]).complete){u=s.parentNode,t.spinner&&(l=t.spin_img.cloneNode(),u.replaceChild(l,s));var d=function(e){l&&u.replaceChild(s,l),t.emit("imageload"),t.checkdown(),e.target.removeEventListener("load",d)};s.addEventListener("load",d)}}),this.mo.observe(this.target,{attributes:!0,childList:!0,characterData:!0,subtree:!0});else{var n=function(){t.checkdown(),window.setTimeout(n,t.interval)};n()}}(function(){this.isdown=function(){return this.target.scrollHeight-this.target.scrollTop-this.target.clientHeight<this.stickyHeight},this.append=function(e){for(this.emit("append"),this.target.appendChild(e),this.intend_down&&(this.target.scrollTop=this.target.scrollHeight,this.emit("scrolldown"));0!==this.max&&this.target.children.length>this.max;)this.target.removeChild(this.target.children[0]),this.emit("removechild")},this.emit=function(e,t){"function"==typeof this.callback&&this.callback(e,t)},this.checkdown=function(){var e=this.target.scrollHeight-this.target.scrollTop-this.target.clientHeight;(this.intend_down||e<this.stickyHeight)&&(this.target.scrollTop=this.target.scrollHeight,this.userScroll=!1,this.emit("scrolldown"))}}).call(eo.prototype);class to extends ke.Component{render(){return Object(ke.createElement)("div",Object.assign({},this.props,{ref:e=>{if(!e)return;const t=new eo({target:e,stickyHeight:30});this.staydown&&(t.intend_down=this.staydown.intend_down,t.userScroll=this.staydown.userScroll),this.staydown=t,this.staydown.checkdown()}}))}}class no extends ke.Component{render(){let e=this.props.render;return e||"function"!=typeof this.props.children||(e=this.props.children),e?e(this.props):this.props.children?this.props.children:Object(ke.createElement)("div",null,Object(ke.createElement)("span",null,this.props.displayName),this.props.chats.map(e=>Object(ke.createElement)("div",null,e.body)))}}_t(function(e,t){return t.room?Object.assign({},t,{groups:Dn(e,t.room,t.maxGroupDuration)||[]}):Object.assign({},t,{groups:[]})})(class extends ke.Component{render(){const e=this.props.groups||[];let t=this.props.render;return t||"function"!=typeof this.props.children||(t=this.props.children),t?t({groups:e}):this.props.children?this.props.children:Object(ke.createElement)(to,{id:this.props.id,className:this.props.className},e.map(e=>this.props.renderGroup?this.props.renderGroup(e):Object(ke.createElement)(no,Object.assign({},e))))}});_t(function(e,t){const n=Un(e).filter(e=>!t.audioInput&&!t.videoInput&&!t.audioOutput||"audioinput"===e.kind&&t.audioInput||"videoinput"===e.kind&&t.videoInput||"audiooutput"===e.kind&&t.audioOutput),r=qn(e);return Object.assign({},t,{devices:n},r)},function(e){return{fetchDevices:()=>e(oi()),listenForDevices:()=>e(ii())}})(class extends ke.Component{componentDidMount(){this.props.listenForDevices(),this.props.fetchDevices()}render(){const e={audioInput:this.props.audioInput,audioOutput:this.props.audioOutput,cameraPermissionDenied:this.props.cameraPermissionDenied,cameraPermissionGranted:this.props.cameraPermissionGranted,devices:this.props.devices,hasAudioOutput:this.props.hasAudioOutput,hasCamera:this.props.hasCamera,hasMicrophone:this.props.hasMicrophone,microphonePermissionDenied:this.props.microphonePermissionDenied,microphonePermissionGranted:this.props.microphonePermissionGranted,requestingCameraCapture:this.props.requestingCameraCapture,requestingCapture:this.props.requestingCapture,requestingMicrophoneCapture:this.props.requestingMicrophoneCapture,videoInput:this.props.videoInput};let t=this.props.render;return t||"function"!=typeof this.props.children||(t=this.props.children),t?t(e):this.props.children}});_t(function(e,t){let n;t.audio&&!t.video&&(n="audio"),!t.audio&&t.video&&(n="video");let r=[];return r=(r=t.shared?Wn(e,n):zn(e,n)).filter(e=>"video"===e.kind&&void 0!==t.screen?e.screenCapture===t.screen:!e.shared||!1!==t.shared),Object.assign({},t,{media:r})},function(e){return{removeMedia:t=>e(jr(t)),shareLocalMedia:t=>e(Dr(t)),stopSharingLocalMedia:t=>e(Nr(t))}})(class extends ke.Component{render(){const e={audio:this.props.audio,media:this.props.media||[],removeMedia:this.props.removeMedia,screen:this.props.screen,shareLocalMedia:this.props.shareLocalMedia,shared:this.props.shared,stopSharingLocalMedia:this.props.stopSharingLocalMedia,video:this.props.video};let t=this.props.render;return t||"function"!=typeof this.props.children||(t=this.props.children),t?t(e):this.props.children}});_t(function(e){return{}},function(e,t){return{disableMedia:()=>e(Mr(t.media.id)),enableMedia:()=>e(Or(t.media.id)),removeLocalMedia:()=>e(jr(t.media.id)),shareLocalMedia:()=>e(Dr(t.media.id)),stopSharingLocalMedia:()=>e(Nr(t.media.id))}})(class extends ke.Component{render(){const e={disable:this.props.disableMedia,enable:this.props.enableMedia,isEnabled:!this.props.media.localDisabled&&!this.props.media.remoteDisabled,isShared:"local"===this.props.media.source&&!!this.props.media.shared,media:this.props.media,remove:this.props.removeLocalMedia,share:this.props.shareLocalMedia,stopSharing:()=>{this.props.stopSharingLocalMedia(),this.props.autoRemove&&(this.props.removeLocalMedia(),this.props.media.track.stop())}};let t=this.props.render;return t||"function"!=typeof this.props.children||(t=this.props.children),t?t(e):this.props.children}});_t(function(e,t){const n=Pn(e,t.peer.address);return{hasActiveMicrophone:Bn(e,t.peer.address,"audio").filter(e=>!e.remoteDisabled).length>0,isMuted:n.muted||!1,isSpeaking:n.speaking||!1}},function(e,t){return{kick:()=>e(Pi(t.peer.roomAddress,t.peer.address)),mute:()=>e(Ur(t.peer.address)),setVolumeLimit:n=>e(Ai(t.peer.address,n)),unmute:()=>e(qr(t.peer.address))}})(class extends ke.Component{render(){const e={hasActiveMicrophone:this.props.hasActiveMicrophone,isMuted:this.props.isMuted,isSpeaking:this.props.isSpeaking,kick:this.props.kick,mute:this.props.mute,peer:this.props.peer,setVolumeLimit:this.props.setVolumeLimit,unmute:this.props.unmute};let t=this.props.render;return t||"function"!=typeof this.props.children||(t=this.props.children),t?t(e):this.props.children}});function ro(e){return{connectionState:Tn(e),isSupportedBrowser:Xn(),localMedia:zn(e)}}function io(e,t){return{connect:()=>e(pr(t.configUrl,t.userData)),disconnect:()=>e(hr()),removeAllMedia:()=>e(Gr()),setDefaultValues:()=>{t.desiredMedia&&e(xi(t.desiredMedia)),t.displayName&&e(Si(t.displayName)),t.videoResolutionTiers&&e(Fr(t.videoResolutionTiers))}}}function oo(e){return _t(ro)(class extends ke.Component{render(){const t={connectionState:this.props.connectionState};let n=this.props.render;return n||"function"!=typeof this.props.children||(n=this.props.children),this.props.connectionState===e?n?n(t):this.props.children:null}})}_t(ro,io)(class extends ke.Component{render(){return this.props.isSupportedBrowser?null:this.props.children}}),_t(ro,io)(class extends ke.Component{render(){const e={connectionState:this.props.connectionState};let t=this.props.render;return t||"function"!=typeof this.props.children||(t=this.props.children),"connected"!==this.props.connectionState?t?t(e):this.props.children:null}}),oo("connecting"),oo("connected"),oo("disconnected"),oo("failed");_t(ro,io)(class extends ke.Component{componentDidMount(){this.props.setDefaultValues(),this.props.connect(),window.addEventListener("online",()=>{setTimeout(()=>{"connected"!==this.props.connectionState&&"connecting"!==this.props.connectionState&&(this.props.disconnect(),this.props.connect())},5e3*Math.random())}),window.addEventListener("offline",()=>{setTimeout(()=>{navigator.onLine||this.props.disconnect()},5e3)})}componentWillUnmount(){this.props.removeAllMedia(),this.props.disconnect()}render(){const e={connectionState:this.props.connectionState};let t=this.props.render;return t||"function"!=typeof this.props.children||(t=this.props.children),t?t(e):this.props.children}});_t(function(e,t){const n=Vn(e,"audio"),r=[];for(const t of n){const n=Pn(e,t.owner);r.push({media:t,volumeLimit:(n?n.volumeLimit:1)||1})}return{audioSources:r,globalVolumeLimit:$n(e),outputDevice:Gn(e)}})(class extends ke.Component{render(){const e=this.props.audioSources||[],t=this.props.globalVolumeLimit;return Object(ke.createElement)(ke.Fragment,null,e.map(e=>Object(ke.createElement)(Zi,{key:e.media.id,media:e.media,volume:t*e.volumeLimit,outputDevice:this.props.outputDevice})))}});_t(function(e,t){let n;t.audio&&!t.video?n="audio":!t.audio&&t.video&&(n="video");let r=[];return r=t.peer?Bn(e,t.peer,n):Vn(e,n),Object.assign({},t,{media:r})})(class extends ke.Component{render(){const e={audio:this.props.audio,media:this.props.media||[],peer:this.props.peer,video:this.props.video};let t=this.props.render;return t||"function"!=typeof this.props.children||(t=this.props.children),t?t(e):this.props.children}});_t(function(e,t){const n=yn(e);return{extensionId:t.extensionId||n.screensharingExtensions.chrome}},function(e){return{addLocalScreen:(t,n)=>e(Pr(t,n)),shareLocalScreen:t=>e(Dr(t))}})(class extends ke.Component{constructor(e){super(e),this.installCheckInterval=void 0,this.state={extensionInstalled:!!this.props.extensionId&&Ni(this.props.extensionId),extensionInstalling:!1,extensionRequired:Mi()}}componentDidMount(){Mi()&&this.props.extensionId&&Di(this.props.extensionId).then(e=>{this.setState({extensionInstalled:e})})}getDisplayMedia(){return Et(this,void 0,void 0,function*(){try{if(!navigator.mediaDevices.getDisplayMedia)throw new Error("getDisplayMedia not supported");const e=yield navigator.mediaDevices.getDisplayMedia({video:!0}),t=e.getVideoTracks()[0];this.props.addLocalScreen(t,e),!1!==this.props.share&&this.props.shareLocalScreen(t.id)}catch(e){console.log(e,e.message,e.name)}})}listenForInstallation(e=2e3){return Et(this,void 0,void 0,function*(){this.installCheckInterval&&(clearInterval(this.installCheckInterval),this.installCheckInterval=void 0),this.setState({extensionInstalling:!0}),this.installCheckInterval=setInterval(()=>{if(!this.props.extensionId||this.state.extensionInstalled)return clearInterval(this.installCheckInterval),void(this.installCheckInterval=void 0);Di(this.props.extensionId).then(e=>{this.setState({extensionInstalled:e,extensionInstalling:!e})})},e)})}render(){if(this.props.render){const e=Oi(),t=e&&(!this.state.extensionRequired||this.state.extensionRequired&&this.state.extensionInstalled);return this.props.render(this.getDisplayMedia.bind(this),{available:e,extensionId:this.props.extensionId,extensionInstalled:this.state.extensionInstalled,extensionInstalling:this.state.extensionInstalling,extensionRequired:this.state.extensionRequired,listenForInstallation:this.listenForInstallation.bind(this),ready:t})}return Object(ke.createElement)("button",{onClick:()=>this.getDisplayMedia()},"Start Screenshare")}});function so(e,t,n){return!(!1===n||!n&&!t)&&(t=!0===t?{}:t,n=!0===n?{}:n,Object.assign({},e,t,n))}_t(function(e,t){const n=qn(e);return Object.assign({},t,{requestingCameraCapture:n.requestingCameraCapture,requestingCapture:n.requestingCapture,requestingMicrophoneCapture:n.requestingMicrophoneCapture})},function(e){return{addLocalAudio:(t,n,r)=>e(Er(t,n,r)),addLocalScreen:(t,n,r)=>e(Pr(t,n,r)),addLocalVideo:(t,n,r,i)=>e(Rr(t,n,r,i)),cameraPermissionDenied:t=>e(ai(t)),deviceCaptureRequest:(t,n)=>e(ui(t,n)),fetchDevices:()=>e(oi()),microphonePermissionDenied:t=>e(ci(t)),removeAllMedia:t=>e(Gr(t)),shareLocalMedia:t=>e(Dr(t))}})(class extends ke.Component{constructor(e){super(e),this.errorCount=0}getMedia(e={}){return Et(this,void 0,void 0,function*(){let t;const n={};{const e=navigator.mediaDevices.getSupportedConstraints();for(const t of["autoGainControl","echoCancellation","noiseSuppression"])e[t]&&(n[t]=!0)}const r=so(n,this.props.audio,e.audio),i=so({},this.props.video,e.video);try{if(!navigator.mediaDevices)throw new Error("getUserMedia not supported");this.props.deviceCaptureRequest(!!i,!!r),r&&(yield this.props.removeAllMedia("audio")),t=yield navigator.mediaDevices.getUserMedia({audio:r,video:i})}catch(t){return this.errorCount+=1,"AbortError"===t.name&&this.errorCount<12?(setTimeout(()=>this.getMedia(e),100+Math.pow(2,this.errorCount)),{}):("NotAllowedError"!==t.name&&"SecurityError"!==t.name||(r&&this.props.microphonePermissionDenied(),i&&this.props.cameraPermissionDenied()),this.props.deviceCaptureRequest(!1,!1),this.props.onError&&this.props.onError(t),{})}this.errorCount=0;const o=t.getAudioTracks()[0],s=t.getVideoTracks()[0];o?(this.props.addLocalAudio(o,t,this.props.replaceAudio),!1!==this.props.share&&this.props.shareLocalMedia(o.id)):r&&this.props.microphonePermissionDenied(),s?(this.props.screenCapture?this.props.addLocalScreen(s,t,this.props.replaceVideo):this.props.addLocalVideo(s,t,this.props.mirrored,this.props.replaceVideo),!1!==this.props.share&&this.props.shareLocalMedia(s.id)):i&&this.props.cameraPermissionDenied(),yield this.props.fetchDevices(),yield this.props.deviceCaptureRequest(!1,!1);const a={audio:o?o.id:void 0,video:s?s.id:void 0};return this.props.onSuccess&&this.props.onSuccess(a),a})}componentDidMount(){this.props.auto&&this.getMedia()}componentDidUpdate(e){this.props.auto&&this.props.auto!==e.auto&&this.getMedia()}render(){const e=this.getMedia.bind(this);let t=this.props.render;return t||"function"!=typeof this.props.children||(t=this.props.children),t?t(e):this.props.children?this.props.children:this.props.auto?null:Object(ke.createElement)("button",{onClick:e},"Request Media")}});_t(function(e,t){let n;return t.roomAddress?n=jn(e,t.roomAddress):t.name&&(n=In(e,t.name)),{call:n?Nn(e,n.address):void 0,connectionState:Tn(e),localMedia:zn(e),peers:n?On(e,n.address):[],remoteMedia:Vn(e),room:n,roomAddress:n?n.address:void 0,roomState:n?n.roomState:"joining"}},function(e,t){return{destroy:t=>e(yi(t)),join:()=>e(di(t.name,{password:t.password||void 0})),leave:t=>e(mi(t)),lock:(t,n)=>e(gi(t,n)),unlock:t=>e(bi(t))}})(class extends ke.Component{componentDidMount(){"connected"===this.props.connectionState&&this.props.join()}componentWillUnmount(){this.props.leave(this.props.roomAddress)}componentDidUpdate(e){"connected"===this.props.connectionState&&(this.props.connectionState===e.connectionState?this.props.room&&this.props.password!==e.password&&("joined"===this.props.room.roomState?this.props.password?this.props.lock(this.props.roomAddress,this.props.password):this.props.unlock(this.props.roomAddress):this.props.join()):this.props.join())}render(){const e={call:this.props.call||{},joined:!!this.props.room&&this.props.room.joined,localMedia:this.props.localMedia||[],peers:this.props.peers||[],remoteMedia:this.props.remoteMedia||[],room:this.props.room||{}};let t=this.props.render;return t||"function"!=typeof this.props.children||(t=this.props.children),t?t(e):this.props.children}});_t(function(e,t){const n=zn(e,"audio").filter(e=>!e.localDisabled),r=zn(e,"video").filter(e=>!e.localDisabled),i=Sn(e),o=wn(e),s=$n(e),a=Zn(e,!1),c=er(e,!1);return{customerData:i,isDeafened:0===s,isMuted:!n.length,isPaused:!r.length,isSpeaking:a,isSpeakingWhileMuted:c,user:o}},function(e,t){return{deafen:()=>e(Ti(0)),mute:()=>e(Br()),pauseVideo:()=>e(Vr()),resumeVideo:()=>e(Wr()),setAudioOutputDevice:t=>e(Ci(t)),setDisplayName:t=>e(Si(t)),setGlobalVolumeLimit:t=>e(Ti(t)),setVoiceActivityThreshold:t=>e(_i(t)),undeafen:()=>e(Ti(1)),unmute:()=>e(zr())}})(class extends ke.Component{render(){const e={customerData:this.props.customerData||{},deafen:this.props.deafen,isDeafened:this.props.isDeafened||!1,isMuted:this.props.isMuted||!1,isPaused:this.props.isPaused||!1,isSpeaking:this.props.isSpeaking||!1,isSpeakingWhileMuted:this.props.isSpeakingWhileMuted||!1,mute:this.props.mute,pauseVideo:this.props.pauseVideo,resumeVideo:this.props.resumeVideo,setAudioOutputDevice:this.props.setAudioOutputDevice,setDisplayName:this.props.setDisplayName,setGlobalVolumeLimit:this.props.setGlobalVolumeLimit,setVoiceActivityThreshold:this.props.setVoiceActivityThreshold,undeafen:this.props.undeafen,unmute:this.props.unmute,user:this.props.user};let t=this.props.render;return t||"function"!=typeof this.props.children||(t=this.props.children),t?t(e):this.props.children}});Xn();var ao=function(e){var t=document.head.querySelector("meta[name=simplewebrtc-"+e+"]");if(t){var n=t.getAttribute("content");if(null!==n)return n}return null},co=["on","beside","in","beneath","above","under","by","over","against","near"],uo=["autumn","hidden","bitter","misty","silent","empty","dry","dark","summer","icy","delicate","quiet","white","cool","spring","winter","patient","twilight","dawn","crimson","wispy","weathered","blue","billowing","broken","cold","falling","frosty","green","long","late","lingering","bold","little","morning","muddy","old","red","rough","still","small","sparkling","shy","wandering","withered","wild","black","young","holy","solitary","fragrant","aged","snowy","proud","floral","restless","divine","polished","ancient","purple","lively","nameless"],lo=["waterfall","river","breeze","moon","rain","wind","sea","morning","snow","lake","sunset","pine","shadow","leaf","dawn","glitter","forest","hill","cloud","meadow","sun","glade","bird","brook","butterfly","bush","dew","dust","field","fire","flower","firefly","feather","grass","haze","mountain","night","pond","darkness","snowflake","silence","sound","sky","shape","surf","thunder","violet","water","wildflower","wave","water","resonance","sun","wood","dream","cherry","tree","fog","frost","voice","paper","frog","smoke","star"],fo=[["toast","pieces of toast"],["muffin","muffins"],["teacake","teacakes"],["bun","buns"],["bap","baps"],["baguette","baguettes"],["bagel","bagels"],["croissant","croissants"],["crumpet","crumpets"],["pancake","pancakes"],["potato cake","potato cakes"],["hot cross bun","hot cross buns"],["flapjack","flapjacks"],["waffle","waffles"],["cheese and ham breville","cheese and ham brevilles"],["toasted teacake","toasted teacakes"],["brioche","brioches"],["cornbread","pieces of cornbread"],["yeast bread","yeast breads"],["flat bread","flat breads"],["sweet bread","sweet breads"],["fruit bread","fruit breads"],["rye","ryes"],["soda bread","soda breads"],["breadstick","breadsticks"],["burger bun","burger buns"],["chapati","chapatis"],["ciabatta","ciabattas"],["cracker","crackers"],["crepe","crepes"],["donut","donuts"],["pan au chocolate","pans au chocolate"]],po=["a couple","a few","two","three","four","five","six","half a dozen","seven","eight","nine","ten","eleven","a dozen","twelve"];function ho(e){return e[Math.floor(Math.random()*e.length)]}var mo=function(){return Math.floor(5*Math.random())>1?[ho(co),"a",ho(uo),ho(lo)].join("-").replace(/\s/g,"-").replace(/-a-(a|e|i|o|u)/,"-an-$1"):[ho(po),ho(fo)[1],"and",ho(["a","one"]),ho(fo)[0]].join("-").replace(/\s/g,"-")},go=0,bo=new Array(0,9,19,29,39,49,59,69,79,90),yo=new Array(0,1,10,20,30,40,50,60,70,80),vo=0,wo=0,So=0,xo=[],_o=[];function Co(){return To()}function To(){_o=[],[],_o=[],xo=[],[],go=0,0,vo=0,0,wo=0,So=0,0,(xo=function(){for(;xo.length<15;){var e=Math.ceil(9*Math.random()),t=!1;go>=5&&go<10?e+=10:go>=10&&(e+=20);for(var n=0;n<xo.length;n++)if(xo[n]==e){t=!0;break}t||(xo[xo.length]=e,go++)}return xo}()).sort(function(e,t){return e-t});for(var e=0;e<xo.length;e++){if(0==Eo(t=ko(xo[e]),_o))for(;0==Eo(t,_o);)var t=ko(xo[e]);Po(xo[e],t),Ro(_o,xo[e],t)}return _o}function ko(e){var t;if(e>10){var n=String(e).charAt(1);So=Number(n),wo=So}else wo=e;return vo=bo[wo],t=yo[wo],Math.floor(Math.random()*(vo-t+1))+t}function Eo(e,t){for(var n=!1,r=0;r<t.length;r++)if(t[r].split(":")[1]==e)return n=!0,!1;if(!n)return!0}function Ro(e,t,n){var r=0,i=[],o=[],s=!1;o[o.length]=n;for(var a=0;a<e.length;a++)t+10!=(i=(r=e[a].split(":"))[0])&&t+20!=i&&t-10!=i&&t-20!=i||(o[o.length]=r[1],s=!0);s&&(o.sort(function(e,t){return e-t}),function(e,t,n){for(var r,i=0,o=[],s=0,a=0;a<e.length;a++)i=e[a].split(":"),o=i[0],t+10!=o&&t+20!=o&&t!=o&&t-10!=o&&t-20!=o||(r=o+":"+n[s],e[a]=r,s++)}(e,i,o))}function Po(e,t){return _o.push(e+":"+t),_o}var Ao=ao("config-url"),jo=Ao||"",Io=(ao("user-data"),window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||b),Oo=f(h({simplewebrtc:Xi}),{simplewebrtc:{}},Io(y(S)));window.store=Oo,window.actions=ji,window.selectors=nr,setTimeout(function(){window.location.reload(!0)},432e5);var Mo={"margin-left":"auto !important",height:"150px",width:"100%",padding:"20px",top:"30%"},Do={border:"2px solid black",height:"200px",width:"100%"},No={border:"1px solid black"},Lo={"border-right":"1px solid black","border-bottom":"1px solid black",width:"45px","text-align":"center","font-weight":"bold","font-size":"18pt","min-width":"30px"};t.default={run:function(e){e.roomName;var t=e.root;e.gridPlaceholder,e.haircheckHeaderPlaceholder,e.emptyRosterPlaceholder,e.homepagePlaceholder;if(jo.endsWith("YOUR_API_KEY"))kt.a.render(Ee.a.createElement("div",{className:"container",style:{textAlign:"left"}},Ee.a.createElement("h1",null,"Configuration Setup Needed:"),Ee.a.createElement("p",null,"Edit ",Ee.a.createElement("code",null,"public/index.html")," to add your API key to the configuration URL."),Ee.a.createElement("p",null,"Visit ",Ee.a.createElement("a",{href:"https://simplewebrtc.com"},"simplewebrtc.com")," to sign up and get an API key."),Ee.a.createElement("h2",null,"How to set your API key:"),Ee.a.createElement("p",null,"See the meta tag section marked ",Ee.a.createElement("code",null,"IMPORTANT SETUP")," in ",Ee.a.createElement("code",null,"public/index.html"),":"),Ee.a.createElement("pre",{style:{textAlign:"left"}},"\x3c!-- IMPORTANT SETUP --\x3e",Ee.a.createElement("br",null),"\x3c!-- Change the YOUR_API_KEY section of the config URL to match your API key --\x3e",Ee.a.createElement("br",null),'<meta\n  name="simplewebrtc-config-url"\n  content="https://api.simplewebrtc.com/config/guest/YOUR_API_KEY"\n/>')),t);else{for(var n=Co(),r=[],i=0;i<3;i++){for(var o=[],s=0;s<9;s++){var a=10*i+(s+1);console.log(a);for(var c="cell"+a,u=void 0,l=0;l<n.length;l++)+n[l].split(":")[0]===a&&(u=n[l].split(":")[1]);o.push(Ee.a.createElement("td",{id:c,style:Lo},u))}r.push(Ee.a.createElement("tr",{style:No},o))}kt.a.render(Ee.a.createElement("div",{style:Mo},Ee.a.createElement("table",{id:"table1",style:Do},Ee.a.createElement("tbody",{id:"tbodyid"},r))),t)}},loadTemplate:function(e){var t=document.getElementById(e);return null!==t&&"TEMPLATE"===t.nodeName?document.importNode(t.content,!0):null},randomRoomName:mo}}]).default;